<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs
      </strong>
      <a href="https://maas.io/docs">(switch to live docs)
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  UI-only
      </span>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/storage-layouts-reference.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="maas-installation-requirements.html">
	    Installation requirements
	  </a>
	</li>
	<li>
	  <a href="maas-glossary.html">
	    Glossary
	  </a>
	</li>
      </ul>
      <strong>
	<a href="basic-tutorials.html">
	  Basic tutorials
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-bootstrap-tutorial.html">
	    MAAS bootstrap tutorial
	  </a>
	</li>
	<li>
	  <a href="try-out-the-maas-cli.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="custom-image-tutorial.html">
	    Custom image tutorial
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-get-started-with-maas.html">
	  How to get started with MAAS
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-spin-up-maas-with-ansible.html">
	    Spin up MAAS with Ansible
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-change-maas-settings.html">
	    Change MAAS settings
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Ask for help
	  </a>
	</li>
	<li>
	  <a href="how-to-request-a-feature.html">
	    Request a feature
	  </a>
	</li>
	<li>
	  <a href="how-to-report-a-bug.html">
	    Report a bug
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-set-up-networks.html">
	  How to set up networks
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-connect-maas-networks.html">
	    Connect MAAS networks
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-dhcp.html">
	    Enable DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-acquire-images.html">
	  How to acquire images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-use-standard-images.html">
	    Use standard images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-build-custom-images.html">
	    Build custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-employ-vmware-images.html">
	    Employ VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-tune-controllers.html">
	  How to tune controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-adjust-your-controllers.html">
	    Adjust your controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-physical-machines.html">
	  How to deploy physical machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-make-machines-available.html">
	    Make machines available
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-put-machines-to-work.html">
	    Put machines to work
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-virtual-machines.html">
	  How to deploy virtual machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-set-up-lxd.html">
	    Set up LXD
	  </a>
	</li>
	<li>
	  <a href="how-to-create-vm-hosts.html">
	    Create VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-create-and-manage-vms.html">
	    Create and manage VMs
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-label-and-find-machines.html">
	  How to label and find machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-tag-machines.html">
	    Tag machines
	  </a>
	</li>
	<li>
	  <a href="how-to-annotate-machines.html">
	    Annotate machines
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
	<li>
	  <a href="how-to-find-machines.html">
	    Find machines
	  </a>
	</li>
      </ul>
      <strong>
	How to diagnose issues
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-log-files.html">
	    Work with log files
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-audit-event-logs.html">
	    Work with audit event logs
	  </a>
	</li>
      </ul>
      <strong>
	How to work securely
      </strong>
      <ul>
	<li>
	  <a href="how-to-improve-maas-security.html">
	    Improve MAAS security
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-maas-native-tls.html">
	    Enable MAAS native TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-an-air-gapped-maas.html">
	    Set up an air-gapped MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage user accounts
	  </a>
	</li>
      </ul>
      <strong>
	How to operate reliably
      </strong>
      <ul>
	<li>
	  <a href="how-to-keep-maas-backed-up.html">
	    Keep MAAS backed up
	  </a>
	</li>
	<li>
	  <a href="how-to-observe-a-live-maas.html">
	    Observe a live MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="explanation.html">
	Explanations
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-vm-hosting.html">
	    VM hosting
	  </a>
	</li>
	<li>
	  <a href="understanding-maas-events.html">
	    MAAS events
	  </a>
	</li>
	<li>
	  <a href="undersdtanding-maas-audit-events.html">
	    MAAS audit events
	  </a>
	</li>
	<li>
	  <a href="about-rbac.html">
	    RBAC
	  </a>
	</li>
      </ul>
      <strong>
	API reference
      </strong>
      <ul>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
      </ul>
      <strong>
	<a href=".html">
	  Technical reference
	</a>
      </strong>
      <ul>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="maas-performance.html">
	    MAAS performance
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="storage-layouts-reference.html">
	    Storage layouts
	  </a>
	</li>
	<li>
	  <a href="maas-terraform-provider-reference.html">
	    Terraform provider
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>Storage layouts reference</h1><!-- "Storage layouts reference" -->
<p>There are several possible MAAS storage layouts:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--flat-storage-layout-reference">Flat layout storage</a></li>
<li><a href="#heading--lvm-storage-layout-reference">LVM storage layout</a></li>
<li><a href="#heading--bcache-storage-layout-reference">bcache storage layout</a></li>
<li><a href="#heading--vmfs6-storage-layout-reference">VMFS6 storage layout</a></li>
<li><a href="#heading--blank-storage-layout-reference">Blank storage layout</a></li>
</ul>
<p>The reference descriptions below include the EFI partition. If your system is not using UEFI, regard <code>sda2</code> as <code>sda1</code> (with an additional 512 MB available to it).</p>
<p><a href="#heading--flat-storage-layout-reference"><h2 id="heading--flat-storage-layout-reference">Flat layout storage reference</h2></a></p>
<p>With the Flat layout, a partition spans the entire boot disk. The partition is formatted with the ext4 filesystem and uses the <code>/</code> mount point:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
</tbody>
</table>
<p>The following three options are supported:</p>
<ol>
<li>
<p><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</p>
</li>
<li>
<p><code>root_device</code>: The block device on which to place the root partition. The default is the boot disk.</p>
</li>
<li>
<p><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</p>
</li>
</ol>
<p><a href="#heading--lvm-storage-layout-reference"><h2 id="heading--lvm-storage-layout-reference">LVM storage layout reference</h2></a></p>
<p>The LVM layout creates the volume group <code>vgroot</code> on a partition that spans the entire boot disk. A logical volume <code>lvroot</code> is created for the full size of the volume group; is formatted with the ext4 filesystem; and uses the <code>/</code> mount point:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">lvm-pv(vgroot)</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">lvroot</td>
<td align="right">rest of sda</td>
<td align="center">lvm</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
<tr>
<td align="center">vgroot</td>
<td align="right">rest of sda</td>
<td align="center">lvm</td>
<td align="center"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>The following six options are supported:</p>
<ol>
<li><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</li>
<li><code>root_device</code>: The block device on which to place the root partition. The default is the boot disk.</li>
<li><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</li>
<li><code>vg_name</code>: Name of the created volume group. Default is <code>vgroot</code>.</li>
<li><code>lv_name</code>: Name of the created logical volume. Default is <code>lvroot</code>.</li>
<li><code>lv_size</code>: Size of the created logical volume. Default is 100%, meaning the entire size of the volume group.</li>
</ol>
<p><a href="#heading--bcache-storage-layout-reference"><h2 id="heading--bcache-storage-layout-reference">bcache storage layout reference</h2></a></p>
<p>A bcache layout will create a partition that spans the entire boot disk as the backing device. It uses the smallest block device tagged with &lsquo;ssd&rsquo; as the cache device. The bcache device is formatted with the ext4 filesystem and uses the <code>/</code> mount point. If there are no &lsquo;ssd&rsquo; tagged block devices on the machine, then the bcache device will not be created, and the Flat layout will be used instead:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">bc-backing</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sdb (ssd)</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sdb1</td>
<td align="right">100% of sdb</td>
<td align="center">part</td>
<td align="center">bc-cache</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">bcache0</td>
<td align="right">per sda2</td>
<td align="center">disk</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
</tbody>
</table>
<p>The following seven options are supported:</p>
<ol>
<li><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</li>
<li><code>root_device</code>: The block device upon which to place the root partition. The default is the boot disk.</li>
<li><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</li>
<li><code>cache_device</code>: The block device to use as the cache device. Default is the smallest block device tagged ssd.</li>
<li><code>cache_mode</code>: The cache mode to which MAAS should set the created bcache device. The default is <code>writethrough</code>.</li>
<li><code>cache_size</code>: The size of the partition on the cache device. Default is 100%, meaning the entire size of the cache device.</li>
<li><code>cache_no_part</code>: Whether or not to create a partition on the cache device. Default is false, meaning to create a partition using the given <code>cache_size</code>. If set to true, no partition will be created, and the raw cache device will be used as the cache.</li>
</ol>
<p><a href="#heading--vmfs6-storage-layout-reference"><h2 id="heading--vmfs6-storage-layout-reference">VMFS6 storage layout reference</h2></a></p>
<p>The VMFS6 layout is used for VMware ESXi deployments only. It is required when configuring VMware VMFS Datastores. This layout creates all operating system partitions, in addition to the default datastore. The datastore may be modified.  New datastores may be created or extended to include other storage devices. The base operating system partitions may not be modified because VMware ESXi requires them. Once applied another storage layout must be applied to remove the operating system partitions.</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="left">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">sda1</td>
<td align="right">3 MB</td>
<td align="center">part</td>
<td align="left">EFI</td>
</tr>
<tr>
<td align="left">sda2</td>
<td align="right">4 GB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda3</td>
<td align="right">Remaining</td>
<td align="center">part</td>
<td align="left">VMFS Datastore 1</td>
</tr>
<tr>
<td align="left">sda4</td>
<td align="right">-</td>
<td align="center">skipped</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">sda5</td>
<td align="right">249 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda6</td>
<td align="right">249 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda7</td>
<td align="right">109 MB</td>
<td align="center">part</td>
<td align="left">VMware Diagnostic</td>
</tr>
<tr>
<td align="left">sda8</td>
<td align="right">285 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda9</td>
<td align="right">2.5 GB</td>
<td align="center">part</td>
<td align="left">VMware Diagnostic</td>
</tr>
</tbody>
</table>
<p>The following options are supported:</p>
<ol>
<li>
<p><code>root_device</code>: The block device upon which to place the root partition. Default is the boot disk.</p>
</li>
<li>
<p><code>root_size</code>: Size of the default VMFS Datastore. Default is 100%, meaning the remaining size of the root disk.</p>
</li>
</ol>
<p><a href="#heading--blank-storage-layout-reference"><h2 id="heading--blank-storage-layout-reference">Blank storage layout reference</h2></a></p>
<p>The blank layout removes all storage configuration from all storage devices. It is useful when needing to apply a custom storage configuration.</p>
<p><strong>NOTE:</strong> 
Machines with the blank layout applied are not deployable; you must first configure storage manually.</p>
    </div>
  </body>
</html>