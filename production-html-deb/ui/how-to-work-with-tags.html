<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  &nbsp;UI-only&nbsp;
      </span>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/how-to-work-with-tags.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <p/>
      <strong>
	  Tutorials
      </strong>
      <ul>
	<li>
	  <a href="get-started-with-maas.html">
	    Get started with MAAS
	  </a>
	</li>
	<li>
	  <a href="maas-cli-tutorial.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	  How to get MAAS running
      </strong>
      <ul>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	  How to configure networking
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-networks.html">
	    Manage networks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-ip-addresses.html">
	    Manage IP addresses
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-tls-encryption.html">
	    Enable TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones
	  </a>
	</li>
      </ul>
      <strong>
	  How to choose images
      </strong>
      <ul>
	<li>
	  <a href="how-to-import-images.html">
	    Import images
	  </a>
	</li>
	<li>
	  <a href="how-to-create-custom-images.html">
	    Create custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vmware-images.html">
	    Manage VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	  How to deploy MAAS
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-controllers.html">
	    Manage controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-machines.html">
	    Manage machines
	  </a>
	</li>
	<li>
	  <a href="how-to-deploy-machines.html">
	    Commission and deploy machines
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vm-hosts.html">
	    Manage VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vms.html">
	    Manage VMs
	  </a>
	</li>
	<li>
	  <a href="how-to-use-lxd.html">
	    Use LXD
	  </a>
	</li>
      </ul>
      <strong>
	  How to use tags
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-tags.html">
	    Work with tags
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-annotations.html">
	    Work with annotations
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
      </ul>
      <strong>
	  How to operate MAAS
      </strong>
	<ul>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
	  <li>
	    <a href="how-to-set-up-maas-metrics.html">
	      Set up MAAS metrics
	    </a>
	  </li>
	  <li>
	    <a href="how-to-work-with-audit-event-logs.html">
	      Work with audit event logs
	    </a>
	  </li>
	<li>
	  <a href="how-to-use-maas-in-an-air-gapped-environment.html">
	    Use air-gapped MAAS
	  </a>
	</li>
	  <li>
	  <a href="how-to-back-up-maas.html">
	    Back up MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-secure-maas.html">
	    Secure MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage users
	  </a>
	</li>
	<li>
	  <a href="how-to-search-maas.html">
	    Search MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade older versions
	  </a>
	</li>
      </ul>
      <strong>
	  Reference
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="maas-logging-reference.html">
	    Log files
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event log reference
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="maas-concepts-and-terms-reference.html">
	    Concepts & terms
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Getting help
	  </a>
	</li>
      </ul>
      <strong>
	  Explanation
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="about-controllers.html">
	    About controllers
	  </a>
	</li>
	<li>
	  <a href="about-machines.html">
	    About machines
	  </a>
	</li>
	<li>
	  <a href="about-vm-hosting.html">
	    About VM hosting
	  </a>
	</li>
	<li>
	  <a href="about-tcp-ip-networks.html">
	    About TCP/IP networks
	  </a>
	</li>
	<li>
	  <a href="about-cloud-networks.html">
	    About cloud networks
	  </a>
	</li>
	<li>
	  <a href="about-dhcp.html">
	    About DHCP
	  </a>
	</li>
	<li>
	  <a href="about-networking.html">
	    About MAAS networks
	  </a>
	</li>
	<li>
	  <a href="about-images.html">
	    About images
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
  <h1>How to work with tags</h1><!-- "How to work with tags" -->
<p>Tags for different objects have similar purposes, but they aren&rsquo;t necessarily administered in the same way &ndash; so we&rsquo;ve included detailed articles for each tag type.  That said, many of the common operations regarding tags are performed in the same way.  This article will present some general, explanatory information, and then look at tag management steps that are the same (or very similar) across all types of MAAS tags.</p>
<p><a href="#heading--name-tags"><h2 id="heading--name-tags">How to name tags</h2></a></p>
<p>When working with tags, there are some universal rules you need to follow:</p>
<ol>
<li>Tag names can include any combination of alphabetic letters (a-zA-Z), numbers (0-9), dashes (-) and underscores (_).</li>
<li>Tag names can be a maximum of 256 characters in length.</li>
<li>Tag names <em>cannot</em> include spaces.</li>
</ol>
<p>In general, names that do not conform to these rules cannot be created.</p>
<p><a href="#heading--automatic-tags"><h2 id="heading--automatic-tags">About automatic tags</h2></a></p>
<p>Automatic tags are tags with a definition. The definition allows you to auto-apply tags to machines that match with an <a href="#heading--xpath-expressions">XPath expression</a> you created. Setting up an automatic tag will help you recognise special hardware characteristics and settings. For instance, we can configure the gpu passthrough by creating an XPath expression that recognises a prospective GPU, as shown in the example below.  </p>
<p>In our REST API, a tag has 4 attributes namely, name, definition, kernel options, and comment. The example below shows you how to fill in the definition attribute to create an automatic tag.  In this case, we are tagging all machines that have Intel VT-d enabled and have a Tesla v100 PCIe 16GB GPU:</p>
<p><a href="../images/7be5f2bebbba9a09f70a7dea092d091ef45228e2.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/7be5f2bebbba9a09f70a7dea092d091ef45228e2.png"></a></p>
<p>When this tag is created, our REST API will try to match all machines with this definition and automatically apply the <code>gpgpu-tesla-v-100</code> tag to those machines. Every time a new machine is discovered in your MAAS, if new machines match this definition, they will be automatically tagged as well.</p>
<p><a href="#heading--xpath-expressions"><h2 id="heading--xpath-expressions">About XPath expressions</h2></a></p>
<p>MAAS automatic tags accept XPath expressions in the definition attribute of the tag. XPath expressions are evaluated against <code>lshw</code>&lsquo;s XML output; they are used to locate elements or attributes of the XML document for use in configuring automatic tags. You can use the lshw output in the hardware configuration details of a machine in MAAS and use that to create an XPath expression. </p>
<p><a href="#heading--xpath-hardware-config-info"><h3 id="heading--xpath-hardware-config-info">Hardware configuration information</h3></a></p>
<p>You can download your HW configuration information in the XML format by going to the machine details page of any allocated or deployed machines.  Choose Logs &gt;&gt; Installation output &gt;&gt; Download &gt;&gt; Machine output (XML) to capture these details:</p>
<p><a href="../images/387b8b6a7ded18e523c818500d79f0d657868b87.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/387b8b6a7ded18e523c818500d79f0d657868b87.png"></a></p>
<p>You can <a href="https://ezix.org/project/wiki/HardwareLiSter">learn more about these attributes</a> if desired.  Note that:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>Size and capacity can have various meanings depending on the device</li>
<li>The size of a node is always equal to its capacity</li>
<li>Serial refers to the device’s serial number, but is used to report the MAC address for network devices, GUID for disk partition.</li>
</ul>
<p><a href="#heading--device-classes"><h3 id="heading--device-classes">Device classes</h3></a></p>
<p>You can also find device classes from the same sources:</p>
<p><a href="../images/7368ba42d0d34571447dbb6830b363abace580bb.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/7368ba42d0d34571447dbb6830b363abace580bb.png"></a></p>
<p><a href="#heading--node-capabilities"><h3 id="heading--node-capabilities">Capabilities</h3></a></p>
<p>Capabilities are used to report features of a given node. The exact meaning of each feature depends on the type of node. It can be the presence of an arithmetical co-processor for a CPU, the ability to run at 1GB/s for a network interface, etc. In most cases, capabilities reported by lshw are auto-documented.</p>
<p>To see the capabilities of a specific machine, you can download your HW configuration information, as described above.</p>
<p><a href="#heading--kernel-options"><h2 id="heading--kernel-options">About Kernel options</h2></a></p>
<p>You can add kernel options when creating both manual and automatic tags. Kernel options will be automatically applied at boot time or when the machine with that tag is commissioned or deployed. </p>
<p>When updating kernel options on a tag that matches Deployed machines, be aware that the new kernel option will be applied during boot time, so you will need to release and re-deploy them to pick up the change. Otherwise, these deployed machines will have the old kernel options.</p>
<p>If there are multiple tags associated with a machine, the kernel options will be concatenated from all the tags combined, sorted alphabetically .</p>
<p><a href="#heading--how-to-create-automatic-tags"><h2 id="how-to-create-automatic-tags">How to create automatic tags</h1></a></p>
<p>You can create an automatic tag by going to the <code>Tag</code> tab and click <code>Create new tag</code>. A tag is considered automatic when the definition field is filled with an XPath expression. The current version of our UI will only validate if your XPath expression is valid or not, but it will not show you which machines it will apply to before you create the tag.</p>
<p>Here is a thumbnail sketch of how automatic tags work:</p>
<p><a href="../images/fb003af31284581af931868daff1d735b6a52336.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/fb003af31284581af931868daff1d735b6a52336.png"></a></p>
<p>When you choose to create a new tag, you are presented with a screen similar to this one:</p>
<p><a href="../images/e56224d790144ba30199f37370437d63aed09cd3.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/e56224d790144ba30199f37370437d63aed09cd3.png"></a></p>
<p>While creating the tag, you also have an option to add kernel options to an automatic tag. Bear in mind that if a machine has multiple tags, it will be tagged alphabetically and the kernel option from the last tag will be applied to that machine. </p>
<p>Once an automatic tag is created the screen will initially show that 0 machines are tagged. That is because MAAS is running a background task to auto-apply the tag to matching machines. It can take some time to see that the number of machines tagged is populating. </p>
<p><strong>NOTE:</strong> 
Kernel options will be applied at boot time. So by default kernel options will not be applied to any machines until they are deployed. If machines are deployed before they are tagged, the kernel option will be applied when these machines are redeployed.</p>
<p><a href="#heading--how-to-update-automatic-tags"><h2 id="heading--how-to-update-automatic-tags">How to update the definition of a tag</h2></a></p>
<p>To update the definition for the automatic tag, go to the ‘Tag’ tab and click the edit icon:</p>
<p><a href="../images/011d3179b7128fc1bee33a7368ca18267fe92c76.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/011d3179b7128fc1bee33a7368ca18267fe92c76.png"></a></p>
<p>This will open up the form and allow you to make changes in edit mode:</p>
<p><a href="../images/1f4a8159dc08a0b013df323fbf88dcf80b932e3e.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/1f4a8159dc08a0b013df323fbf88dcf80b932e3e.png"></a></p>
<p>If the new definition is not a valid XPath expression, MAAS will generate an error:</p>
<p><a href="../images/f8dff191b24ac07338c9c6e33d8a03e7e5001c46.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/f8dff191b24ac07338c9c6e33d8a03e7e5001c46.png"></a></p>
<p>Keep in mind that when a new definition is updated, MAAS will re-tag all the machines that match with the new definition. This can take some time, since it is a background process. </p>
<p><a href="#heading--update-tag-kernel-options"><h2 id="heading--update-tag-kernel-options">How to update the kernel option on a Tag</h2></a></p>
<p>Kernel options can exist for both manual and automatic tags. However, they will be applied during boot time (commissioning and deploying).  To update the kernel options, go to the ‘Tag’ tab and click the edit icon. Update the text area in the kernel option in this form:</p>
<p><a href="../images/24ba6c81862981fdb7739cf61f2936b5204378e7.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/24ba6c81862981fdb7739cf61f2936b5204378e7.png"></a></p>
<p><strong>NOTE:</strong> 
If the tagged machines are deployed, the updated kernel option won’t apply until the machines are redeployed. We suggest that you release those machines prior to the update, then redeploy those machines when the kernel options of the tag are updated.</p>
<p><a href="#heading--unassign-tags-from-machines"><h2 id="heading--unassign-ags-from-machines">How to unassign tags from machines</h2></a></p>
<p>There are two ways to unassign tags. In the machine listing page, select all machines that you would like to unassign the tag then click ‘Tag’. A tag form is open. In the first field, ‘Tags’, click the x icon on the chip component to unassign the tags:</p>
<p><a href="../images/721d2f6c087ffaa9022f9a15e18783f309a4a3d0.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/721d2f6c087ffaa9022f9a15e18783f309a4a3d0.png"></a></p>
<p>Click &ldquo;Remove&rdquo; to unassign a tag:</p>
<p><a href="../images/9d0cd6b1a09f67237d48fb634c22b5f407c1ec4a.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/9d0cd6b1a09f67237d48fb634c22b5f407c1ec4a.png"></a></p>
<p>The numbers prescribed in the chip indicate the number of selected machines associated with that tag. You may click on the chip to view its information. After unassigning, click save to confirm the changes. </p>
<p><strong>NOTE:</strong> 
Automatic tags cannot be unassigned manually. You can either update or delete automatic tags.</p>
<p>You can also unassign tags individually by going to the configuration tab on the machine details page; click the &ldquo;X&rdquo; icon to unassign the tag:</p>
<p><a href="../images/8b4cb6617d2287eca7617c962578f90722ac2332.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/8b4cb6617d2287eca7617c962578f90722ac2332.png"></a></p>
<p>You may reassign the tag by typing or clicking on the text field to see existing tags. Note that the tag will be assigned to all selected machines. </p>
<p><a href="#heading--see-all-tagged-nodes"><h2 id="heading--see-all-tagged-nodes">How to see all tagged nodes</h2></a></p>
<p>To see how many nodes (Machines, controllers, devices) are tagged, search for GRUB_CMDLINE_LINUX_DEFAULT in the &ldquo;Installation output&rdquo; tab of the machine details page. That log should stay around for the lifetime of the deployment of the machine.  The log gets overwritten when you redeploy the machine.  For example:</p>
<pre><code class="language-nohighlight">GRUB_CMDLINE_LINUX_DEFAULT=&quot;sysrq_always_enabled dyndbg='file drivers/usb/* +p' console=tty1 console=ttyS0&quot;
</code></pre>
<p><a href="#heading--tag-definition-reference"><h2 id="heading--tag-definition-reference">Tag definition reference examples</h2></a></p>
<p>Here are some examples of tag definitions &ndash; <a href="https://github.com/canonical/mxt">more examples are available</a>.</p>
<p>Commonly used Xpath functions usually include:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>contains</li>
<li>starts-with</li>
<li>ends-with</li>
</ul>
<h3>Example 1</h3>
<p>This definition will identify machines with proper CPU tags, cores, and RAM, and tag them as a hypervisor:</p>
<p><a href="../images/d1c8e2674445045ee9c8c9f1d14f3fa413af9be8.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/d1c8e2674445045ee9c8c9f1d14f3fa413af9be8.png"></a></p>
<p>This example looks for at least 40 cores and 256 GB of RAM and has all the required CPU features for being a hypervisor for both Intel and AMD.</p>
<p><strong>NOTE:</strong> 
Don&rsquo;t forget to adjust cores and RAM (in bytes) to suit your particular needs and available resources.</p>
<p>You can also define this tag with the CLI:</p>
<pre><code class="language-nohighlight">maas ${MAAS_PROFILE} tags create name=hypervisor \
definition='//node[@id=&quot;memory&quot;]/size &gt;= &quot;274877906944&quot; and \
//node[@id=&quot;cpu&quot;]/configuration/setting/id=&quot;cores&quot; &gt;= 40 and \
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;vmx&quot; or @id=&quot;svm&quot; and \
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;aes&quot; and 
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;flexpriority&quot; and 
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;tpr_shadow&quot; and 
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;ept&quot; and 
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;vpid&quot; and 
//node[@id=&quot;cpu&quot;]//capabilities/capability/@id = &quot;vnmi&quot;'
</code></pre>
<h3>Example 2</h3>
<p>This will tag UEFI enabled KVM VMs running on AMD-based servers:</p>
<p><a href="../images/adde5f51e396a3a2d2f70daad7787fe087723664.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/adde5f51e396a3a2d2f70daad7787fe087723664.png"></a></p>
<p>You can also do this with the CLI:</p>
<pre><code class="language-nohighlight">maas ${MAAS_PROFILE} tags create \
name=kvm-amd-uefi \
definition='//node[@class=&quot;system&quot;]/vendor = &quot;QEMU&quot; and //node[@id=&quot;firmware&quot;]/capabilities/capability/@id = &quot;virtualmachine&quot; and //node[@id=&quot;firmware&quot;]/capabilities/capability/@id = &quot;uefi&quot; and //node[@class=&quot;processor&quot;]/vendor[starts-with(.,&quot;Advanced Micro Devices&quot;)]' \
kernel_opts='nomodeset console=tty0 console=ttyS0,115200n8 amd_iommu=on kvm-amd.nested=1 kvm-amd.enable_apicv=n kvm.ignore_msrs=1' \
comment='Tag for automatically identifying AMD-based KVM vms (UEFI BIOS)'
</code></pre>
<h3>Example 3</h3>
<p>This will automatically tag servers that have NVME controllers:</p>
<p><a href="../images/166cd775669610ba454b5f2883e7729b79770bd0.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/166cd775669610ba454b5f2883e7729b79770bd0.png"></a></p>
<p>To accomplish the same thing in the CLI:</p>
<pre><code class="language-nohighlight">maas ${MAAS_PROFILE} tags create name=NVME comment=&quot;xpath tag for automatically tagging servers that have NVME controllers&quot; definition='//node[@id=&quot;storage&quot; and @class=&quot;storage&quot;]/description = &quot;Non-Volatile memory controller&quot;'
</code></pre>
<h3>Example 4</h3>
<p>This will tag servers with Mellanox ConnectX-5 NICs:</p>
<p><a href="../images/34ed75cf40ded49ac5eb8d76467817b5618b11a9.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/34ed75cf40ded49ac5eb8d76467817b5618b11a9.png"></a></p>
<p>And you can also do this in the CLI:</p>
<pre><code class="language-nohighlight">maas ${MAAS_PROFILE} tags create \
name=connectx-5 \
definition='//node[@class=&quot;network&quot;]/vendor[starts-with(.,&quot;Mellanox&quot;)] and //node[@class=&quot;network&quot;]/product[contains(.,&quot;ConnectX-5&quot;)]' \
comment='Tag for automatically identifying servers with Mellanox Technologies ConnectX-5 cards'
</code></pre>
<h3>Example 5</h3>
<p>This will enable GPU passthrough for Nvidia Quadro K series GPUs on AMD:</p>
<p><a href="../images/3f258d7e98c0adc7b605b8d2846b76737d46a27e.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/3f258d7e98c0adc7b605b8d2846b76737d46a27e.png"></a></p>
<p>You can also duplicate this example in the CLI:</p>
<pre><code class="language-nohighlight">maas ${MAAS_PROFILE} tags create \
name=gpgpu-quadro-k-a \
comment=&quot;Enable passthrough for Nvidia Quadro K series GPUs on AMD&quot; \
definition='//node[@id=&quot;cpu:0&quot;]/capabilities/capability/@id = &quot;svm&quot; and //node[@id=&quot;display&quot;]/vendor[contains(.,&quot;NVIDIA&quot;)] and //node[@id=&quot;display&quot;]/description[contains(.,&quot;3D&quot;)] and //node[@id=&quot;display&quot;]/product[contains(.,&quot;Quadro K&quot;)]'
</code></pre>
<p><a href="#heading--create-and-assign-tags"><h2 id="heading--create-and-assign-tags">How to create and assign tags</h2></a></p>
<p>In the MAAS UI, creating and assigning tags is a combined operation; that is, you create tags as you assign them, rather than creating them first.  Creating tags in the UI is a little different user experience: there is a self-loading completion menu that collects all tags of a similar type.  This completion menu helps you avoid misspelling tags when entering them more than once; otherwise, you might not be able to group and filter tags properly. It also makes tag entry more efficient.</p>
<p>To remove a tag only from specific machines, go to the machine list and select the machines from which you want to remove that tag.  Choose the &ldquo;Take action&rdquo; button and select the &ldquo;Tag&rdquo; option:</p>
<p><a href="../images/db90b855d4fb5eccc968d9a2375d3b187b619150.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/db90b855d4fb5eccc968d9a2375d3b187b619150.png"></a></p>
<p>On the screen that follows, enter the name of the new tag in the tag name box, without spaces:</p>
<p><a href="../images/a7538882ca97278fbf927e11ccdc43b7e796c882.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/a7538882ca97278fbf927e11ccdc43b7e796c882.png"></a></p>
<p>A modal dialog pops up, giving you the opportunity to enter a name, comments, and kernel options for the new tag:</p>
<p><a href="../images/3a064e0677857fb6476b6bf60382eb3a34a602de.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/3a064e0677857fb6476b6bf60382eb3a34a602de.png"></a></p>
<p>Select &ldquo;Create and add to tag changes&rdquo;; you will be returned to the previous screen, with a special row labeled &ldquo;To be added&rdquo;:</p>
<p><a href="../images/ec92304c819bdc697b5b42fc6245326c76d19300.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/ec92304c819bdc697b5b42fc6245326c76d19300.png"></a></p>
<p>If the tag to be added looks correct, select &ldquo;Save&rdquo; to save and implement your changes.</p>
<p><a href="#heading--delete-and-remove-tags"><h2 id="heading--delete-and-remove-tags">How to delete and remove tags</h2></a></p>
<p>You have two choices when it comes to eliminating tags from machines in your MAAS instance: you can delete them from all machines, or simply remove them from specific machines.</p>
<p><a href="#heading--delete-from-all-machines"><h3 id="heading--delete-from-all-machines">Deleting tags from all machines at once</h3></a></p>
<p>To delete tags from all machines at the same time, go to the &ldquo;Tags&rdquo; tab in the machine list and click the trash can icon next to the tag you&rsquo;d like to delete:</p>
<p><a href="../images/bdb87e9731694b7b68b135fd77114fab19823012.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/bdb87e9731694b7b68b135fd77114fab19823012.png"></a></p>
<p>A confirmation screen will pop up, warning you that you are about to remove the tag from all machines.  To confirm your choice, select the &ldquo;Delete&rdquo; button, or cancel if you change your mind:</p>
<p><a href="../images/200020d67b7324fc55482604d4dae0eee16d0b42.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/200020d67b7324fc55482604d4dae0eee16d0b42.png"></a></p>
<p>The tag will be deleted from the system altogether, and removed from every machine to which it was assigned.</p>
<p><a href="#heading--remove-from-some-machines"><h3 id="heading--remove-from-some-machines">Removing a tag from specific machines</h3></a></p>
<p>To remove a tag only from specific machines, go to the machine list and select the machines from which you want to remove that tag.  Choose the &ldquo;Take action&rdquo; button and select the &ldquo;Tag&rdquo; option:</p>
<p><a href="../images/db90b855d4fb5eccc968d9a2375d3b187b619150.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/db90b855d4fb5eccc968d9a2375d3b187b619150.png"></a></p>
<p><strong>NOTE:</strong> 
You may not remove automatic tags using this screen.</p>
<p>Click the trash can icon (&ldquo;Remove&rdquo;) next to the tags you with to remove from these particular machines:</p>
<p><a href="../images/988417aa224e34e627135cd0374a50eba34b0eab.png" target = "_blank"><img alt="unlabeled image" width="690" src="../images/988417aa224e34e627135cd0374a50eba34b0eab.png"></a></p>
<p>The tag will be removed from the selected machines.</p>
    </div>
  </body>
</html>