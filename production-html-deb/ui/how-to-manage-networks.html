<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/how-to-manage-networks.html">
	  UI-only
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/how-to-manage-networks.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="../maas-documentation-25.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="get-started-with-maas.html">
	    Get started with MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-use-the-maas-cli.html">
	    Use the MAAS CLI
	  </a>
	</li>
      <strong>
	<a href="about-controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-racks.html">
	    Manage racks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-regions.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-machines.html">
	    Manage machines
	  </a>
	</li>
	<li>
	  <a href="how-to-deploy-machines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-vm-hosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-vm-hosts.html">
	    Manage VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vms.html">
	    Manage VMs
	  </a>
	</li>
	<li>
	  <a href="how-to-use-lxd.html">
	    Use LXD
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-networks.html">
	    Manage networks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-machine-interfaces.html">
	    Manage interfaces
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-dhcp.html">
	    Manage DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-ip-ranges.html">
	    Manage IP ranges
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-proxies.html">
	    Manage proxies
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-tls-encryption.html">
	    Enable TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-ntp.html">
	    Set up NTP
	  </a>
	</li>
	<li>
	  <a href="how-to-use-maas-in-an-air-gapped-environment.html">
	    Use air-gapped MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-import-images.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="how-to-build-maas-images.html">
	    Build MAAS images
	  </a>
	</li>
	<li>
	  <a href="how-to-create-a-custom-ubuntu-image.html">
	    Create custom Ubuntu images
	  </a>
	</li>
	<li>
	  <a href="how-to-use-image-streams.html">
	    Use image streams
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vmware-images.html">
	    Manage VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-tags-and-annotations.html">
	  Tags
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-tags.html">
	    Manage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
      </ul>
	<p/>
	<strong>
	  Operations
	</strong>
	<ul>
	  <li>
	    <a href="how-to-set-up-prometheus-metrics.html">
	      Set up Prometheus
	    </a>
	  </li>
	  <li>
	  <a href="how-to-back-up-maas.html">
	    Back up MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-secure-maas.html">
	    Secure MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage users
	  </a>
	</li>
	<li>
	  <a href="how-to-search-maas.html">
	    Search MAAS
	  </a>
	</li>
      </ul>
      <strong>
	Reference
      </strong>
      <ul>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="maas-logging-reference.html">
	    Log files
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API reference
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="maas-concepts-and-terms-reference.html">
	    Concepts & terms
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-troubleshoot-maas.html">
	  Troubleshooting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-get-help.html">
	    Get help
	  </a>
	</li>
	<li>
	  <a href="tips-and-tricks.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="what-is-new-with-maas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="how-to-contact-us.html">
	  Contact us
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
  <h1>How to manage networks</h1><p>You can easily manage the basic networking elements of MAAS, including subnets, fabrics, VLANs, spaces, and IP ranges.  This section shows how to access and edit these elements. See <a href="maas-concepts-and-terms-reference-5410.html">Concepts and terms</a> for the definitions of these networking components.</p>
<p>This section will show you:</p>
<ul>
<li><a href="#heading--how-to-enable-network-discovery">How to enable network discovery</a></li>
<li><a href="#heading--how-to-toggle-subnet-management">How to toggle subnet management</a></li>
<li><a href="#heading--how-to-access-ui-main-networking-view">How to access the main networking view</a></li>
<li><a href="#heading--ui-how-to-display-the-subnet-window">How to display the subnet window</a></li>
<li><a href="#heading--ui-how-to-view-the-subnet-summary">How to view the subnet summary</a></li>
<li><a href="#heading--ui-how-to-view-utilisation">How to view utilisation</a></li>
<li><a href="#heading--how-to-manage-static-routes">How to manage static routes between subnets</a></li>
<li><a href="#heading--how-to-view-reserved-ranges">How to view reserved ranges</a></li>
<li><a href="#heading--ui-how-to-view-used-ip-addresses">How to view used IP addresses</a></li>
<li><a href="#heading--how-to-set-up-a-bridge-with-maas">How to set up a bridge with MAAS</a></li>
<li><a href="#heading--how-to-set-up-a-bridge-with-netplan">How to set up a bridge with netplan</a></li>
</ul>
<p><a href="#heading--how-to-enable-network-discovery"><h3 id="heading--how-to-enable-network-discovery">How to enable network discovery</h3></a></p>
<p>Network discovery can be disabled or re-enabled using the switch on the Network discovery dashboard.</p>
<p><a href="images/1782e4aa-installconfig-networking__2.4_discovery.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/1782e4aa-installconfig-networking__2.4_discovery.png"></a></p>
<p><a href="#heading--how-to-toggle-subnet-management"><h3 id="heading--how-to-toggle-subnet-management">How to toggle subnet management</h3></a></p>
<p>To disable (or re-enable) subnet management, use the following procedure:</p>
<ol>
<li>
<p>Navigate to the &lsquo;Subnets&rsquo; page and select the subnet.</p>
</li>
<li>
<p>Press the &lsquo;Edit&rsquo; button to allow changes; the &lsquo;Managed allocation&rsquo; field will become a slide switch.</p>
</li>
<li>
<p>Click the label (or the switch icon itself) to toggle between enabled (dark blue) and disabled (grey).</p>
</li>
<li>
<p>Click &lsquo;Save summary&rsquo;.</p>
</li>
</ol>
<p>The following screenshot illustrates this process.</p>
<p><a href="images/e5d80c8c-installconfig-network-subnet-management__2.6-management-toggle.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/e5d80c8c-installconfig-network-subnet-management__2.6-management-toggle.png"></a></p>
<p><a href="#heading--how-to-access-ui-main-networking-view"><h3 id="heading--how-to-access-ui-main-networking-view">How to access the main networking view</h3></a></p>
<p>To access the main networking view visit the &lsquo;Subnets&rsquo; page:</p>
<p><a href="images/657bb332-installconfig-networking__2.4_subnets.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/657bb332-installconfig-networking__2.4_subnets.png"></a></p>
<p>This main view can also be filtered either by fabrics or by spaces through the use of the &lsquo;Group by&rsquo; drop-down.</p>
<p><a href="#heading--ui-how-to-display-the-subnet-window"><h3 id="heading--ui-how-to-display-the-subnet-window">How to display the subnet window</h3></a></p>
<p>Clicking a subnet (here <code>192.168.100.0/24</code>) will display its detail screen, which contains several sections, described below.</p>
<p><a href="#heading--ui-how-to-view-the-subnet-summary"><h3 id="heading--ui-how-to-view-the-subnet-summary">How to view the subnet summary</h3></a></p>
<p>The <strong>Subnet summary</strong> section is the largest and most complex of the subnet configuration screens:</p>
<p><a href="images/17617b35-installconfig-networking__2.4_subnets-summary.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/17617b35-installconfig-networking__2.4_subnets-summary.png"></a></p>
<p>This screen presents the following configurable options:</p>
<ul>
<li>
<p><strong>Name</strong>: Subnet names can be any valid text string. By default, they are named with the CIDR of the subnet itself.</p>
</li>
<li>
<p><strong>CIDR</strong>: This is the address parameter for the subnet.  In keeping with standard CIDR notation, the number of bits of the prefix are indicated after the slash.</p>
</li>
<li>
<p><strong>Gateway IP</strong>: This is the address of the default gateway for your subnet, which is the IP address that transfers packets to other subnets or networks. Typically, this is simply the first IP address in a block of addresses (the <code>.1</code> address).</p>
</li>
<li>
<p><strong>DNS</strong>: This is the address of a DNS (domain name server, or simply &ldquo;name server&rdquo;) for your subnet.  It&rsquo;s optional, but can be configured if desired.</p>
</li>
<li>
<p><strong>Description</strong>: This field represents free form text that you can enter to describe your subnet, as needed to keep important notes attached to the definition of the subnet.</p>
</li>
<li>
<p><strong>Managed allocation</strong> refers to the ability of MAAS to completely <a href="#heading--about-managed-subnets">manage a subnet</a>.</p>
</li>
<li>
<p><strong>Active mapping</strong> instructs MAAS to scan the subnet every 3 hours to discover hosts that have not been discovered passively.</p>
</li>
<li>
<p><strong>Proxy access</strong> instructs MAAS to allow clients from this subnet to access the MAAS proxy.</p>
</li>
<li>
<p><strong>Allow DNS resolution</strong> allows subnet clients to use MAAS for DNS resolution.</p>
</li>
<li>
<p><strong>Fabric</strong>: This field allows you to set the subnets fabric.</p>
</li>
<li>
<p><strong>VLAN</strong>: This field allows you to set the subnets VLAN.</p>
</li>
<li>
<p><strong>Space</strong> is presented for clarity, though spaces are managed at the VLAN level.</p>
</li>
</ul>
<p><a href="#heading--ui-how-to-view-utilisation"><h3 id="heading--ui-how-to-view-utilisation">How to view utilisation</h3></a></p>
<p>This section of the subnet page presents metrics regarding address usage by this subnet.</p>
<p><a href="images/3d3e4b61-installconfig-networking__2.4_subnets-utilisation.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/3d3e4b61-installconfig-networking__2.4_subnets-utilisation.png"></a></p>
<p>&lsquo;Subnet addresses&rsquo; shows the total number of addresses associated with the subnet, here 254. &lsquo;Availability&rsquo; shows how many of those addresses are unused, and therefore &ldquo;available&rdquo;, here 189, which corresponds to a percentage of roughly 74% of the total. Finally, &lsquo;Used&rsquo; shows the percentage that is used, here roughly 26%.</p>
<p><a href="#heading--how-to-manage-static-routes"><h3 id="heading--how-to-manage-static-routes">How to manage static routes between subnets</h3></a></p>
<p>To create a static route:</p>
<ol>
<li>
<p>Click the &lsquo;Add static route&rsquo; button to reveal the edit pane. </p>
</li>
<li>
<p>Enter a Gateway IP address.</p>
</li>
<li>
<p>Select a destination subnet from the &lsquo;Destination&rsquo; drop-down list.</p>
</li>
<li>
<p>Edit the routing metric value if needed. </p>
</li>
<li>
<p>Click &lsquo;Add&rsquo; to activate the route. </p>
</li>
</ol>
<p>Routes can be edited and removed using the icons to the right of each entry.</p>
<p><a href="images/49f5e240-installconfig-networking__2.4_subnets-routes.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/49f5e240-installconfig-networking__2.4_subnets-routes.png"></a></p>
<p><a href="#heading--how-to-view-reserved-ranges"><h3 id="heading--how-to-view-reserved-ranges">How to view reserved ranges</h3></a></p>
<p>The reserved ranges section of the subnet screen looks like this:</p>
<p><a href="images/5f9f50f9-installconfig-networking__2.4_subnets-reserved.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/5f9f50f9-installconfig-networking__2.4_subnets-reserved.png"></a></p>
<p>More details and instructions regarding these ranges can be found in <a href="how-to-manage-ip-ranges-5138.html">IP ranges</a>.</p>
<p><a href="#heading--ui-how-to-view-used-ip-addresses"><h3 id="heading--ui-how-to-view-used-ip-addresses">How to view used IP addresses</h3></a></p>
<p>This section displays hosts (including controllers) associated with the used addresses along with related bits of host information.</p>
<p><a href="images/b9e69b0b-installconfig-networking__2.4_subnets-used.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/b9e69b0b-installconfig-networking__2.4_subnets-used.png"></a></p>
<p><a href="#heading--how-to-set-up-a-bridge-with-maas"><h3 id="heading--how-to-set-up-a-bridge-with-maas">How to set up a bridge with MAAS</h3></a></p>
<p>At various times in your MAAS network, you may need to set up a bridge to connect between your machines and MAAS, as shown in this section.</p>
<p>[note]
It&rsquo;s essential to enforce usage of IP addresses to avoid domain name conflicts, should different controllers resolve the same domain name with different IP addresses. You should also avoid using 127.0.0.1 when running multiple controllers, as it would confuse MAAS.
[/note]</p>
<p>To configure a bridge with the MAAS UI: </p>
<ol>
<li>
<p>Select the machine you want to bridge. </p>
</li>
<li>
<p>Switch to the &ldquo;Network&rdquo; tab. </p>
</li>
<li>
<p>Select the network where you want to create the bridge and click &ldquo;Create bridge:&rdquo;</p>
</li>
</ol>
<p><a href="images/29624d737106c5bad777aee9d2c8cad9c3de7151.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/29624d737106c5bad777aee9d2c8cad9c3de7151.jpeg"></a> </p>
<ol>
<li>Configure the bridge on a subnet MAAS controls (you may use any IP mode for the bridge):</li>
</ol>
<p><a href="images/dd8567ff1cd76606c5ce1751e606fcfab2bc7ce2.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/dd8567ff1cd76606c5ce1751e606fcfab2bc7ce2.jpeg"></a> </p>
<p>When you&rsquo;re done, it should look something like this:</p>
<p><a href="images/e392d638f0acecb9d54c81bbca4ee17cbcd05445.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/e392d638f0acecb9d54c81bbca4ee17cbcd05445.jpeg"></a> </p>
<p>Then you can deploy machines using this bridge.</p>
<p><strong>NOTE</strong> that you can create an &ldquo;Open switch&rdquo; bridge if desired, and MAAS will create the netplan model for you.</p>
<p><a href="#heading--how-to-set-up-a-bridge-with-netplan"><h3 id="heading--how-to-set-up-a-bridge-with-netplan">How to set up a bridge with netplan</h3></a></p>
<p>You can also use netplan to configure a bridge:</p>
<ol>
<li>
<p>Open your netplan configuration file.  This should be in <code>/etc/netplan</code>.  It could be called <code>50-cloud-init.yaml</code>, <code>netplan.yaml</code>, or something else.  </p>
</li>
<li>
<p>Modify the file to add a bridge, using the following example as a guide:</p>
</li>
</ol>
<pre><code class="language-nohighlight">network:
    bridges:
        br0:
            addresses:
            - 10.0.0.101/24
            gateway4: 10.0.0.1
            interfaces:
            - enp1s0
            mac address: 52:54:00:39:9d:f9
            mtu: 1500
            name servers:
                addresses:
                - 10.0.0.2
                search:
                - maas
            parameters:
                forward-delay: 15
                stp: false
    Ethernet's:
        enp1s0:
            match:
                mac address: 52:54:00:39:9d:f9
            mtu: 1500
            set-name: enp1s0
        enp2s0:
            match:
                mac address: 52:54:00:df:87:ac
            mtu: 1500
            set-name: enp2s0
        enp3s0:
            match:
                mac address: 52:54:00:a7:ac:46
            mtu: 1500
            set-name: enp3s0
    version: 2
</code></pre>
<ol>
<li>Apply the new configuration with <code>netplan apply</code>.</li>
</ol>
    </div>
  </body>
</html>