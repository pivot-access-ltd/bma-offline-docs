<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/how-to-manage-machines.html">
	  UI-only
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/how-to-manage-machines.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="../maas-documentation-25.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="get-started-with-maas.html">
	    Get started with MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-use-the-maas-cli.html">
	    Use the MAAS CLI
	  </a>
	</li>
      <strong>
	<a href="about-controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-racks.html">
	    Manage racks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-regions.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-machines.html">
	    Manage machines
	  </a>
	</li>
	<li>
	  <a href="how-to-deploy-machines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-vm-hosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-vm-hosts.html">
	    Manage VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vms.html">
	    Manage VMs
	  </a>
	</li>
	<li>
	  <a href="how-to-use-lxd.html">
	    Use LXD
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-networks.html">
	    Manage networks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-machine-interfaces.html">
	    Manage interfaces
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-dhcp.html">
	    Manage DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-ip-ranges.html">
	    Manage IP ranges
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-proxies.html">
	    Manage proxies
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-tls-encryption.html">
	    Enable TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-ntp.html">
	    Set up NTP
	  </a>
	</li>
	<li>
	  <a href="how-to-use-maas-in-an-air-gapped-environment.html">
	    Use air-gapped MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-import-images.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="how-to-build-maas-images.html">
	    Build MAAS images
	  </a>
	</li>
	<li>
	  <a href="how-to-create-a-custom-ubuntu-image.html">
	    Create custom Ubuntu images
	  </a>
	</li>
	<li>
	  <a href="how-to-use-image-streams.html">
	    Use image streams
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vmware-images.html">
	    Manage VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="about-tags-and-annotations.html">
	  Tags
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-tags.html">
	    Manage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
      </ul>
	<p/>
	<strong>
	  Operations
	</strong>
	<ul>
	  <li>
	    <a href="how-to-set-up-prometheus-metrics.html">
	      Set up Prometheus
	    </a>
	  </li>
	  <li>
	  <a href="how-to-back-up-maas.html">
	    Back up MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-secure-maas.html">
	    Secure MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage users
	  </a>
	</li>
	<li>
	  <a href="how-to-search-maas.html">
	    Search MAAS
	  </a>
	</li>
      </ul>
      <strong>
	Reference
      </strong>
      <ul>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="maas-logging-reference.html">
	    Log files
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API reference
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="maas-concepts-and-terms-reference.html">
	    Concepts & terms
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-troubleshoot-maas.html">
	  Troubleshooting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-get-help.html">
	    Get help
	  </a>
	</li>
	<li>
	  <a href="tips-and-tricks.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="what-is-new-with-maas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="how-to-contact-us.html">
	  Contact us
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
  <h1>How to manage machines</h1><p>This article explains:</p>
<ul>
<li><a href="#heading--how-to-create-delete-and-configure-machines">How to create, delete, and configure machines</a></li>
<li><a href="#heading--how-to-clone-machines">How to clone machines</a></li>
<li><a href="#heading--how-to-examine-machines-and-machine-details">How to examine machines and machine details</a></li>
<li><a href="#heading--how-to-use-resource-pools">How to use resource pools</a></li>
<li><a href="#heading--how-to-use-machine-storage">How to use machine storage</a></li>
</ul>
<p>This article also provides a:</p>
<ul>
<li><a href="#heading--storage-layouts-reference">Storage layouts reference</a></li>
</ul>
<p>Most of the day-to-day work of managing machines is covered here. Utilising machines to do work &ndash; for example, commissioning, testing, and deploying them &ndash; is discussed in <a href="how-to-deploy-machines-5114.html">How to deploy machines</a>.</p>
<p><a href="#heading--how-to-create-delete-and-configure-machines"><h2 id="heading--how-to-create-delete-and-configure-machines">How to create, delete, and configure machines</h2></a></p>
<p>This section shows you:</p>
<ul>
<li><a href="#heading--how-to-add-a-machine-manually">How to add a machine manually</a></li>
<li><a href="#heading--how-to-add-machines-via-a-chassis">How to add machines via a chassis</a></li>
</ul>
<p><a href="#heading--how-to-add-a-machine-manually"><h3 id="heading--how-to-add-a-machine-manually">How to add a machine manually</h3></a></p>
<p>On the &lsquo;Machines&rsquo; page of the web UI, click the &lsquo;Add hardware&rsquo; button and then select &lsquo;Machine&rsquo;.</p>
<p>Fill in the form and hit &lsquo;Save machine&rsquo;. In this example, you are adding an IPMI machine:</p>
<p><a href="images/faebe2fb37cd73252eaf9521ed1bcf31fb0e76f6.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/faebe2fb37cd73252eaf9521ed1bcf31fb0e76f6.jpeg"></a></p>
<p>The fields on the &ldquo;Add machine&rdquo; screen include the following items:</p>
<ul>
<li>
<p><strong>Machine name</strong>: This field is used to identify the machine to the user.  It can be set to anything, though it is often set to the MAC address of the machine in question.  This field is optional, in that MAAS will assign a unique, nonsense name if you leave it blank.  You can change this nonsense name later, if desired.</p>
</li>
<li>
<p><strong>Domain</strong>: This field sets the domain name of the domain managed by MAAS.  It can be set to anything; MAAS assigns the domain name &ldquo;maas&rdquo; by default.</p>
</li>
<li>
<p><strong>Architecture</strong>: This field refers to the architecture of the machine being added.</p>
</li>
<li>
<p><strong>Minimum Kernel</strong>: This field supplies a drop-down of possible kernels available for deployment on this machine.</p>
</li>
<li>
<p><strong>Zone</strong>: This field allows you to set the availability zone, selected from AZs that you have already created (if any).</p>
</li>
<li>
<p><strong>Resource pool</strong>: This field allows you to set the resource pool for this machine, selected from pools you have already created (if any).</p>
</li>
<li>
<p><strong>MAC Address</strong>: You should fill in this field with the MAC address of the machine you are adding.  Note that the MAC address entered here must use a colon (&ldquo;:&rdquo;) separator, although some MAC addresses are written with dash (&ldquo;-&ldquo;) separators.</p>
</li>
<li>
<p><strong>Power type</strong>: You must select the power type supported by the machine you are adding, and fill in additional required fields that appear.  See <a href="power-management-reference-5246.html">Power management</a> for details on the available power types and the relevant parameters for each type.</p>
</li>
</ul>
<p><a href="#heading--how-to-add-machines-via-a-chassis"><h3 id="heading--how-to-add-machines-via-a-chassis">How to add machines via a chassis</h3></a></p>
<p>You can use the chassis feature to add multiple machines at once. To do this, instead of selecting &lsquo;Machine&rsquo; as above, choose &lsquo;Chassis&rsquo; from the drop-down menu. In the following example, MAAS will add all available VMs from the given  virsh address:</p>
<p><a href="images/e7f88bce68318cf3c6a8e97b4d31d0b6980e0f32.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/e7f88bce68318cf3c6a8e97b4d31d0b6980e0f32.jpeg"></a></p>
<p>The required fields will change based on the type of chassis you choose.</p>
<p>[note]
As with the manual method, the underlying machines will require netbooting.
[/note]</p>
<p><a href="#heading--how-to-clone-machines"><h2 id="heading--how-to-clone-machines">How to clone machines</h2></a></p>
<p>Assume you have two machines available, like this:</p>
<p><img alt="Screenshot from 2021-09-24 16-20-05|690x230" src="upload://fTtQPaQdvz1umqj3tP8aRn3Wftz.png"></p>
<p>Select the machine <em>to which you want to clone configuration</em>, and select &ldquo;Clone from&hellip;&rdquo;</p>
<p><img alt="Screenshot from 2021-09-24 16-25-01|690x388" src="upload://pOeMMJjEjhlZwjbFSMpz4YJMO4b.png"></p>
<p>Under &ldquo;1. Select the source machine&rdquo; &ndash; choose a machine from the attached list:</p>
<p><img alt="Screenshot from 2021-09-24 16-26-42|497x310" src="upload://5M8dZhaGrSCywiV4YLR7mS0Jlfl.png"></p>
<p>Under &ldquo;2. Select what to clone&rdquo;, choose &ldquo;Network&rdquo;, &ldquo;Storage&rdquo;, or both (here, we&rsquo;ve chosen &ldquo;Storage&rdquo;):</p>
<p><img alt="Screenshot from 2021-09-24 16-29-15|690x250" src="upload://e0qU4wMorc3CGpdVyJ5jYMRPRov.png"></p>
<p>Click &ldquo;Clone to machine&rdquo;. MAAS will report the status of the attempt.</p>
<p><a href="#heading--how-to-examine-machines-and-machine-details"><h2 id="heading--how-to-examine-machines-and-machine-details">How to examine machines and machine details</h2></a></p>
<p>This section describes the various ways you can evaluate the health and status of your MAAS machines, using the machine list.  It will show you:</p>
<ul>
<li><a href="#heading--how-to-view-the-machine-list">How to view the machine list</a></li>
<li><a href="#heading--how-to-view-machine-details">How to view machine details</a></li>
<li><a href="#heading--machine-interfaces">How to find network info for a machine</a></li>
<li><a href="#heading--how-to-find-machine-storage-info">How to find storage info for a machine</a></li>
<li><a href="#heading--commissioning-log">How to find commissioning logs</a></li>
<li><a href="#heading--hardware-tests">How to find machine hardware &amp; test logs</a></li>
<li><a href="#heading--raw-log-output">How to find raw log output for a machine</a></li>
<li><a href="#heading--event-logs">How to find a machine&rsquo;s event logs</a></li>
<li><a href="#heading--machine-config">How to find machine configuration info</a></li>
</ul>
<p><a href="#heading--how-to-view-the-machine-list"><h3 id="heading--how-to-view-the-machine-list">How to view the machine list</h3></a></p>
<p>To view the machine list, select &ldquo;Machines&rdquo; on the top menu of the MAAS web UI:</p>
<p><a href="images/19e038dbc6e669bfffc0ea5a9946432a75142bfb.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/19e038dbc6e669bfffc0ea5a9946432a75142bfb.jpeg"></a> </p>
<p>To quickly view more details, roll the cursor over status icons:</p>
<p><a href="images/8f78a8877a029e7a44bcd4cf3d138499637fe790.jpeg" target = "_blank"><img alt="unlabeled image" width="690" src="images/8f78a8877a029e7a44bcd4cf3d138499637fe790.jpeg"></a> </p>
<p><a href="#heading--how-to-view-machine-details"><h3 id="heading--how-to-view-machine-details">How to view machine details</h3></a></p>
<p>To open a detailed view of a machine&rsquo;s status and configuration, click a machine&rsquo;s FQDN or MAC address:</p>
<p><a href="images/a8ff4caf6362a3d695682499a74d64cb189dfc37.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/a8ff4caf6362a3d695682499a74d64cb189dfc37.png"></a></p>
<p><a href="#heading--machine-interfaces"><h3 id="heading--machine-interfaces">How to find network info for a machine</h3></a></p>
<p>To find network info for a specific machine, open that machine&rsquo;s &ldquo;Network&rdquo; tab in the machine summary:</p>
<p><a href="images/c5316db130ae05a9cdabcd49ffaa69f0bb405d1d.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/c5316db130ae05a9cdabcd49ffaa69f0bb405d1d.png"></a> </p>
<p>Options on this tab are described in the introduction to <a href="about-networking-5086.html">Networking</a> article in this documentation set.</p>
<p><a href="#heading--how-to-find-machine-storage-info"><h3 id="heading--how-to-find-machine-storage-info">How to find machine storage info</h3></a></p>
<p>To view/edit machine storage info, click on the &ldquo;Storage&rdquo; tab in the machine summary:</p>
<p><a href="images/658f4814716a1347fda62ab799ba0d72506c128e.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/658f4814716a1347fda62ab799ba0d72506c128e.png"></a> </p>
<p>See the section about <a href="about-machines-5082.html#heading--about-storage">storage</a> for more information.</p>
<p><a href="#heading--commissioning-log"><h3 id="heading--commissioning-log">How to find commissioning logs</h3></a></p>
<p>The &ldquo;Commissioning&rdquo; tab brings up a summary log of commissioning events:</p>
<p><a href="images/e98766009f32972dfe29293f9bc850b99a9a941f.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/e98766009f32972dfe29293f9bc850b99a9a941f.png"></a> </p>
<p>Click on the dropdown at the end of the row you&rsquo;re interested in, and click on &ldquo;View details&rdquo;:</p>
<p><a href="images/8f7b4c02ce301fb867e7af33267be62498095bb5.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/8f7b4c02ce301fb867e7af33267be62498095bb5.png"></a></p>
<p>This will bring up a detailed log view for that row:</p>
<p><a href="images/41a385cdf948dada8bb8d8f94a3137a2b64d46e0.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/41a385cdf948dada8bb8d8f94a3137a2b64d46e0.png"></a></p>
<p>These logs present an extremely detailed, timestamped record of completion and status items from the commissioning process. See the article on <a href="maas-logging-reference-5242.html">Logging</a> for more details on how to read and interpret these logs.  </p>
<p><a href="#heading--hardware-tests"><h3 id="heading--hardware-tests">How to find machine hardware &amp; test logs</h3></a></p>
<p>This tab presents a summary of tests run against this particular machine.  You can view the summary report, or choose the &ldquo;View details&rdquo; dropdown to get details on any particular tests:</p>
<p><a href="images/e53a2c01b57df49e56bb4d95552b6a038249aa97.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/e53a2c01b57df49e56bb4d95552b6a038249aa97.png"></a> </p>
<p>The format of these screens is very similar to the Configuration logs shown above.   </p>
<p><a href="#heading--raw-log-output"><h3 id="heading--raw-log-output">How to find raw log output for a machine</h3></a></p>
<p>By choosing &ldquo;Installation output&rdquo; on the &ldquo;Logs&rdquo; tab, you can see the &ldquo;raw&rdquo; log output:</p>
<p><a href="images/dc5bb5e6489a382e257dac605f2dbdc6fa1ca630.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/dc5bb5e6489a382e257dac605f2dbdc6fa1ca630.png"></a> </p>
<p>Help interpreting these logs can be found under the <a href="maas-logging-reference-5242.html">Logging</a> section of this documentation.</p>
<p><a href="#heading--event-logs"><h3 id="heading--event-logs">How to find a machine&rsquo;s event logs</h3></a></p>
<p>To view the Event log for a machine, choose the &ldquo;Event&rdquo; tab under &ldquo;Logs.&rdquo;  This displays a list of timestamped status updates for events and actions performed on the machine:</p>
<p><a href="images/981a1aced2a4c231fa9e4fe1b70e77aeb816f133.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/981a1aced2a4c231fa9e4fe1b70e77aeb816f133.png"></a> </p>
<p>There is a dropdown on the upper right which allows you to choose how many events per page you wish to view. Detailed discussion of this event log can be found under the <a href="maas-logging-reference-5242.html">Logging</a> section of this documentation.</p>
<p><a href="#heading--machine-config"><h3 id="heading--machine-config">How to find machine configuration info</h3></a></p>
<p>The final tab from the Machine menu allows you to update machine and power configuration options: </p>
<p><a href="images/7cfd77228a5cf1a6f779897d501f14fbf78fd4b4.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/7cfd77228a5cf1a6f779897d501f14fbf78fd4b4.png"></a> </p>
<p>There are two sections to this tab.  The &ldquo;Machine configuration&rdquo; section, shown above, offers some general parameters, mostly related to how this machine is grouped and categorised.  More information on these options are found in the relevant sections of the documentation (e.g., tags, resource pools, and so forth). </p>
<p>The &ldquo;Power configuration&rdquo; supplies the parameters necessary for MAAS to access the machine to PXE-boot it: </p>
<p><a href="images/198898362285e4a1308535a4aa701156a67c9616.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/198898362285e4a1308535a4aa701156a67c9616.png"></a> </p>
<p>More information on Power configuration will be found in the <a href="power-management-reference-5246.html">Power management</a> section of this documentation.</p>
<p><a href="#heading--how-to-use-resource-pools"><h2 id="heading--how-to-use-resource-pools">How to use resource pools</h2></a></p>
<p>This section will explain:</p>
<ul>
<li><a href="#heading--add-a-resource-pool">How to add a resource pool</a></li>
<li><a href="#heading--deleting-a-resource-pool">How to delete a resource pool</a></li>
<li><a href="#heading--add-a-node-to-a-resource-pool">How to add a node to a resource pool</a></li>
<li><a href="#heading--removing-a-node-from-a-resource-pool">How to remove a node from a resource pool</a></li>
<li><a href="#heading--add-a-vm-host-to-a-resource-pool">How to add a VM host to a resource pool</a></li>
<li><a href="#heading--removing-a-vm-host-from-a-resource-pool">How to remove a VM host from a resource pool</a></li>
</ul>
<p>Administrators can manage resource pools on the Machines page in the web UI, under the Resource pools tab.   Also note that all MAAS installations have a resource pool named &ldquo;default.&rdquo; MAAS automatically adds new machines to the default resource pool.</p>
<p><a href="#heading--add-a-resource-pool"><h3 id="heading--add-a-resource-pool">How to add a resource pool</h3></a></p>
<p>Use the Add pool button to add a new resource pool.</p>
<p>After giving your new pool a name and description, click the Add pool button:</p>
<p><a href="images/2f010325-nodes-resource-pools__2.5_add-pool.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/2f010325-nodes-resource-pools__2.5_add-pool.png"></a></p>
<p><a href="#heading--deleting-a-resource-pool"><h3 id="heading--deleting-a-resource-pool">How to delete a resource pool</h3></a></p>
<p>To delete a resource pool, click the trashcan icon next to the pool.</p>
<p><a href="images/630ed938-nodes-resource-pools__2.5_delete-pool.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/630ed938-nodes-resource-pools__2.5_delete-pool.png"></a></p>
<p>[note]
If you delete a resource pool, all machines that belong to that resource pool will return to the default pool.
[/note]</p>
<p><a href="#heading--add-a-node-to-a-resource-pool"><h3 id="heading--add-a-node-to-a-resource-pool">How to add a machine to a resource pool</h3></a></p>
<p>To add a machine to a resource pool, on the Machines page, select the machine you want to add to the resource pool. Next, select the Configuration tab. Now select the resource pool and click the Save changes button.</p>
<p><a href="images/648e7a8e-nodes-resource-pools__2.5_add-machine.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/648e7a8e-nodes-resource-pools__2.5_add-machine.png"></a></p>
<p><a href="#heading--removing-a-node-from-a-resource-pool"><h3 id="heading--removing-a-node-from-a-resource-pool">How to remove a machine from a resource pool</h3></a></p>
<p>To remove a machine from a resource pool, follow the same procedure you would use to add a machine, but select &ldquo;default&rdquo; as the new resource pool. This action will return the machine to the default resource pool.</p>
<p><a href="#heading--add-a-vm-host-to-a-resource-pool"><h3 id="heading--add-a-vm-host-to-a-resource-pool">How to add a VM host to a resource pool</h3></a></p>
<p>You can add a VM host to a resource pool when you create a new VM host, or you can edit a VM host&rsquo;s configuration:</p>
<p><a href="images/84a89952-nodes-resource-pools__2.5_pod_to_pool.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/84a89952-nodes-resource-pools__2.5_pod_to_pool.png"></a></p>
<p><a href="#heading--removing-a-vm-host-from-a-resource-pool"><h3 id="heading--removing-a-vm-host-from-a-resource-pool">How to remove a VM host from a resource pool</h3></a></p>
<p>To remove a VM host from a resource pool, follow the same procedure you would use to add a VM host to a resource pool, except select &ldquo;default&rdquo; as the new resource pool. This action will return the machine to the default resource pool.</p>
<p><a href="#heading--how-to-use-machine-storage"><h2 id="heading--how-to-use-machine-storage">How to use machine storage</h2></a></p>
<p>This section will explain:</p>
<ul>
<li><a href="#heading--how-to-set-global-storage-layouts">How to set global storage layouts</a></li>
<li><a href="#heading--how-to-set-per-machine-storage-layouts">How to set per-machine storage layouts</a></li>
<li><a href="#heading--how-to-specify-conditional-erasure-types">How to specify conditional erasure types</a></li>
</ul>
<p><a href="#heading--how-to-set-global-storage-layouts"><h3 id="heading--how-to-set-global-storage-layouts">How to set global storage layouts</h3></a></p>
<p>Layouts can be set globally and on a per-machine basis.</p>
<p>All machines will have a default layout applied when commissioned. An administrator can configure the default layout on the &lsquo;Settings&rsquo; page, under the &lsquo;Storage&rsquo; tab.</p>
<p><a href="images/80de3bc701552cd00bec707830accf380c214b17.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/80de3bc701552cd00bec707830accf380c214b17.png"></a></p>
<p>[note type=&rdquo;caution&rdquo; status=&rdquo;Important&rdquo;]
The new default will only apply to newly-commissioned machines.
[/note]</p>
<p><a href="#heading--how-to-set-per-machine-storage-layouts"><h3 id="heading--how-to-set-per-machine-storage-layouts">How to set per-machine storage layouts</h3></a></p>
<p>An administrator can change the layout for a single machine as well as customise that layout providing this is done while the machine has a status of &lsquo;Ready&rsquo;. This is only possible via the CLI: to see how, click the &ldquo;CLI&rdquo; option for your version and delivery method above.</p>
<p>[note]
Only an administrator can modify storage at the block device level (providing the machine has a status of &lsquo;Ready&rsquo;).
[/note]</p>
<p><a href="#heading--how-to-set-default-erasure-configuration"><h3 id="heading--how-to-set-default-erasure-configuration">How to set the default erasure configuration</h3></a></p>
<p>A default erasure configuration can be set on the &lsquo;Settings&rsquo; page by selecting the &lsquo;Storage&rsquo; tab.</p>
<p><a href="images/4e90c4c7-installconfig-storage-erasure__defaults.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/4e90c4c7-installconfig-storage-erasure__defaults.png"></a></p>
<p>If option &lsquo;Erase machines&rsquo; disks prior to releasing&rsquo; is chosen then users will be compelled to use disk erasure. That option will be pre-filled in the machine&rsquo;s view and the user will be unable to remove the option.</p>
<p>With the above defaults, the machine&rsquo;s view will look like this when the Release action is chosen:</p>
<p><a href="images/66e1dcc2-installconfig-storage-erasure__defaults-node.png" target = "_blank"><img alt="unlabeled image" width="690" src="images/66e1dcc2-installconfig-storage-erasure__defaults-node.png"></a></p>
<p>Where &lsquo;secure erase&rsquo; and &lsquo;quick erase&rsquo; can then be configured by the user.</p>
<p><a href="#heading--storage-layouts-reference"><h2 id="heading--storage-layouts-reference">Storage layouts reference</h2></a></p>
<p>There are three layout types:</p>
<ol>
<li>Flat layout</li>
<li>LVM layout</li>
<li>bcache layout</li>
</ol>
<p>The layout descriptions below will include the EFI partition. If your system is not using UEFI, regard <code>sda2</code> as <code>sda1</code> (with an additional 512 MB available to it).</p>
<p><a href="#heading--flat-storage-layout-reference"><h3 id="heading--flat-storage-layout-reference">Flat layout storage reference</h3></a></p>
<p>With the Flat layout, a partition spans the entire boot disk. The partition is formatted with the ext4 filesystem and uses the <code>/</code> mount point:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
</tbody>
</table>
<p>The following three options are supported:</p>
<ol>
<li>
<p><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</p>
</li>
<li>
<p><code>root_device</code>: The block device on which to place the root partition. The default is the boot disk.</p>
</li>
<li>
<p><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</p>
</li>
</ol>
<p><a href="#heading--lvm-storage-layout-reference"><h3 id="heading--lvm-storage-layout-reference">LVM storage layout reference</h3></a></p>
<p>The LVM layout creates the volume group <code>vgroot</code> on a partition that spans the entire boot disk. A logical volume <code>lvroot</code> is created for the full size of the volume group; is formatted with the ext4 filesystem; and uses the <code>/</code> mount point:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">lvm-pv(vgroot)</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">lvroot</td>
<td align="right">rest of sda</td>
<td align="center">lvm</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
<tr>
<td align="center">vgroot</td>
<td align="right">rest of sda</td>
<td align="center">lvm</td>
<td align="center"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>The following six options are supported:</p>
<ol>
<li><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</li>
<li><code>root_device</code>: The block device on which to place the root partition. The default is the boot disk.</li>
<li><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</li>
<li><code>vg_name</code>: Name of the created volume group. Default is <code>vgroot</code>.</li>
<li><code>lv_name</code>: Name of the created logical volume. Default is <code>lvroot</code>.</li>
<li><code>lv_size</code>: Size of the created logical volume. Default is 100%, meaning the entire size of the volume group.</li>
</ol>
<p><a href="#heading--bcache-storage-layout-reference"><h3 id="heading--bcache-storage-layout-reference">bcache storage layout reference</h3></a></p>
<p>A bcache layout will create a partition that spans the entire boot disk as the backing device. It uses the smallest block device tagged with &lsquo;ssd&rsquo; as the cache device. The bcache device is formatted with the ext4 filesystem and uses the <code>/</code> mount point. If there are no &lsquo;ssd&rsquo; tagged block devices on the machine, then the bcache device will not be created, and the Flat layout will be used instead:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="center">Filesystem</th>
<th align="left">Mount point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sda1</td>
<td align="right">512 MB</td>
<td align="center">part</td>
<td align="center">FAT32</td>
<td align="left">/boot/efi</td>
</tr>
<tr>
<td align="center">sda2</td>
<td align="right">rest of sda</td>
<td align="center">part</td>
<td align="center">bc-backing</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sdb (ssd)</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">sdb1</td>
<td align="right">100% of sdb</td>
<td align="center">part</td>
<td align="center">bc-cache</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">bcache0</td>
<td align="right">per sda2</td>
<td align="center">disk</td>
<td align="center">ext4</td>
<td align="left">/</td>
</tr>
</tbody>
</table>
<p>The following seven options are supported:</p>
<ol>
<li><code>boot_size</code>: Size of the boot partition on the boot disk. Default is 0, meaning not to create the boot partition. The &lsquo;/boot&rsquo; will be placed on the root filesystem.</li>
<li><code>root_device</code>: The block device upon which to place the root partition. The default is the boot disk.</li>
<li><code>root_size</code>: Size of the root partition. Default is 100%, meaning the entire size of the root device.</li>
<li><code>cache_device</code>: The block device to use as the cache device. Default is the smallest block device tagged ssd.</li>
<li><code>cache_mode</code>: The cache mode to which MAAS should set the created bcache device. The default is <code>writethrough</code>.</li>
<li><code>cache_size</code>: The size of the partition on the cache device. Default is 100%, meaning the entire size of the cache device.</li>
<li><code>cache_no_part</code>: Whether or not to create a partition on the cache device. Default is false, meaning to create a partition using the given <code>cache_size</code>. If set to true, no partition will be created, and the raw cache device will be used as the cache.</li>
</ol>
<p>vmfs6 storage layout reference
<a href="#heading--vmfs6-storage-layout-reference"><h3 id="heading--vmfs6-storage-layout-reference">VMFS6 storage layout reference</h3></a></p>
<p>The VMFS6 layout is used for VMware ESXi deployments only. It is required when configuring VMware VMFS Datastores. This layout creates all operating system partitions, in addition to the default datastore. The datastore may be modified.  New datastores may be created or extended to include other storage devices. The base operating system partitions may not be modified because VMware ESXi requires them. Once applied another storage layout must be applied to remove the operating system partitions.</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="right">Size</th>
<th align="center">Type</th>
<th align="left">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">sda</td>
<td align="right">-</td>
<td align="center">disk</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">sda1</td>
<td align="right">3 MB</td>
<td align="center">part</td>
<td align="left">EFI</td>
</tr>
<tr>
<td align="left">sda2</td>
<td align="right">4 GB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda3</td>
<td align="right">Remaining</td>
<td align="center">part</td>
<td align="left">VMFS Datastore 1</td>
</tr>
<tr>
<td align="left">sda4</td>
<td align="right">-</td>
<td align="center">skipped</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">sda5</td>
<td align="right">249 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda6</td>
<td align="right">249 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda7</td>
<td align="right">109 MB</td>
<td align="center">part</td>
<td align="left">VMware Diagnostic</td>
</tr>
<tr>
<td align="left">sda8</td>
<td align="right">285 MB</td>
<td align="center">part</td>
<td align="left">Basic Data</td>
</tr>
<tr>
<td align="left">sda9</td>
<td align="right">2.5 GB</td>
<td align="center">part</td>
<td align="left">VMware Diagnostic</td>
</tr>
</tbody>
</table>
<p>The following options are supported:</p>
<ol>
<li>
<p><code>root_device</code>: The block device upon which to place the root partition. Default is the boot disk.</p>
</li>
<li>
<p><code>root_size</code>: Size of the default VMFS Datastore. Default is 100%, meaning the remaining size of the root disk.</p>
</li>
</ol>
<p><a href="#heading--blank-storage-layout-reference"><h3 id="heading--blank-storage-layout-reference">Blank storage layout reference</h3></a></p>
<p>The blank layout removes all storage configuration from all storage devices. It is useful when needing to apply a custom storage configuration.</p>
<p>[note type=&rdquo;negative&rdquo; status=&rdquo;Warning&rdquo;]
Machines with the blank layout applied are not deployable; you must first configure storage manually.
[/note]</p>
    </div>
  </body>
</html>