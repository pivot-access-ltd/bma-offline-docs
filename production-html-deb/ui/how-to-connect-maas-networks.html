<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs
      </strong>
      <a href="https://maas.io/docs">(switch to live docs)
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  UI-only
      </span>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/how-to-connect-maas-networks.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="maas-installation-requirements.html">
	    Installation requirements
	  </a>
	</li>
	<li>
	  <a href="maas-glossary.html">
	    Glossary
	  </a>
	</li>
      </ul>
      <strong>
	<a href="basic-tutorials.html">
	  Basic tutorials
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-bootstrap-tutorial.html">
	    MAAS bootstrap tutorial
	  </a>
	</li>
	<li>
	  <a href="try-out-the-maas-cli.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="custom-image-tutorial.html">
	    Custom image tutorial
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-get-started-with-maas.html">
	  How to get started with MAAS
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-spin-up-maas-with-ansible.html">
	    Spin up MAAS with Ansible
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-change-maas-settings.html">
	    Change MAAS settings
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Ask for help
	  </a>
	</li>
	<li>
	  <a href="how-to-request-a-feature.html">
	    Request a feature
	  </a>
	</li>
	<li>
	  <a href="how-to-report-a-bug.html">
	    Report a bug
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-set-up-networks.html">
	  How to set up networks
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-connect-maas-networks.html">
	    Connect MAAS networks
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-dhcp.html">
	    Enable DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-acquire-images.html">
	  How to acquire images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-use-standard-images.html">
	    Use standard images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-build-custom-images.html">
	    Build custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-employ-vmware-images.html">
	    Employ VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-tune-controllers.html">
	  How to tune controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-adjust-your-controllers.html">
	    Adjust your controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-physical-machines.html">
	  How to deploy physical machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-make-machines-available.html">
	    Make machines available
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-put-machines-to-work.html">
	    Put machines to work
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-virtual-machines.html">
	  How to deploy virtual machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-set-up-lxd.html">
	    Set up LXD
	  </a>
	</li>
	<li>
	  <a href="how-to-create-vm-hosts.html">
	    Create VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-create-and-manage-vms.html">
	    Create and manage VMs
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-label-and-find-machines.html">
	  How to label and find machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-tag-machines.html">
	    Tag machines
	  </a>
	</li>
	<li>
	  <a href="how-to-annotate-machines.html">
	    Annotate machines
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
	<li>
	  <a href="how-to-find-machines.html">
	    Find machines
	  </a>
	</li>
      </ul>
      <strong>
	How to diagnose issues
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-log-files.html">
	    Work with log files
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-audit-event-logs.html">
	    Work with audit event logs
	  </a>
	</li>
      </ul>
      <strong>
	How to work securely
      </strong>
      <ul>
	<li>
	  <a href="how-to-improve-maas-security.html">
	    Improve MAAS security
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-maas-native-tls.html">
	    Enable MAAS native TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-an-air-gapped-maas.html">
	    Set up an air-gapped MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage user accounts
	  </a>
	</li>
      </ul>
      <strong>
	How to operate reliably
      </strong>
      <ul>
	<li>
	  <a href="how-to-keep-maas-backed-up.html">
	    Keep MAAS backed up
	  </a>
	</li>
	<li>
	  <a href="how-to-observe-a-live-maas.html">
	    Observe a live MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="explanation.html">
	Explanations
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-vm-hosting.html">
	    VM hosting
	  </a>
	</li>
	<li>
	  <a href="understanding-maas-events.html">
	    MAAS events
	  </a>
	</li>
	<li>
	  <a href="undersdtanding-maas-audit-events.html">
	    MAAS audit events
	  </a>
	</li>
	<li>
	  <a href="about-rbac.html">
	    RBAC
	  </a>
	</li>
      </ul>
      <strong>
	API reference
      </strong>
      <ul>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
      </ul>
      <strong>
	<a href=".html">
	  Technical reference
	</a>
      </strong>
      <ul>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="maas-performance.html">
	    MAAS performance
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="storage-layouts-reference.html">
	    Storage layouts
	  </a>
	</li>
	<li>
	  <a href="maas-terraform-provider-reference.html">
	    Terraform provider
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>How to connect MAAS networks</h1><!-- "How to connect MAAS networks" -->
<p>You can easily manage the basic networking elements of MAAS, including subnets, fabrics, VLANs, spaces, IP ranges, machine interfaces, and proxies.  This section shows how to access and edit these elements. </p>
<p>This article will help you learn:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--how-to-manage-MAAS-network-elements">How to manage MAAS network elements</a></li>
<li><a href="#heading--how-to-manage-machine-interfaces">How to manage machine interfaces</a></li>
<li><a href="#heading--how-to-manage-proxies">How to manage proxies</a></li>
<li><a href="#heading--how-to-set-up-ntp">How to set up Network Time Protocol (NTP)</a></li>
</ul>
<p><a href="#heading--how-to-manage-MAAS-network-elements"><h2 id="heading--how-to-manage-MAAS-network-elements">How to manage MAAS network elements</h2></a></p>
<p>This section will show you:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--how-to-enable-network-discovery">How to enable network discovery</a></li>
<li><a href="#heading--how-to-toggle-subnet-management">How to toggle subnet management</a></li>
<li><a href="#heading--how-to-access-ui-main-networking-view">How to access the main networking view</a></li>
<li><a href="#heading--ui-how-to-display-the-subnet-window">How to display the subnet window</a></li>
<li><a href="#heading--ui-how-to-view-the-subnet-summary">How to view the subnet summary</a></li>
<li><a href="#heading--ui-how-to-view-utilisation">How to view utilisation</a></li>
<li><a href="#heading--how-to-manage-static-routes">How to manage static routes between subnets</a></li>
<li><a href="#heading--how-to-view-reserved-ranges">How to view reserved ranges</a></li>
<li><a href="#heading--ui-how-to-view-used-ip-addresses">How to view used IP addresses</a></li>
<li><a href="#heading--how-to-set-up-a-bridge-with-maas">How to set up a bridge with MAAS</a></li>
<li><a href="#heading--how-to-set-up-a-bridge-with-netplan">How to set up a bridge with netplan</a></li>
</ul>
<p><a href="#heading--how-to-enable-network-discovery"><h3 id="heading--how-to-enable-network-discovery">How to enable network discovery</h3></a></p>
<p>Network discovery can be disabled or re-enabled using the switch on the Network discovery dashboard.</p>
<p><a href="https://assets.ubuntu.com/v1/1782e4aa-installconfig-networking__2.4_discovery.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/1782e4aa-installconfig-networking__2.4_discovery.png"></a></p>
<p><a href="#heading--how-to-toggle-subnet-management"><h3 id="heading--how-to-toggle-subnet-management">How to toggle subnet management</h3></a></p>
<p>To disable (or re-enable) subnet management, use the following procedure:</p>
<ol>
<li>
<p>Navigate to the &lsquo;Subnets&rsquo; page and select the subnet.</p>
</li>
<li>
<p>Press the &lsquo;Edit&rsquo; button to allow changes; the &lsquo;Managed allocation&rsquo; field will become a slide switch.</p>
</li>
<li>
<p>Click the label (or the switch icon itself) to toggle between enabled (dark blue) and disabled (grey).</p>
</li>
<li>
<p>Click &lsquo;Save summary&rsquo;.</p>
</li>
</ol>
<p>The following screenshot illustrates this process.</p>
<p><a href="https://assets.ubuntu.com/v1/e5d80c8c-installconfig-network-subnet-management__2.6-management-toggle.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/e5d80c8c-installconfig-network-subnet-management__2.6-management-toggle.png"></a></p>
<p><a href="#heading--how-to-access-ui-main-networking-view"><h3 id="heading--how-to-access-ui-main-networking-view">How to access the main networking view</h3></a></p>
<p>To access the main networking view visit the &lsquo;Subnets&rsquo; page:</p>
<p><a href="https://assets.ubuntu.com/v1/657bb332-installconfig-networking__2.4_subnets.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/657bb332-installconfig-networking__2.4_subnets.png"></a></p>
<p>This main view can also be filtered either by fabrics or by spaces through the use of the &lsquo;Group by&rsquo; drop-down.</p>
<p><a href="#heading--ui-how-to-display-the-subnet-window"><h3 id="heading--ui-how-to-display-the-subnet-window">How to display the subnet window</h3></a></p>
<p>Clicking a subnet (here <code>192.168.100.0/24</code>) will display its detail screen, which contains several sections, described below.</p>
<p><a href="#heading--ui-how-to-view-the-subnet-summary"><h3 id="heading--ui-how-to-view-the-subnet-summary">How to view the subnet summary</h3></a></p>
<p>The <strong>Subnet summary</strong> section is the largest and most complex of the subnet configuration screens:</p>
<p><a href="https://assets.ubuntu.com/v1/17617b35-installconfig-networking__2.4_subnets-summary.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/17617b35-installconfig-networking__2.4_subnets-summary.png"></a></p>
<p>This screen presents the following configurable options:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>
<p><strong>Name</strong>: Subnet names can be any valid text string. By default, they are named with the CIDR of the subnet itself.</p>
</li>
<li>
<p><strong>CIDR</strong>: This is the address parameter for the subnet.  In keeping with standard CIDR notation, the number of bits of the prefix are indicated after the slash.</p>
</li>
<li>
<p><strong>Gateway IP</strong>: This is the address of the default gateway for your subnet, which is the IP address that transfers packets to other subnets or networks. Typically, this is simply the first IP address in a block of addresses (the <code>.1</code> address).</p>
</li>
<li>
<p><strong>DNS</strong>: This is the address of a DNS (domain name server, or simply &ldquo;name server&rdquo;) for your subnet.  It&rsquo;s optional, but can be configured if desired.</p>
</li>
<li>
<p><strong>Description</strong>: This field represents free form text that you can enter to describe your subnet, as needed to keep important notes attached to the definition of the subnet.</p>
</li>
<li>
<p><strong>Managed allocation</strong> refers to the ability of MAAS to completely <a href="#heading--about-managed-subnets">manage a subnet</a>.</p>
</li>
<li>
<p><strong>Active mapping</strong> instructs MAAS to scan the subnet every 3 hours to discover hosts that have not been discovered passively.</p>
</li>
<li>
<p><strong>Proxy access</strong> instructs MAAS to allow clients from this subnet to access the MAAS proxy.</p>
</li>
<li>
<p><strong>Allow DNS resolution</strong> allows subnet clients to use MAAS for DNS resolution.</p>
</li>
<li>
<p><strong>Fabric</strong>: This field allows you to set the subnets fabric.</p>
</li>
<li>
<p><strong>VLAN</strong>: This field allows you to set the subnets VLAN.</p>
</li>
<li>
<p><strong>Space</strong> is presented for clarity, though spaces are managed at the VLAN level.</p>
</li>
</ul>
<p><a href="#heading--ui-how-to-view-utilisation"><h3 id="heading--ui-how-to-view-utilisation">How to view utilisation</h3></a></p>
<p>This section of the subnet page presents metrics regarding address usage by this subnet.</p>
<p><a href="https://assets.ubuntu.com/v1/3d3e4b61-installconfig-networking__2.4_subnets-utilisation.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/3d3e4b61-installconfig-networking__2.4_subnets-utilisation.png"></a></p>
<p>&lsquo;Subnet addresses&rsquo; shows the total number of addresses associated with the subnet, here 254. &lsquo;Availability&rsquo; shows how many of those addresses are unused, and therefore &ldquo;available&rdquo;, here 189, which corresponds to a percentage of roughly 74% of the total. Finally, &lsquo;Used&rsquo; shows the percentage that is used, here roughly 26%.</p>
<p><a href="#heading--how-to-manage-static-routes"><h3 id="heading--how-to-manage-static-routes">How to manage static routes between subnets</h3></a></p>
<p>To create a static route:</p>
<ol>
<li>
<p>Click the &lsquo;Add static route&rsquo; button to reveal the edit pane. </p>
</li>
<li>
<p>Enter a Gateway IP address.</p>
</li>
<li>
<p>Select a destination subnet from the &lsquo;Destination&rsquo; drop-down list.</p>
</li>
<li>
<p>Edit the routing metric value if needed. </p>
</li>
<li>
<p>Click &lsquo;Add&rsquo; to activate the route. </p>
</li>
</ol>
<p>Routes can be edited and removed using the icons to the right of each entry.</p>
<p><a href="https://assets.ubuntu.com/v1/49f5e240-installconfig-networking__2.4_subnets-routes.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/49f5e240-installconfig-networking__2.4_subnets-routes.png"></a></p>
<p><a href="#heading--how-to-view-reserved-ranges"><h3 id="heading--how-to-view-reserved-ranges">How to view reserved ranges</h3></a></p>
<p>The reserved ranges section of the subnet screen looks like this:</p>
<p><a href="https://assets.ubuntu.com/v1/5f9f50f9-installconfig-networking__2.4_subnets-reserved.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/5f9f50f9-installconfig-networking__2.4_subnets-reserved.png"></a></p>
<p>More details and instructions regarding these ranges can be found in <a href="how-to-manage-ip-addresses.html#heading--how-to-manage-ip-ranges">IP ranges</a>.</p>
<p><a href="#heading--ui-how-to-view-used-ip-addresses"><h3 id="heading--ui-how-to-view-used-ip-addresses">How to view used IP addresses</h3></a></p>
<p>This section displays hosts (including controllers) associated with the used addresses along with related bits of host information.</p>
<p><a href="https://assets.ubuntu.com/v1/b9e69b0b-installconfig-networking__2.4_subnets-used.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/b9e69b0b-installconfig-networking__2.4_subnets-used.png"></a></p>
<p><a href="#heading--how-to-set-up-a-bridge-with-maas"><h3 id="heading--how-to-set-up-a-bridge-with-maas">How to set up a bridge with MAAS</h3></a></p>
<p>At various times in your MAAS network, you may need to set up a bridge to connect between your machines and MAAS, as shown in this section.</p>
<p><strong>NOTE:</strong> 
It&rsquo;s essential to enforce usage of IP addresses to avoid domain name conflicts, should different controllers resolve the same domain name with different IP addresses. You should also avoid using 127.0.0.1 when running multiple controllers, as it would confuse MAAS.</p>
<p>To configure a bridge with the MAAS UI: </p>
<ol>
<li>
<p>Select the machine you want to bridge. </p>
</li>
<li>
<p>Switch to the &ldquo;Network&rdquo; tab. </p>
</li>
<li>
<p>Select the network where you want to create the bridge and click &ldquo;Create bridge:&rdquo;</p>
</li>
</ol>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/29624d737106c5bad777aee9d2c8cad9c3de7151.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/29624d737106c5bad777aee9d2c8cad9c3de7151.jpeg"></a> </p>
<ol>
<li>Configure the bridge on a subnet MAAS controls (you may use any IP mode for the bridge):</li>
</ol>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/dd8567ff1cd76606c5ce1751e606fcfab2bc7ce2.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/dd8567ff1cd76606c5ce1751e606fcfab2bc7ce2.jpeg"></a> </p>
<p>When you&rsquo;re done, it should look something like this:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/e392d638f0acecb9d54c81bbca4ee17cbcd05445.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/e392d638f0acecb9d54c81bbca4ee17cbcd05445.jpeg"></a> </p>
<p>Then you can deploy machines using this bridge.</p>
<p><strong>NOTE</strong> that you can create an &ldquo;Open switch&rdquo; bridge if desired, and MAAS will create the netplan model for you.</p>
<p><a href="#heading--how-to-set-up-a-bridge-with-netplan"><h3 id="heading--how-to-set-up-a-bridge-with-netplan">How to set up a bridge with netplan</h3></a></p>
<p>You can also use netplan to configure a bridge:</p>
<ol>
<li>
<p>Open your netplan configuration file.  This should be in <code>/etc/netplan</code>.  It could be called <code>50-cloud-init.yaml</code>, <code>netplan.yaml</code>, or something else.  </p>
</li>
<li>
<p>Modify the file to add a bridge, using the following example as a guide:</p>
</li>
</ol>
<pre><code class="language-nohighlight">network:
    bridges:
        br0:
            addresses:
            - 10.0.0.101/24
            gateway4: 10.0.0.1
            interfaces:
            - enp1s0
            mac address: 52:54:00:39:9d:f9
            mtu: 1500
            name servers:
                addresses:
                - 10.0.0.2
                search:
                - maas
            parameters:
                forward-delay: 15
                stp: false
    Ethernet's:
        enp1s0:
            match:
                mac address: 52:54:00:39:9d:f9
            mtu: 1500
            set-name: enp1s0
        enp2s0:
            match:
                mac address: 52:54:00:df:87:ac
            mtu: 1500
            set-name: enp2s0
        enp3s0:
            match:
                mac address: 52:54:00:a7:ac:46
            mtu: 1500
            set-name: enp3s0
    version: 2
</code></pre>
<ol>
<li>Apply the new configuration with <code>netplan apply</code>.</li>
</ol>
<p><a href="#heading--how-to-manage-machine-interfaces"><h2 id="heading--how-to-manage-machine-interfaces">How to manage machine interfaces</h2></a></p>
<p>This section will explain the following procedures related to machine interfaces:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--how-to-edit-interfaces&quot;">How to edit machine interfaces</a></li>
<li><a href="#heading--bond-interfaces">How to create a bond interface</a></li>
<li><a href="#heading--bridge-interfaces">How to create a bridge interface</a></li>
<li><a href="#heading--delete-an-interface">How to delete an interface</a></li>
<li><a href="#heading--assign-a-network-interface-to-a-fabric">How to assign a network interface to a fabric</a></li>
<li><a href="#heading--interface-identifiers">How to discover interface identifiers</a></li>
<li><a href="#heading--create-a-vlan-interface">How to create a VLAN interface</a></li>
<li><a href="#heading--delete-a-vlan-interface">How to delete a VLAN interface</a></li>
</ul>
<p><a href="#heading--how-to-edit-interfaces"><h3 id="heading--how-to-edit-interfaces">How to edit machine interfaces</h3></a></p>
<p>From a machine&rsquo;s &ldquo;Interfaces&rdquo; page, click the menu icon for the interface to be edited and select &ldquo;Edit Physical&rdquo; from the resulting menu:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/438475b8906736b45fc809cd105a56be5052397d.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/438475b8906736b45fc809cd105a56be5052397d.png"></a></p>
<p>The following window will appear:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/70b21d256df52399ac7ab09c3051f4bf011da55e.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/70b21d256df52399ac7ab09c3051f4bf011da55e.png"></a></p>
<p>Four modes determine how a subnet address is assigned when MAAS deploys the machine. You can select one of these modes by clicking on the &ldquo;IP mode&rdquo; drop-down menu.</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>
<p><strong>Auto assign</strong>: MAAS will assign a random static address (<code>iface eth0 inet static</code>). The pool of available addresses depends on whether the subnet is managed or unmanaged (see <a href="how-to-manage-networks.html#heading--how-to-toggle-subnet-management">Subnet management</a>).</p>
</li>
<li>
<p><strong>Static assign</strong>: The administrator will specify a static address using a secondary field.</p>
</li>
<li>
<p><strong>DHCP</strong>: The machine leases a dynamic IP address, via either MAAS-managed DHCP or an external DHCP server.</p>
</li>
<li>
<p><strong>Unconfigured</strong>: The interface is not configured.</p>
</li>
</ul>
<p>Press the &ldquo;Save&rdquo; button to apply the changes.</p>
<p>See <a href="maas-concepts-and-terms-reference.html#heading--ip-ranges">Concepts and terms</a> for the definitions of reserved range types.</p>
<p><a href="#heading--bond-interfaces"><h3 id="heading--bond-interfaces">How to create a bond interface</h3></a></p>
<p>A bond is created by selecting more than one interface and clicking the now-active &ldquo;Create bond&rdquo; button:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/7dd772c961c9f6f871f657b0397646446a4e23e7.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/7dd772c961c9f6f871f657b0397646446a4e23e7.png"></a></p>
<p>After clicking the &ldquo;Create bond&rdquo; button, the bond configuration pane will appear.</p>
<p>From the bond configuration pane, you can rename the bond, select a bond mode (see below), assign a MAC address to the aggregate device and attach one or more tags.</p>
<p>The interfaces aggregated into the bond interface are listed below the &ldquo;Tags&rdquo; field. Use the &ldquo;Primary&rdquo; column to select the interface to act as the primary device.</p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/699a55f98f3e1a81da75d1595e40bb74c99aff8e.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/699a55f98f3e1a81da75d1595e40bb74c99aff8e.png"></a></p>
<p>You can select from the following bonding modes on the &ldquo;Bond mode&rdquo; drop-down menu:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>
<p><strong>balance-rr</strong>: Transmit packets in sequential order from the first available follower through to the last. This mode provides load balancing and fault tolerance.</p>
</li>
<li>
<p><strong>active-backup</strong>: Only one follower in the bond is active. A different follower becomes active if, and only if, the active follower fails. The bond&rsquo;s MAC address is externally visible on only one port (network adaptor) to avoid confusing the switch.</p>
</li>
<li>
<p><strong>balance-xor</strong>: Transmit based on the selected transmit hash policy. The default policy is simple, which means that an XOR operation selects packages.  This XOR compares the source MAC address and the resultant XOR between the destination MAC address, the packet type identifier, and the modulo follower count.</p>
</li>
<li>
<p><strong>broadcast</strong>: Transmit everything on all follower interfaces. This mode provides fault tolerance.</p>
</li>
<li>
<p><strong>802.3ad</strong>: Creates aggregation groups that share the same speed and duplex settings. This mode utilises all followers in the active aggregation, following the IEEE 802.3ad specification.</p>
</li>
<li>
<p><strong>balance-tlb</strong>: Adaptive transmit load balancing, channel bonding that does not require any special switch support.</p>
</li>
<li>
<p><strong>balance-alb</strong>: Adaptive load balancing, includes balance-tlb plus receive load balancing (rlb) for IPV4 traffic. This mode does not require any special switch support.  ARP negotiation achieves load balancing in this case.</p>
</li>
</ul>
<p>Press the &ldquo;Save&rdquo; button when you&rsquo;re done.</p>
<p><strong>NOTE:</strong> 
The MAC address defaults to the MAC address of the primary interface.</p>
<p><a href="#heading--bridge-interfaces"><h3 id="heading--bridge-interfaces">How to create a bridge interface</h3></a></p>
<p><a href="https://discourse.maas.io/uploads/default/original/1X/83ef3d6f40d5b558396d96717dd2822fc1ce8b68.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/83ef3d6f40d5b558396d96717dd2822fc1ce8b68.png"></a></p>
<p>Press the &ldquo;Save&rdquo; button when you&rsquo;re done.</p>
<p><a href="#heading--delete-an-interface"><h3 id="heading--delete-an-interface">How to delete an interface</h3></a></p>
<p>An interface can only be deleted via the MAAS CLI.  Choose the &ldquo;CLI&rdquo; dropdown above to see how.</p>
<p>The &ldquo;delete&rdquo; command can be used to delete a bridge interface, a bond interface or a physical interface:</p>
<pre><code>maas $PROFILE interface delete $SYSTEM_ID $IFACE_ID
</code></pre>
<p>For example:</p>
<pre><code>maas admin interface delete 4efwb4 15
</code></pre>
<p>The following is output after the successful deletion of an interface:</p>
<pre><code>Success.
Machine-readable output follows:
</code></pre>
<p>Note that while the label is presented, there is no machine-readable output expected after the successful execution of the delete command.</p>
<p><a href="#heading--assign-a-network-interface-to-a-fabric"><h3 id="heading--assign-a-network-interface-to-a-fabric">How to assign a network interface to a fabric</h3></a></p>
<p>A network interface may be assigned to a fabric with the MAAS CLI only.  Choose the &ldquo;CLI&rdquo; dropdown above to see how.</p>
<p><a href="#heading--interface-identifiers"><h3 id="heading--interface-identifiers">How to discover interface identifiers</h3></a></p>
<p>Interface identifiers can only be discovered via the MAAS CLI.  Choose the &ldquo;CLI&rdquo; dropdown above to see how.</p>
<p><a href="#heading--create-a-vlan-interface"><h3 id="heading--create-a-vlan-interface">How to create a VLAN interface</h3></a></p>
<p>VLAN interfaces can only be created via the MAAS CLI. Select the &ldquo;CLI&rdquo; dropdown above to see how.</p>
<p><a href="#heading--delete-a-vlan-interface"><h3 id="heading--delete-a-vlan-interface">How to delete a VLAN interface</h3></a></p>
<p>VLAN interfaces can only be deleted via the MAAS CLI. Select the &ldquo;CLI&rdquo; dropdown above to see how.</p>
<p><a href="#heading--how-to-manage-proxies"><h2 id="heading--how-to-manage-proxies">How to manage proxies</h2></a></p>
<p>MAAS provides a way for its managed machines to use a proxy server when they need to access HTTP/HTTPS-based resources, such as the Ubuntu package archive.</p>
<p>There are three possible options:</p>
<ol>
<li>internal proxy (default)</li>
<li>external proxy</li>
<li>no proxy</li>
</ol>
<p>Configuring a proxy with MAAS consists of enabling/disabling one of the above three options and enabling/disabling proxying on a specific subnet. This article will help you learn:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--internal-proxy-maas-proxy">About the MAAS internal proxy</a></li>
<li><a href="#heading--configure-proxy">How to create an external proxy</a></li>
</ul>
<p><a href="#heading--internal-proxy-maas-proxy"><h3 id="heading--internal-proxy-maas-proxy">About the MAAS internal proxy</h3></a></p>
<p>MAAS provides an internal proxy server. Although it is set up to work well with APT/package requests, it is effectively an HTTP caching proxy server. If you configure the MAAS region controller as the default gateway for the machines it manages then the proxy will work transparently (on TCP port 3128). Otherwise, machines will need to access it on TCP port 8000.</p>
<p>By default, the proxy is available to all hosts residing in any subnet detected by MAAS, not just MAAS-managed machines. It is therefore recommended to disable access to those subnets that represent untrusted networks.</p>
<p><a href="#heading--configure-proxy"><h3 id="heading--configure-proxy">How to create an external proxy</h3></a></p>
<p>In the web UI, visit the &lsquo;Settings&rsquo; page and select the &lsquo;Network services&rsquo; tab. The &lsquo;Proxy&rsquo; section is at the top. You can apply your changes by pressing the &lsquo;Save&rsquo; button.</p>
<p><a href="https://assets.ubuntu.com/v1/55800a33-installconfig-network-proxy__2.4_configure-proxy.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/55800a33-installconfig-network-proxy__2.4_configure-proxy.png"></a></p>
<p>To enable the internal proxy, ensure that the checkbox adjacent to &lsquo;MAAS Built-in&rsquo; is selected. This internal proxy is the default configuration.</p>
<p>To enable an external proxy, activate the &lsquo;External&rsquo; checkbox and use the new field that is displayed to define the proxy&rsquo;s URL (and port if necessary).</p>
<p>An upstream cache peer can be defined by enabling the &lsquo;Peer&rsquo; checkbox and entering the external proxy URL into the field. With this enabled, machines will be configured to use the MAAS built-in proxy to download cached APT packages.</p>
<p>To prevent MAAS machines from using a proxy, enable the &lsquo;Don&rsquo;t use a proxy&rsquo; checkbox.</p>
<p><strong>NOTE</strong> that the proxy service will still be running.</p>
<p><a href="#heading--how-to-set-up-ntp"><h2 id="heading--how-to-set-up-ntp">How to set up Network Time Protocol (NTP)</h2></a></p>
<p>MAAS provides managed NTP services (with <a href="https://chrony.tuxfamily.org/">Chrony</a>) for all region and rack controllers. This arrangement allows MAAS to both keep its controllers synchronised, and keep deployed machines synchronised as well. You can configure NTP on the &lsquo;Network services&rsquo; tab of the &lsquo;Settings&rsquo; page.</p>
<p>The region controller configures the NTP service to keep its time synchronised from one or more external sources. By default, the MAAS region controller uses <code>ntp.ubuntu.com</code>. Rack controllers also configure the NTP service, synchronising their time with the region controllers.  Rack controllers also configure DHCP with the correct NTP information. Any machine on the network that obtains a DHCP lease from MA/snap/3AS will benefit from NTP support.</p>
<p><a href="#heading--setting-ntp-server"><h2 id="heading--setting-ntp-server">Setting an external NTP server</h2></a></p>
<p>External sites, such as an existing NTP infrastructure, can be used directly as a time source for both rack controllers and machines.</p>
<p>You can specify an external site by choosing the NTP server(s) and selecting the &lsquo;External Only&rsquo; option. The region controller always uses an external site.</p>
<p>On the &lsquo;Settings&rsquo; page, select the &lsquo;Network services&rsquo; tab and scroll down to the &lsquo;NTP&rsquo; section:</p>
<p><a href="https://assets.ubuntu.com/v1/69180b4a-installconfig-network-ntp__2.6-configure-ntp.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/69180b4a-installconfig-network-ntp__2.6-configure-ntp.png"></a></p>
<p>Enter the address of the desired NTP server. Apply any changes by pressing the &lsquo;Save&rsquo; button.</p>
    </div>
  </body>
</html>