<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs
      </strong>
      <a href="https://maas.io/docs">(switch to live docs)
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  UI-only
      </span>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/power-management-reference.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="maas-installation-requirements.html">
	    Installation requirements
	  </a>
	</li>
	<li>
	  <a href="maas-glossary.html">
	    Glossary
	  </a>
	</li>
      </ul>
      <strong>
	<a href="basic-tutorials.html">
	  Basic tutorials
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-bootstrap-tutorial.html">
	    MAAS bootstrap tutorial
	  </a>
	</li>
	<li>
	  <a href="try-out-the-maas-cli.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="custom-image-tutorial.html">
	    Custom image tutorial
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-get-started-with-maas.html">
	  How to get started with MAAS
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-spin-up-maas-with-ansible.html">
	    Spin up MAAS with Ansible
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-change-maas-settings.html">
	    Change MAAS settings
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Ask for help
	  </a>
	</li>
	<li>
	  <a href="how-to-request-a-feature.html">
	    Request a feature
	  </a>
	</li>
	<li>
	  <a href="how-to-report-a-bug.html">
	    Report a bug
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-set-up-networks.html">
	  How to set up networks
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-connect-maas-networks.html">
	    Connect MAAS networks
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-dhcp.html">
	    Enable DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-acquire-images.html">
	  How to acquire images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-use-standard-images.html">
	    Use standard images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-build-custom-images.html">
	    Build custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-employ-vmware-images.html">
	    Employ VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-tune-controllers.html">
	  How to tune controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-adjust-your-controllers.html">
	    Adjust your controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-physical-machines.html">
	  How to deploy physical machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-make-machines-available.html">
	    Make machines available
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-put-machines-to-work.html">
	    Put machines to work
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-virtual-machines.html">
	  How to deploy virtual machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-set-up-lxd.html">
	    Set up LXD
	  </a>
	</li>
	<li>
	  <a href="how-to-create-vm-hosts.html">
	    Create VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-create-and-manage-vms.html">
	    Create and manage VMs
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-label-and-find-machines.html">
	  How to label and find machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-tag-machines.html">
	    Tag machines
	  </a>
	</li>
	<li>
	  <a href="how-to-annotate-machines.html">
	    Annotate machines
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
	<li>
	  <a href="how-to-find-machines.html">
	    Find machines
	  </a>
	</li>
      </ul>
      <strong>
	How to diagnose issues
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-log-files.html">
	    Work with log files
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-audit-event-logs.html">
	    Work with audit event logs
	  </a>
	</li>
      </ul>
      <strong>
	How to work securely
      </strong>
      <ul>
	<li>
	  <a href="how-to-improve-maas-security.html">
	    Improve MAAS security
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-maas-native-tls.html">
	    Enable MAAS native TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-an-air-gapped-maas.html">
	    Set up an air-gapped MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage user accounts
	  </a>
	</li>
      </ul>
      <strong>
	How to operate reliably
      </strong>
      <ul>
	<li>
	  <a href="how-to-keep-maas-backed-up.html">
	    Keep MAAS backed up
	  </a>
	</li>
	<li>
	  <a href="how-to-observe-a-live-maas.html">
	    Observe a live MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="explanation.html">
	Explanations
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-vm-hosting.html">
	    VM hosting
	  </a>
	</li>
	<li>
	  <a href="understanding-maas-events.html">
	    MAAS events
	  </a>
	</li>
	<li>
	  <a href="undersdtanding-maas-audit-events.html">
	    MAAS audit events
	  </a>
	</li>
	<li>
	  <a href="about-rbac.html">
	    RBAC
	  </a>
	</li>
      </ul>
      <strong>
	API reference
      </strong>
      <ul>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-technical-reference.html">
	  MAAS technical reference
	</a>
      </strong>
      <ul>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="maas-performance.html">
	    MAAS performance
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="storage-layouts-reference.html">
	    Storage layouts
	  </a>
	</li>
	<li>
	  <a href="maas-terraform-provider-reference.html">
	    Terraform provider
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>Power management reference</h1><!-- "Power management reference" -->
<p>To manage a machine, MAAS must be able to power cycle it, usually through the machine&rsquo;s <a href="https://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface#Baseboard_management_controller">BMC</a> card.  Until you configure the power type, a newly-added machine can&rsquo;t be enlisted and used by MAAS.</p>
<p><a href="#heading--power-management-reference"><h2 id="heading--power-management-reference">Power management reference guide</h2></a></p>
<h4>This article will help you learn:</h4>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--config-power-type">How to configure a machine&rsquo;s power type</a></li>
<li><a href="#heading--configure-use-ibm-z">How to configure and use IBM Z with MAAS</a></li>
<li><a href="#heading--example-virsh-kvm-power-type">How to use the virsh power type</a></li>
<li><a href="#heading--bmc-driver-support">Which BMC drivers are supported</a></li>
</ul>
<p>In addition, this article provides a <a href="#heading--power-catalogue">complete catalogue of power parameters, by type</a>.</p>
<p>You may also like to try <strong><a href="https://gilesknap.github.io/maaspower/main/index.html">maaspower</a></strong> which is a community project designed to be used with the MAAS webhook driver. It is a pluggable system that accepts MAAS webhooks and can translate them to other external systems. Note: it is not supported by Canonical.</p>
<p><a href="#heading--config-power-type"><h2 id="heading--config-power-type">How to configure a machine&rsquo;s power type</h2></a></p>
<p>To configure a machine&rsquo;s power type, click on the machine from the &lsquo;Machines&rsquo; page of the web UI, then select its &lsquo;Configuration&rsquo; tab. Scroll down until you find the Power configuration. If the power type is undefined, the following will be displayed:</p>
<p><a href="https://assets.ubuntu.com/v1/4fae5977-nodes-power-types__2.4_undefined.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/4fae5977-nodes-power-types__2.4_undefined.png"></a></p>
<p>Choose a type in the drop-down menu that corresponds to the machine&rsquo;s underlying machine&rsquo;s BMC card.</p>
<p><a href="https://assets.ubuntu.com/v1/b53c6613-nodes-power-types__2.4_selection.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/b53c6613-nodes-power-types__2.4_selection.png"></a></p>
<p>Fill in the resulting form; the information required will depends on the power type:</p>
<table>
<thead>
<tr>
<th align="left">CLI power_type code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="#heading--amt">amt</a></td>
<td align="left">Intel AMT</td>
</tr>
<tr>
<td align="left"><a href="#heading--apc">apc</a></td>
<td align="left">American Power Conversion (APC) PDU</td>
</tr>
<tr>
<td align="left"><a href="#heading--dli">dli</a></td>
<td align="left">Digital Loggers, Inc. PDU</td>
</tr>
<tr>
<td align="left"><a href="#heading--hmc">hmc</a></td>
<td align="left">IBM Hardware Management Console (HMC)</td>
</tr>
<tr>
<td align="left"><a href="#heading--lxd">lxd</a></td>
<td align="left">LXD VM</td>
</tr>
<tr>
<td align="left"><a href="#heading--ipmi">ipmi</a></td>
<td align="left">IPMI</td>
</tr>
<tr>
<td align="left"><a href="#heading--manual">manual</a></td>
<td align="left">Manual power configuration</td>
</tr>
<tr>
<td align="left"><a href="#heading--moonshot">moonshot</a></td>
<td align="left">HP Moonshot - iLO4 (IPMI)</td>
</tr>
<tr>
<td align="left"><a href="#heading--mscm">mscm</a></td>
<td align="left">HP Moonshot - iLO Chassis Manager</td>
</tr>
<tr>
<td align="left"><a href="#heading--mscm">msftocs</a></td>
<td align="left">Microsoft OCS - Chassis Manager</td>
</tr>
<tr>
<td align="left"><a href="#heading--nova">nova</a></td>
<td align="left">OpenStack Nova</td>
</tr>
<tr>
<td align="left"><a href="#heading--openbmc">openbmc</a></td>
<td align="left">OpenBMC Power Driver</td>
</tr>
<tr>
<td align="left"><a href="#heading--proxmox">proxmox</a></td>
<td align="left">ProxMox Power Driver</td>
</tr>
<tr>
<td align="left"><a href="#heading--recs_box">recs_box</a></td>
<td align="left">Christmann RECS-Box Power Driver</td>
</tr>
<tr>
<td align="left"><a href="#heading--redfish">redfish</a></td>
<td align="left">Redfish</td>
</tr>
<tr>
<td align="left"><a href="#heading--sm15k">sm15k</a></td>
<td align="left">SeaMicro 15000</td>
</tr>
<tr>
<td align="left"><a href="#heading--ucsm">ucsm</a></td>
<td align="left">Cisco UCS Manager</td>
</tr>
<tr>
<td align="left"><a href="#heading--virsh">virsh</a></td>
<td align="left">libvirt KVM</td>
</tr>
<tr>
<td align="left"><a href="#heading--vmware">vmware</a></td>
<td align="left">VMware</td>
</tr>
<tr>
<td align="left"><a href="#heading--webhook">webhook</a></td>
<td align="left">Webhook</td>
</tr>
<tr>
<td align="left"><a href="#heading--wedge">wedge</a></td>
<td align="left">Facebook&rsquo;s Wedge</td>
</tr>
</tbody>
</table>
<p>Click &lsquo;Save changes&rsquo; to finish. Once that&rsquo;s done, MAAS performs a power check on the machine. A successful power check is a good indication that MAAS can properly communicate with the machine, that is, it should quickly result in a power status of &ldquo;Power off&rdquo;. A failed attempt will show:</p>
<p><a href="https://assets.ubuntu.com/v1/3bd5e93b-nodes-power-types__2.4_power-error.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/3bd5e93b-nodes-power-types__2.4_power-error.png"></a></p>
<p>If you see this error, double-check your entered values by editing the power type, or  consider another power type altogether.</p>
<p>Another possible cause for this error may be the networking: traffic may be getting filtered between the rack controller and the BMC card.</p>
<p><a href="#heading--power-catalogue"><h2 id="heading--power-catalogue">Power catalogue</h2></a></p>
<p>The following catalogue helps to explain the fields in the &ldquo;create machine&rdquo; dialogue above.  Note that most of the multiple-choice fields have drop-down menus to assist with your choice.</p>
<p><a href="#heading--amt"><h3 id="heading--amt">Intel AMT</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--apc"><h3 id="heading--apc">American Power Conversion (APC) PDU</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">IP for APC PDU</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">APU PDU node outlet number (1-16)</td>
<td align="left">PDU node outlet number</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power ON outlet delay (seconds)</td>
<td align="left">outlet power ON delay</td>
<td align="left">Optional, default=5</td>
</tr>
</tbody>
</table>
<p><a href="#heading--dli"><h3 id="heading--dli">Digital Loggers, Inc. PDU</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Outlet ID</td>
<td align="left">outlet ID</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--hmc"><h3 id="heading--hmc">IBM Hardware Management Console (HMC)</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">IP for HMC</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">HMC username</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">HMC password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">HMC Managed System server name</td>
<td align="left">HMC managed server name</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">HMC logical partition</td>
<td align="left">HMC logical partition of unit</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--lxd"><h3 id="heading--lxd">LXD VMs</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">LXD address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Instance name</td>
<td align="left">LXD container instance name</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">LXD password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--ipmi"><h3 id="heading--ipmi">IPMI</h3></a></p>
<p>Some of the fields for this power type have fixed choices, indicated in the &ldquo;Choices&rdquo; column.</p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Choices</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power driver</td>
<td align="left">Power driver</td>
<td align="left"><code>LAN [IPMI 1.5]</code></td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>LAN_2_0 [IPMI 2.0]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Power boot type</td>
<td align="left">Boot type</td>
<td align="left"><code>Automatic</code></td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>Legacy boot</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>EFI boot</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">IP address</td>
<td align="left">IP address of unit</td>
<td align="left"></td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power MAC</td>
<td align="left">MAC address of unit</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">K_g</td>
<td align="left">K_g BMC key</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Cipher suite</td>
<td align="left">Cipher suite ID</td>
<td align="left">- <code>17</code> <small>(17 - HMAC-SHA256::HMAC_SHA256_128::AES-CBC-128)</small></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>3</code> <small>(3 - HMAC-SHA1::HMAC-SHA1-96::AES-CBC-128)</small></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code></code> (blank) <small>(freeipmi-tools default)</small></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>8</code> <small>(8 - HMAC-MD5::HMAC-MD5-128::AES-CBC-128)</small></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>12</code> <small>(12 - HMAC-MD5::MD5-128::AES-CBC-128)</small></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Privilege level</td>
<td align="left">IPMI privilege level</td>
<td align="left"><code>User</code></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>Operator</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"><code>Administrator</code></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p><a href="#heading--manual"><h3 id="heading--manual">Manual power configuration</h3></a></p>
<p>Manual power configuration means exactly that &ndash; manually configured at the unit &ndash; hence there are no parameters to set in the &ldquo;create machine&rdquo; UI.</p>
<p><a href="#heading--moonshot"><h3 id="heading--moonshot">HP Moonshot - iLO4 (IPMI)</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power hardware address</td>
<td align="left">Hardware address of unit</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--mscm"><h3 id="heading--mscm">HP Moonshot - iLO Chassis Manager</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">IP for MSCM CLI API</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">MSCM CLI API user</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">MSCM CLI API password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Node ID</td>
<td align="left">cXnY</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">- where</td>
<td align="left">X = cartridge number</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Y = node number</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p><a href="#heading--mscm"><h3 id="heading--mscm">Microsoft OCS - Chassis Manager</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power port</td>
<td align="left">Port where unit is attached</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Blade ID</td>
<td align="left">Blade ID (usu. 1-24)</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--nova"><h3 id="heading--nova">OpenStack Nova</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Host UUID</td>
<td align="left">Host UUID</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Tenant name</td>
<td align="left">Tenant name</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Username</td>
<td align="left">Username to login</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Password</td>
<td align="left">Password to access unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Auth URL</td>
<td align="left">URL to access unit</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--proxmox"><h3 id="heading--proxmox">Proxmox</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power type</td>
<td align="left">Proxmox</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Host name or IP</td>
<td align="left">Power address for the Proxmox driver</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Username, including realm</td>
<td align="left">Power user, along with realm (i.e., Username@Realm</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Password</td>
<td align="left">Required if a token name and secret aren&rsquo;t given</td>
<td align="left">Provisional</td>
</tr>
<tr>
<td align="left">API token name</td>
<td align="left">Token name: must include Username without realm (i.e., Username!Token-name</td>
<td align="left">Provisional</td>
</tr>
<tr>
<td align="left">API token secret</td>
<td align="left">Token secret</td>
<td align="left">Provisional</td>
</tr>
<tr>
<td align="left">Node ID</td>
<td align="left">VM name or ID</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Verify SSL connections&hellip;</td>
<td align="left">Boolean, whether or not to verify SSL connections with the system&rsquo;s root CA certificate</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--openbmc"><h3 id="heading--openbmc">OpenBMC Power Driver</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">OpenBMC address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">OpenBMC user</td>
<td align="left">Username to login</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">OpenBMC password</td>
<td align="left">Password to access unit</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--recs_box"><h3 id="heading--recs_box">Christmann RECS-Box Power Driver</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Node ID</td>
<td align="left">Node ID</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power port</td>
<td align="left">Port where unit is attached</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--redfish"><h3 id="heading--redfish">Redfish</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Redfish address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Redfish user</td>
<td align="left">Username to login</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Redfish password</td>
<td align="left">Password to access unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Node ID</td>
<td align="left">Node ID</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--sm15k"><h3 id="heading--sm15k">SeaMicro 15000</h3></a></p>
<p>Some of the fields for this power type have fixed choices, indicated in the &ldquo;Choices&rdquo; column.</p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Choices</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">System ID</td>
<td align="left">System ID</td>
<td align="left"></td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power address</td>
<td align="left">IP address of unit</td>
<td align="left"></td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to login</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left"></td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power control type</td>
<td align="left">Password to access unit</td>
<td align="left">IPMI</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">REST API v0.9</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">REST API v2.0</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p><a href="#heading--ucsm"><h3 id="heading--ucsm">Cisco UCS Manager</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Server UUID</td>
<td align="left">Server UUID</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">URL for XML API</td>
<td align="left">XML API URL</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">API user</td>
<td align="left">API user</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">API password</td>
<td align="left">API password</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--virsh"><h3 id="heading--virsh">virsh - libvirt KVM</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Address</td>
<td align="left">URL of VM</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Password</td>
<td align="left">API password</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Virsh VM ID</td>
<td align="left">libvirt VM UUID</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--vmware"><h3 id="heading--vmware">VMware</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">VM Name</td>
<td align="left">VM name (if UUID unknown)</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">VM UUID</td>
<td align="left">VM UUID (if known)</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">VMware IP</td>
<td align="left">IP address of VM</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">VMware username</td>
<td align="left">Username to access VM</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">VMware password</td>
<td align="left">Password to access VM</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">VMware API port</td>
<td align="left">VMware API port number</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">VMware API protocol</td>
<td align="left">VMware API protocol</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--wedge"><h3 id="heading--wedge">Facebook&rsquo;s Wedge</h3></a></p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">IP address</td>
<td align="left">IP address of unit</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--example-virsh-kvm-power-type"><h2 id="heading--example-virsh-kvm-power-type">How to use the virsh power type</h2></a></p>
<p>Consider a machine backed by VM. Below, a &lsquo;Power type&rsquo; of <code>Virsh</code> has been selected, and the &lsquo;Power address&rsquo; of <code>qemu+ssh://ubuntu@192.168.1.2/system</code> has been entered (replace values as appropriate).  The value of &lsquo;Power ID&rsquo; is the VM domain (guest) name, here <code>node2</code>.</p>
<p><a href="https://assets.ubuntu.com/v1/c75e00a8-nodes-power-types__2.4_example-virsh.png" target = "_blank"><img src="https://assets.ubuntu.com/v1/c75e00a8-nodes-power-types__2.4_example-virsh.png"></a></p>
<p><strong>NOTE:</strong> 
The machine&rsquo;s hostname &ndash; according to MAAS &ndash; is a randomly chosen string (here <code>dear.ant</code>). You should change this hostname to something descriptive, that helps you remember why this machine is in your MAAS network.</p>
<p><a href="#heading--webhook"><h3 id="heading--webhook">Webhook</h3></a></p>
<p>It&rsquo;s important to understand that the Webhook power driver is more generic than other drivers, so it has some flexibility that the underlying power driver may not support.  For example, Webhook doesn&rsquo;t require a username or password for the power driver, because not all power drivers work that way.  Nevertheless, the power driver you&rsquo;re connecting to Webhook may actually require a username and/or password.  Understanding and implementing these fields correctly for the chosen back-end power driver is the user&rsquo;s responsibility.</p>
<p>To that end, the &ldquo;Required&rdquo; column for this driver refers only to whether Webhook requires a value in each field.  Just because a field is optional for Webhook itself does not mean that the underlying power driver will ultimately allow that field to be unspecified.</p>
<table>
<thead>
<tr>
<th align="left">Form field</th>
<th align="left">Description</th>
<th align="left">Required (by Webhook)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Power type</td>
<td align="left">Webhook (from drop-down list)</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">URI to power on the node</td>
<td align="left">URI to access power driver&rsquo;s API for power on</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">URI to power off the node</td>
<td align="left">URI to access power driver&rsquo;s API for power off</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">URI to query the nodes power status</td>
<td align="left">URI to access power driver&rsquo;s API for power status</td>
<td align="left">Required</td>
</tr>
<tr>
<td align="left">Regex to confirm the node is on</td>
<td align="left">Regex expression that will return a string if the power is on, and no string if the power is off</td>
<td align="left">Required, defaults supplied</td>
</tr>
<tr>
<td align="left">Regex to confirm the node is off</td>
<td align="left">Regex expression that will return a string if the power is off, and no string if the power is on</td>
<td align="left">Required, defaults supplied</td>
</tr>
<tr>
<td align="left">Power user</td>
<td align="left">Username to log into the power driver</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power password</td>
<td align="left">Password to access unit</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Power token</td>
<td align="left">Power driver API token (used instead of user and password, if set)</td>
<td align="left">Optional</td>
</tr>
<tr>
<td align="left">Verify SSL connections&hellip;</td>
<td align="left">Boolean, whether or not to verify SSL connections with the system&rsquo;s root CA certificate</td>
<td align="left">Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--bmc-driver-support"><h2 id="heading--bmc-driver-support">Which BMC drivers are supported</h2></a></p>
<p>MAAS supports many types of BMC hardware, though not all the drivers have the same capabilities. See the below table for a feature comparison of the BMC drivers currently supported by MAAS.</p>
<p><details><summary>Tell me about BMC</summary></p>
<p>BMC, or &ldquo;Baseboard Management Controller,&rdquo; is an extra micro-controller on the motherboard of a server which forms the interface between system-management software and the device&rsquo;s hardware.  The BMC can collect data from attached sensors, alert administrators to issues, and respond to remote-control commands to control system operation or power state, independent of the system&rsquo;s CPU.</p>
<p>In the context of MAAS, the BMC is generally controlled by SNMP commands.  Any given BMC will function in the context of one or more &ldquo;power types,&rdquo; which are physical interfaces that permit use of the IPMI (&ldquo;Intelligent Platform Management Interface&rdquo;) protocol.  Each power type has a different set of expected parameters required to access and command the BMC.</p>
<p></details></p>
<table>
<colgroup>
<col width="35%" />
<col width="12%" />
<col width="10%" />
<col width="14%" />
<col width="15%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Power Driver (<em>X=supported</em>)</th>
<th>PXE Next Boot</th>
<th>Power Querying</th>
<th>Chassis/Pod Configuration</th>
<th>Enhanced UI Error Reporting</th>
<th>BMC Enlistment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">American Power Conversion (APC) - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Cisco UCS Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Digital Loggers, Inc. - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Facebook's Wedge <code>*</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">HP Moonshot - iLO Chassis Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">HP Moonshot - iLO4 (IPMI)</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr class="odd">
<td align="left">IBM Hardware Management Console (HMC)</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">IPMI</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td align="left">Intel AMT</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr class="even">
<td align="left">Manual</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Microsoft OCS - Chassis Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">OpenStack Nova</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Rack Scale Design</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Redfish</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
</tr>

<tr class="odd">
<td align="left">SeaMicro 15000</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Sentry Switch CDU - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">VMWare</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Virsh (virtual systems)</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p><code>*</code> The &lsquo;Facebook&rsquo;s Wedge&rsquo; OpenBMC power driver is considered experimental at this time.</p>
<p><a href="#heading--configure-use-ibm-z"><h2 id="heading--configure-use-ibm-z">How to configure and use IBM Z with MAAS</h2></a></p>
<p>The IBM Z or LinuxONE system can host MAAS controllers and is able to deploy predefined logical partitions (LPARs) KVM host(s), and virtual machines, if the mainframe is set up properly for MAAS.</p>
<p>The basic architecture is similar to this:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/d/d78aec0bd5d5f485697701ed7316944f918fef94.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/d/d78aec0bd5d5f485697701ed7316944f918fef94.png"></a></p>
<p>Networking would be structured like this:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/8/841305949182ba64037f9806396a0e60fdc46d23.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/8/841305949182ba64037f9806396a0e60fdc46d23.png"></a></p>
<p>Note that net-booting the KVM guests (through the two bridges) can be problematic.  There are two options:</p>
<ol>
<li>
<p>Adding VNIC characteristics to enable &ldquo;learning&rdquo; on the network interface that&rsquo;s the base for bridge &ldquo;br2.&rdquo;  This is the recommended approach.</p>
</li>
<li>
<p>Enable full promiscuous bridge port mode at the network interface that&rsquo;s the base for bridge &ldquo;br2.&rdquo;  This approach is not recommended because it has some built-in limitations.</p>
</li>
</ol>
<p>MAAS will automatically configure option 1 for you, in case an LPAR is deployed as KVM host (the bridge names may differ).</p>
<p>In order to achieve this configuration, there are a number of steps that must be executed; specifically, you must know how to:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="#heading--ibm-z-requirements">Evaluate IBM Z requirements</a></li>
<li><a href="#heading--ibm-z-login">Login to the IBM Z</a></li>
<li><a href="#heading--set-up-ibm-z-partition">Set up a suitable partition for MAAS</a></li>
<li><a href="#heading--set-up-ibm-z-networking">Set up networking for MAAS</a></li>
<li><a href="#heading--set-up-ibm-z-storage">Set up storage for MAAS</a></li>
<li><a href="#heading--set-the-boot-parameters">Set the partition boot parameters</a></li>
<li><a href="#heading--set-up-ibm-z-enlistment">Set up your IBM Z virtual machines for enlistment</a></li>
</ul>
<p>The MAAS controller does not necessarily need to run on an LPAR on the IBM Z system itself, but can also run on a different system outside. But since the MAAS controller requires a network connection to the hardware management console (HMC), it is recommended to keep it co-located and (for security reasons) as close as possible to the HMC and run it in a dedicated LPAR.</p>
<p>Such a MAAS controller LPAR should have at least two SMT hardware threads (one IFL), since it runs several services (bind, rack-, region-controller and more), 16 GB RAM and 100 GB disk space - recommended is to use the double amount of these resources.</p>
<p>The resources of the LPARs to deploy on (&lsquo;machines&rsquo; in terms of MAAS) depending on the use case. LPARs that are deployed as KVM host would of course require significantly more resources to be able to host KVM guest on top.</p>
<p>There are several constraints on the definition and setup of the &lsquo;machine&rsquo; LPARs - please see below.</p>
<p><a href="#heading--ibm-z-requirements"><h3 id="heading--ibm-z-requirements">Evaluate IBM Z requirements</h3></a></p>
<p>The system requirements to host MAAS and its virtual machines on the IBM Z platform are as follows:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>IBM z14 GA2 (or newer) or IBM LinuxONE III (or newer)</li>
<li>HMC running in DPM mode (mandatory, traditional mode is not supported!)</li>
<li>HMC firmware level H39 - (HMC at H40 and SE at S55) </li>
<li>HMCs Rest-API enabled </li>
<li>python-zhmcclient (0.29 or later) running on the MAAS controller system, connected to the HMC</li>
<li>HMC user ID for the zhmcclient access to the HMC API (must have permissions for the “Manage Web Services API Logs” role and “Manage Web Services API Logs” role)</li>
<li>I/O auto-configuration enabled for the ‘machine’ LPARs</li>
<li>zFCP (SCSI) disk storage (only, no DASD support), recommended are two disks, one defined as type ‘boot,’ the second as type ‘data’</li>
<li>a dedicated storage group per ‘machine’ LPAR; these must include the dedicated zFCP storage for this particular managed LPAR only (‘boot’ and ‘data’ for LPAR n) - but no additional shared storage!</li>
<li>qeth network devices (Hipersockets or OSA, recommended); at least one qeth NIC, recommended two (or more)</li>
<li>Ubuntu Server 20.04 installed on a dedicated system (LPAR or PC), that acts as MAAS Controller</li>
<li>one or more LPARs as ‘machines’ (aka MAAS deployment targets)</li>
</ul>
<p>Be aware that these are minimum system requirements.</p>
<p><a href="#heading--ibm-z-login"><h3 id="heading--ibm-z-login">Access the HMC and login to the IBM Z</h3></a></p>
<p>To login to the HMC, you must have at least “system programmer” privileges. Gaining that level of access is beyond the scope of this document. Once you are sure that you have the necessary access, you first need to navigate to the Hardware Management Console (HMC) application in your Web browser:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/d/d085c8113e403546484778c858c27344e8986597.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/d/d085c8113e403546484778c858c27344e8986597.png"></a></p>
<p>Click on the &ldquo;Log on&hellip;&rdquo; link, which will bring you to a login screen:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/5/5ccdfac4dc985260dcedd01284d24c5e8e5199d9.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/5/5ccdfac4dc985260dcedd01284d24c5e8e5199d9.png"></a></p>
<p>Upon successfully logging on, you will land on the Welcome Screen:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/d/d18afe140a1971621ed44fa5fae36033927e293e.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/d/d18afe140a1971621ed44fa5fae36033927e293e.png"></a></p>
<p>Select the &ldquo;Tasks Index&rdquo; on the left-hand navigation:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/c/c030c8280b0a6dcfdd0365f9cf50238ae708e34b.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/c/c030c8280b0a6dcfdd0365f9cf50238ae708e34b.jpeg"></a></p>
<p>From here, you will be able to access the commands needed to prepare your IBM Z to host MAAS.</p>
<p><a href="#heading--set-up-ibm-z-partition"><h3 id="heading--set-up-ibm-z-partition">Set up a suitable IBM Z partition for a MAAS machine</h3></a></p>
<p>In order to prevent MAAS from taking over the entire system, you must assign both the controller and the ‘machines’ / KVM hosts to specific partitions, with suitable limitations. To set up suitable IBM Z partitions for hosting MAAS, you must choose “Partition Details” from the “Tasks Index,” which will bring you to a screen like this one:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/2/29e0cc00d68a5add1b13b1d50313ff6966f251a9.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/2/29e0cc00d68a5add1b13b1d50313ff6966f251a9.png"></a></p>
<p>You must then choose the “target object” (in this case we’ve chosen TA05) to be operated upon:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/7/754c4926ecf5d9330b60c9b58bdd15bde6f24144.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/7/754c4926ecf5d9330b60c9b58bdd15bde6f24144.png"></a></p>
<p>Click “OK,” and you’ll arrive at a screen similar to the one below:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/0/0ecf9bd89c132fd2c7ff8b879dd6c1b4d3090a99.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/0/0ecf9bd89c132fd2c7ff8b879dd6c1b4d3090a99.png"></a></p>
<p>Make sure you’re on the “Partitions” tab, and select the desired object (“TA05…”):</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/0/018d8309a1a16571df56a6672cff26e60f42075a.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/0/018d8309a1a16571df56a6672cff26e60f42075a.jpeg"></a></p>
<p>Right-click on the selected object and select “Partition Details:”</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/5/5a7f696435b504eb212234acdd09c928f16b1670.jpeg" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/5/5a7f696435b504eb212234acdd09c928f16b1670.jpeg"></a></p>
<p>On the “General” tab, edit the partition details to suit your proposed MAAS deployment:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/6/60ff5ca98d8b615ee4a947607872c973cf2c7f41.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/6/60ff5ca98d8b615ee4a947607872c973cf2c7f41.png"></a></p>
<p>Next, you will set up the networking details for this partition, as shown in the following section.</p>
<p><a href="#heading--set-up-ibm-z-networking"><h3 id="heading--set-up-ibm-z-networking">Set up IBM Z networking for a MAAS machine</h3></a></p>
<p>To properly enable networking within the IBMZ partitions, you must change to the “Network” tab under “Partition Details:”</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/d/daf386497781df42ba7ffaa518c1f186ebef66ee.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/d/daf386497781df42ba7ffaa518c1f186ebef66ee.png"></a></p>
<p>Click on the NIC of interest to bring up the “NIC Details” screen:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/e/e9b65711cf97dd722db1b1df4b69d4f590166a99.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/e/e9b65711cf97dd722db1b1df4b69d4f590166a99.png"></a></p>
<p>Confirm that the parameters on this screen are consistent with your planned MAAS deployment, then bring up the network adapter(either OSA or Hipersockets) by selecting it:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/0/0a0873d7cd40147884c861d1fcde15ddc37c8853.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/0/0a0873d7cd40147884c861d1fcde15ddc37c8853.png"></a></p>
<p>Ensure that all settings on the “General” tab conform to your planned MAAS deployment; then select the “Network Interface Cards” tab on the left-hand navigation:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/0/0a0873d7cd40147884c861d1fcde15ddc37c8853.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/0/0a0873d7cd40147884c861d1fcde15ddc37c8853.png"></a></p>
<p>Again, ensure that the parameters associated with the networking arrangement are consistent with your planned MAAS deployment.</p>
<p>Next, you will set up the storage layout for your MAAS partition(s).</p>
<p><a href="#heading--set-up-ibm-z-storage"><h3 id="heading--set-up-ibm-z-storage">Set up IBM Z storage for a MAAS machine</h3></a></p>
<p>To set up suitable storage for a MAAS deployment, you should bring up the “Partition Details” for your chosen MAAS partition and select the “Storage” tab from the left-hand navigation:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/c/c25792eeacd5aef57ca74a68b203c23ed74268d7.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/c/c25792eeacd5aef57ca74a68b203c23ed74268d7.png"></a></p>
<p>Choose the “VOLUMES” sub-tab, and lick on the hyperlinked partition name to bring up the storage configuration tab:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/c/cf8d1427abda94ccd3b79966d06bee210ac1240b.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/c/cf8d1427abda94ccd3b79966d06bee210ac1240b.png"></a></p>
<p>Click on “GET DETAILS” for the Boot Volume in the Volume list to bring up the “Configuration details” screen:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/a/a081c97b8196e708495156187b983b70c32fcdc5.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/a/a081c97b8196e708495156187b983b70c32fcdc5.png"></a></p>
<p>Ensure that the Boot Volume is configured appropriately for your planned MAAS deployment, then click “Done.” Then return to the storage configuration tab and choose the Data Volume, and tune it to the appropriate parameters.</p>
<p>Next, choose the “ADAPTERS” sub-tab to bring up information on the storage adapters:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/8/821edff17e3fe8f2fbf9b5cb1682928dc9bb34d7.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/8/821edff17e3fe8f2fbf9b5cb1682928dc9bb34d7.png"></a></p>
<p>Set any necessary parameters to conform to your planned MAAS deployment.</p>
<p><a href="#heading--set-the-boot-parameters"><h3 id="heading--set-the-boot-parameters">Set the partition boot parameters</h3></a></p>
<p>Return to the “Partition Details” screen and select the “Boot” tab in the left-hand navigation:</p>
<p><a href="https://discourse.maas.io/uploads/default/original/2X/c/c5df4937135c1a9a1758b20855742bd038700c65.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/2X/c/c5df4937135c1a9a1758b20855742bd038700c65.png"></a></p>
<p>Change any settings as necessary to support your planned MAAS deployment.</p>
<p><a href="#heading--set-up-ibm-z-enlistment"><h3 id="heading--set-up-ibm-z-enlistment">Set up your IBM Z virtual machine for enlistment</h3></a></p>
<p>To cause IBM Z KVM partition guests to enlist, it’s necessary to manually put in the BMC information for each guest. MAAS can then detect the guest, enlist it, and boot it as necessary.</p>
    </div>
  </body>
</html>