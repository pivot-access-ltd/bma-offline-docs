<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;margin-top:0;margin-bottom:0;list-style-type:none;padding-left:20px;}
      li {margin: 4px 0;}
      details {margin-top:0;margin-bottom:0;}
      details > summary {
	  padding: 0px;
	  margin-top: 0px;
	  margin-bottom: 0px;
	  width: 200px;
	  background-color: #ffffff;
	  border: none;
	  cursor: pointer;
    	  list-style-type: "< ";
	  direction: rtl;
      }
      details[open] > summary {
	  list-style-type: "v ";
      }
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs
      </strong>
      <a href="https://maas.io/docs">(switch to live docs)
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="../ui/how-to-use-standard-images.html">
          UI-only
        </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
          &nbsp;CLI-only&nbsp;
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <ul>
	<li>
          <a href="maas-documentation.html"><b>MAAS Documentation</b></a>
	</li>
	<hr style="margin-top:15px;">
	<li>
          <details>
            <summary><a href="tutorials.html">Tutorials</a></summary>
            <ul>
              <li>
		<details>
                  <summary>Try out MAAS</summary>
		  <ul>
		    <li>
		      <a href="bootstrap-maas.html">Bootstrap MAAS</a>
		    </li>
		    <li>
		      <a href="get-to-know-your-machines.html">Get to know your machines</a>
		    </li>
		  </ul>
		</details>
              </li>
	      <li>
		<a href="try-out-the-maas-cli.html">Try out the MAAS CLI</a>
	      </li>
	      <li>
		<a href="create-custom-images.html">Create custom images</a>
	      </li>
	      <li>
		<a href="get-fancy-cli-output.html">Get fancy CLI output</a>
	      </li>
              <li>
		<details>
                  <summary>Primer tutorials</summary>
		  <ul>
		    <li>
		      <a href="primer-tutorial-the-osi-model.html">OSI model tutorial</a>
		    </li>
		  </ul>
		</details>
              </li>
            </ul>
          </details>
	</li>
	<hr style="margin-top:15px;">
	<li>
          <details>
            <summary><a href="how-to-guides.html">How-to guides</a></summary>
            <ul>
              <li>
		<details>
                  <summary><a href="how-to-get-started-with-maas.html">Get started with MAAS</a></summary>
		  <ul>
                    <li>
                      <a href="how-to-do-a-fresh-install-of-maas.html">Do a fresh install of MAAS</a>
		    </li>
		    <li>
                      <a href="how-to-upgrade-maas.html">Upgrade MAAS</a>
		    </li>
		    <li>
                      <a href="how-to-spin-up-maas-with-ansible.html">Spin up MAAS with Ansible</a>
		    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-manage-networks.html">Manage networks</a></summary>
		  <ul>
                    <li>
                      <a href="how-to-connect-maas-networks.html">Connect MAAS networks</a>
                    </li>
                    <li>
                      <a href="how-to-enable-dhcp.html">Enable DHCP</a>
                    </li>
                    <li>
                      <a href="how-to-use-availability-zones.html">Use availability zones</a>
                    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-use-images.html">Use images</a></summary>
		  <ul>
                    <li>
                      <a href="how-to-use-standard-images.html">Use standard images</a>
                    </li>
                    <li>
                      <a href="how-to-mirror-images-locally.html">Mirror images locally</a>
                    </li>
                    <li>
                      <a href="how-to-customise-images.html">Customise images</a>
                    </li>
                    <li>
                      <a href="how-to-employ-vmware-images.html">Employ VMware images</a>
                    </li>
                    <li>
                      <a href="how-to-deploy-a-real-time-kernel.html">Deploy a RT kernel</a>
                    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-manage-controllers.html">Manage controllers</a></summary>
		  <ul>
		    <li>
		      <a href="how-to-configure-controllers.html">Configure controllers</a>
		    </li>
		    <li>
		      <a href="how-to-enable-high-availability.html">Enable high availability</a>
		    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-manage-machines.html">Manage machines</a></summary>
		  <ul>
		    <li>
		      <a href="how-to-make-machines-available.html">Make machines available</a>
		    </li>
		    <li>
		      <a href="how-to-customise-machines.html">Customise machines</a>
		    </li>
		    <li>
		      <a href="how-to-put-machines-to-work.html">Put machines to work</a>
		    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-use-virtual-machines.html">Use virtual machines</a></summary>
		  <ul>
		    <li>
		      <a href="how-to-set-up-lxd.html">Set up LXD</a>
		    </li>
		    <li>
		      <a href="how-to-manage-vm-hosts.html">Manage VM hosts</a>
		    </li>
		    <li>
		      <a href="how-to-manage-virtual-machines.html">Manage virtual machines</a>
		    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
                  <summary><a href="how-to-label-devices.html">Label devices</a></summary>
		  <ul>
		    <li>
		      <a href="how-to-tag-machines.html">Tag machines</a>
		    </li>
		    <li>
		      <a href="how-to-annotate-machines.html">Annotate machines</a>
		    </li>
		    <li>
		      <a href="how-to-use-machine-tags.html">Use machine tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-controller-tags.html">Use controller tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-storage-tags.html">Use storage tags</a>
		    </li>
		    <li>
		      <a href="how-to-use-network-tags.html">Use network tags</a>
		    </li>
		  </ul>
		</details>
              </li>
	      <li>
		<details>
                  <summary><a href="how-to-secure-maas.html">Secure MAAS</a></summary>
		  <ul>
		    <li>
		      <a href=.html"how-to-improve-maas-security.html">Improve MAAS security</a>
		    </li>
		    <li>
		      <a href="how-to-manage-user-accounts.html">Manage user accounts</a>
		    </li>
		    <li>
		      <a href="how-to-enable-maas-native-tls.html">Enable MAAS native TLS</a>
		    </li>
		    <li>
		      <a href="how-to-use-hashicorp-vault-with-maas.html">Use Vault with MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-set-up-an-air-gapped-maas.html">Set up an air-gapped MAAS</a>
		    </li>
		  </ul>
		</details>
              </li>
	      <li>
		<details>
                  <summary><a href="how-to-operate-maas.html">Operate MAAS</a></summary>
		  <ul>
		    <li>
		      <a href=.html"how-to-find-machines.html">Find machines</a>
		    </li>
		    <li>
		      <a href="how-to-back-up-maas.html">Back up MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-monitor-maas.html">Monitor MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-audit-maas.html">Audit MAAS</a>
		    </li>
		    <li>
		      <a href="how-to-troubleshoot-maas">Troubleshoot MAAS</a>
		    </li>
		  </ul>
		</details>
              </li>
	      <li>
		<details>
                  <summary><a href="how-to-give-and-receive-help.html">Give and receive help</a></summary>
		  <ul>
		    <li>
		      <a href=.html"how-to-use-the-maas-discourse-forum.html">Use our discourse forum</a>
		    </li>
		    <li>
		      <a href="https://ubuntu.com/pro">Get support</a>
		    </li>
		    <li>
		      <a href="how-to-request-new-features.html">Request new features</a>
		    </li>
		    <li>
		      <a href="how-to-review-and-report-bugs.html">Review and report bugs</a>
		    </li>
		    <li>
		      <a href="how-to-contribute-documentation.html">Contribute documentation</a>
		    </li>
		  </ul>
		</details>
              </li>
            </ul>
          </details>
	</li>
	<hr style="margin-top:15px;">
	<li>
          <details>
            <summary><a href="reference.html">Reference</a></summary>
            <ul>
	      <details>
		<summary><a href="maas-release-notes.html">Release notes</a></summary>
		<ul>
		  <li>
		    <a href="what-is-new-with-maas-3-4.html">MAAS 3.4 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-3-3.html">MAAS 3.3 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-3-2.html">MAAS 3.2 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-3-1.html">MAAS 3.1 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-3-0.html">MAAS 3.0 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-2-9.html">MAAS 2.9 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-2-8.html">MAAS 2.8 release notes</a>
              	  </li>
		  <li>
              	    <a href="what-is-new-with-maas-2-7.html">MAAS 2.7 release notes</a>
              	  </li>
		</ul>
	      </details>
              <li>
		<details>
                  <summary><a href="general-reference.html">General</a></summary>
		  <ul>
		    <li>
		      <a href="installation-requirements.html">Installation requirements</a>
		    </li>
		    <li>
		      <a href="maas-settings-reference.html">MAAS settings</a>
		    </li>
		    <li>
		      <a href="https://launchpad.net/maas">Source code</a>
		    </li>
		    <li>
		      <a href="maas-documentation-style-guide.html">Doc style guide</a>
		    </li>
		    <li>
		      <a href="maas-glossary.html">Glossary</a>
		    </li>
		    <li>
		      <a href="https://ubuntu.com/community/code-of-conduct">Code of conduct</a>
		    </li>
		  </ul>
		</details>
	      </li>
              <li>
		<details>
		  <summary><a href="api.html">API</a></summary>
		  <ul>
		    <li>
                      <a href="api-authentication-reference.html">API authentication</a>
                    </li>
		    <li>
                      <a href="python-api-client-reference.html">Python API client</a>
                    </li>
		    <li>
                      <a href="/docs/api">API documentation</a>
                    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
		  <summary><a href="scripts-reference.html">Scripts</a></summary>
		  <ul>
		    <li>
                      <a href="commissioning-scripts-reference.html">Commissioning scripts</a>
                    </li>
		    <li>
                      <a href="hardware-test-scripts-reference.html">Hardware test scripts</a>
                    </li>
		    <li>
                      <a href="maas-terraform-reference.html">Terraform</a>
                    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
		  <summary><a href="log-reference.html">Logging</a></summary>
		  <ul>
		    <li>
                      <a href="event-logs-reference.html">Event logs</a>
                    </li>
		    <li>
                      <a href="audit-event-logs-reference.html">Audit event logs</a>
                    </li>
		    <li>
                      <a href="commissioning-logs-reference.html">Commissioning logs</a>
                    </li>
		    <li>
                      <a href="testing-logs-reference.html">Testing logs</a>
                    </li>
		  </ul>
		</details>
              </li>
              <li>
		<details>
		  <summary><a href="machine-parameters-reference.html">machine-parameters</a></summary>
		  <ul>
		    <li>
                      <a href=.html"power-drivers-reference.html">Power drivers</a>
                    </li>
		    <li>
                      <a href="storage-layouts-reference.html">Storage layouts</a>
                    </li>
		    <li>
                      <a href="device-labelling-reference.html">Device labelling</a>
                    </li>
		  </ul>
		</details>
              </li>
	    </ul>
	  </details>
	</li>
	<hr style="margin-top:15px;">
	<li>
	  <details>
	    <summary><a href="explanation.html">Explanation</a></summary>
	    <ul>
	      <li>
		<a href="about-maas.html">About MAAS</a>
	      </li>
	      <li>
		<details>
		  <summary>Networking</summary>
		  <ul>
		    <li>
		      <a href="about-maas-networks.html">MAAS networks</a>
		    </li>
		    <li>
		      <a href="about-tcp-ip-networks.html">TCP/IP primer</a>
		    </li>
		    <li>
		      <a href="about-dhcp.html">DHCP primer</a>
		    </li>
		    <li>
		      <a href="about-cloud-networking.html">Cloud networking primer</a>
		    </li>
		  </ul>
		</details>
	      </li>
	      <li>
		<a href="about-images.html">Images</a>
              </li>
	      <li>
		<details>
		  <summary>Controllers</summary>
		  <ul>
		    <li>
		      <a href="about-region-and-rack-controllers.html">Region and rack controllers</a>
		    </li>
		    <li>
		      <a href="about-high-availability.html">High availability</a>
		    </li>
		  </ul>
		</details>
	      </li>
	      <li>
		<details>
		  <summary>Machines and devices</summary>
		  <ul>
		    <li>
		      <a href="about-machines.html">Machines</a>
		    </li>
		    <li>
		      <a href="about-virtual-machines.html">Virtual machines</a>
		    </li>
		    <li>
		      <a href="device-labels.html">Device labels</a>
		    </li>
		  </ul>
		</details>
	      </li>
	      <li>
		<details>
		  <summary>Events and logging</summary>
		  <ul>
		    <li>
		      <a href="about-maas-events.html">MAAS events</a>
		    </li>
		    <li>
		      <a href="about-audit-events.html">Audit events</a>
		    </li>
		    <li>
		      <a href="about-log-files.html">MAAS logging</a>
		    </li>
		    <li>
		      <a href="about-maas-security.html">MAAS security</a>
		    </li>
		    <li>
		      <a href="about-maas-performance.html">MAAS performance</a>
		    </li>
		    <li>
		      <a href="about-ansible.html">Ansible</a>
		    </li>
		  </ul>
		</details>
	      </li>
	    </ul>
	  </details>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>How to use standard images</h1><!-- "How to use standard images" -->
<p>MAAS is only useful once it has images available to provision its nodes. Therefore, one key post-install task is to select and import images from the boot source. Once MAAS imports images, it will update them on an hourly basis, via a default sync mechanism.  This page explains how to select and import the images that MAAS requires to provision its nodes.</p>
<p>You can tell MAAS to sync images hourly, at the region level.  See <a href="how-to-acquire-images.html#boot-image-sources">Boot image sources</a>) for more details. We highly recommended syncing images hourly. Syncing at the rack controller level (from regiond) occurs every 5 min and cannot be disabled.</p>
<p>This article will help you learn:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li><a href="try-out-the-maas-cli.html">How to get started with the MAAS CLI</a></li>
<li><a href="#heading--list-boot-sources">How to list boot sources</a></li>
<li><a href="#heading--select-image">How to select images</a></li>
<li><a href="#heading--list-image-selections">How to list image selections</a></li>
<li><a href="#heading--import-newly-selected-images">How to import newly-selected images</a></li>
<li><a href="#heading--list-currently-available-images">How to list currently available images</a></li>
<li><a href="#heading--delete-a-boot-source">How to delete a boot source</a></li>
<li><a href="#heading--edit-a-boot-source">How to edit a boot source</a></li>
</ul>
<p>You can also <a href="how-to-mirror-images-locally.html">mirror images locally</a>, build your own <a href="how-to-customise-images.html">custom images</a>, or even work with <a href="how-to-employ-vmware-images.html">VMWare images</a>.  And there&rsquo;s some <a href="how-to-acquire-images.html">background info on images</a> available if you need it.</p>
<p><a href="#heading--list-boot-sources"><h2 id="heading--list-boot-sources">How to list boot sources</h2></a></p>
<p>If you want to download boot sources, i.e., the locations from which you may download images, try the following:</p>
<pre><code class="language-bash">maas $PROFILE boot-sources read
</code></pre>
<p><strong>NOTE:</strong> 
Although multiple boot sources may be listed, MAAS can only practically work with a single boot source.</p>
<p><a href="#heading--select-image"><h2 id="heading--select-image">How to select images</h2></a></p>
<p>Use the <code>boot-source-selections</code> command to select images from a boot source. After selecting new images, you will need to <a href="#heading--import-newly-selected-images">import</a> them.</p>
<pre><code class="language-bash">maas $PROFILE boot-source-selections create $SOURCE_ID \
    os=&quot;ubuntu&quot; release=&quot;$SERIES&quot; arches=&quot;$ARCH&quot; \
    subarches=&quot;$KERNEL&quot; labels=&quot;*&quot;
</code></pre>
<p>For example, to select all kernels for 64-bit Trusty from a boot source with an id of &lsquo;1&rsquo;:</p>
<pre><code class="language-bash">maas $PROFILE boot-source-selections create 1 \
    os=&quot;ubuntu&quot; release=&quot;trusty&quot; arches=&quot;amd64&quot; \
    subarches=&quot;*&quot; labels=&quot;*&quot;
</code></pre>
<p><a href="#heading--hardware-enablement-hwe"><h3 id="heading--hardware-enablement-hwe">Hardware enablement (HWE)</h3></a></p>
<p>For example, to get just the latest amd64 HWE kernel available for Trusty, which, at time of writing, is from Xenial:</p>
<pre><code class="language-bash">maas $PROFILE boot-source-selections create 1 \
    os=&quot;ubuntu&quot; release=&quot;trusty&quot; arches=&quot;amd64&quot; \
    subarches=&quot;hwe-x&quot; labels=&quot;*&quot;
</code></pre>
<p>For Xenial kernels (and starting with MAAS 2.1), notation has changed. To select the latest amd64 HWE kernel available for Xenial:</p>
<pre><code class="language-bash">maas $PROFILE boot-source-selections create 1 \
    os=&quot;ubuntu&quot; release=&quot;xenial&quot; arches=&quot;amd64&quot; \
    subarches=&quot;hwe-16.04&quot; labels=&quot;*&quot;
</code></pre>
<p><a href="#heading--list-image-selections"><h2 id="heading--list-image-selections">How to list image selections</h2></a></p>
<p>To list image selections for a boot source:</p>
<pre><code class="language-bash">maas $PROFILE boot-source-selections read $SOURCE_ID
</code></pre>
<p><a href="#heading--import-newly-selected-images"><h2 id="heading--import-newly-selected-images">How to import newly-selected images</h2></a></p>
<p>To import newly-selected images (boot resources):</p>
<pre><code class="language-bash">maas $PROFILE boot-resources import
</code></pre>
<p>Once newly-selected images are imported, a sync mechanism is enabled (by default) to keep them up to date. The refresh time interval is 60 minutes.</p>
<p>Available images resulting from this action are reflected in the web UI.</p>
<p><a href="#heading--list-currently-available-images"><h2 id="heading--list-currently-available-images">How to list currently available images</h2></a></p>
<p>To list currently available/imported images (boot resources):</p>
<pre><code class="language-bash">maas $PROFILE boot-resources read
</code></pre>
<p><a href="#heading--delete-a-boot-source"><h2 id="heading--delete-a-boot-source">How to delete a boot source</h2></a></p>
<p>To delete a boot source (the location from which you can download images): </p>
<pre><code class="language-bash">maas $PROFILE boot-source delete $SOURCE_ID
</code></pre>
<p>If you delete the sole boot source, then the fields &lsquo;Sync URL&rsquo; and &lsquo;Keyring Path&rsquo; in the web UI will take on null values.</p>
<p><a href="#heading--edit-a-boot-source"><h2 id="heading--edit-a-boot-source">How to edit a boot source</h2></a></p>
<p>You can edit an existing boot source by changing the GPG keyring file ($KEYRING_FILE) and the location ($URL).</p>
<p>Update the boot source:</p>
<pre><code class="language-bash">maas $PROFILE boot-source update $SOURCE_ID \
    url=$URL keyring_filename=$KEYRING_FILE
</code></pre>
<p>At this time MAAS only supports a boot source containing official MAAS images. As a result, you can only edit a boot source if you have set up a mirror of its images. The location can change, but the keyring remains constant:</p>
<p>KEYRING_FILE=/usr/share/keyrings/ubuntu-cloudimage-keyring.gpg</p>
<p><a href="#heading--add-a-boot-source"><h2 id="heading--add-a-boot-source">How to add a boot source</h2></a></p>
<p><strong>NOTE:</strong> 
To avoid unnecessary complexity, you should probably delete any existing boot sources before adding a new one.</p>
<p>Presented below are a couple of use cases for adding a boot source:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>Use a local image mirror (official images)</li>
<li>If you deleted the default image, recreate it</li>
</ul>
<p>The general syntax is:</p>
<pre><code class="language-bash">maas $PROFILE boot-sources create \
    url=$URL keyring_filename=$KEYRING_FILE
</code></pre>
<p>The output will include a new numeric ID that identifies the boot source ($SOURCE_ID).</p>
<p>Since MAAS can only practically work with a single boot source, so you will need to delete any existing sources. Note that the location (URL) is the only variable. The only supported keyring is:</p>
<p>KEYRING_FILE=/usr/share/keyrings/ubuntu-cloudimage-keyring.gpg</p>
<p>If you added a sole boot source, then the fields &lsquo;Sync URL&rsquo; and &lsquo;Keyring Path&rsquo; in the web UI will reflect its values.</p>
<p><a href="#heading--using-a-local-image-mirror"><h3 id="heading--using-a-local-image-mirror">How to use a local image mirror</h3></a></p>
<p>Once the mirror is set up according to <a href="how-to-mirror-images-locally.html">Local image mirror</a> it is just a matter of specifying the mirror location (URL). Since the images come from the default source, you should use the default keyring. If you are following the above mirror document, the variable values should be:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>URL=https://$MIRROR/maas/images/ephemeral-v3/stable/</li>
<li>KEYRING_FILE=/usr/share/keyrings/ubuntu-cloudimage-keyring.gpg</li>
</ul>
<p>Where $MIRROR is the mirror server&rsquo;s hostname or IP address.</p>
<p><a href="#heading--recreate-the-default-boot-source"><h3 id="heading--recreate-the-default-boot-source">How to recreate the default boot source</h3></a></p>
<p>Recreate the default boot source if it was ever deleted using the following variable values:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>URL=https://images.maas.io/ephemeral-v3/stable/</li>
<li>KEYRING_FILE=/usr/share/keyrings/ubuntu-cloudimage-keyring.gpg</li>
</ul>
    </div>
  </body>
</html>