<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/how-to-install-and-use-rbac-with-maas.html">
	  UI-only
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  &nbsp;CLI-only&nbsp;
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <p/>
      <strong>
	  Tutorials
      </strong>
      <ul>
	<li>
	  <a href="get-started-with-maas.html">
	    Get started with MAAS
	  </a>
	</li>
	<li>
	  <a href="maas-cli-tutorial.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="create-a-custom-image.html">
	    Create a custom image
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	  How to get MAAS running
      </strong>
      <ul>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	  How to configure networking
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-networks.html">
	    Manage networks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-ip-addresses.html">
	    Manage IP addresses
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-tls-encryption.html">
	    Enable TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones
	  </a>
	</li>
      </ul>
      <strong>
	  How to choose images
      </strong>
      <ul>
	<li>
	  <a href="how-to-import-images.html">
	    Import images
	  </a>
	</li>
	<li>
	  <a href="how-to-custom-images.html">
	    Create custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vmware-images.html">
	    Manage VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	  How to deploy MAAS
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-controllers.html">
	    Manage controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-machines.html">
	    Manage machines
	  </a>
	</li>
	<li>
	  <a href="how-to-deploy-machines.html">
	    Commission and deploy machines
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vm-hosts.html">
	    Manage VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vms.html">
	    Manage VMs
	  </a>
	</li>
	<li>
	  <a href="how-to-use-lxd.html">
	    Use LXD
	  </a>
	</li>
      </ul>
      <strong>
	  How to use tags
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-tags.html">
	    Work with tags
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-annotations.html">
	    Work with annotations
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
      </ul>
      <strong>
	  How to operate MAAS
      </strong>
	<ul>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
	  <li>
	    <a href="how-to-set-up-maas-metrics.html">
	      Set up MAAS metrics
	    </a>
	  </li>
	  <li>
	    <a href="how-to-work-with-audit-event-logs.html">
	      Work with audit event logs
	    </a>
	  </li>
	<li>
	  <a href="how-to-use-maas-in-an-air-gapped-environment.html">
	    Use air-gapped MAAS
	  </a>
	</li>
	  <li>
	  <a href="how-to-back-up-maas.html">
	    Back up MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-secure-maas.html">
	    Secure MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage users
	  </a>
	</li>
	<li>
	  <a href="how-to-search-maas.html">
	    Search MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade older versions
	  </a>
	</li>
      </ul>
      <strong>
	  Reference
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="maas-logging-reference.html">
	    Log files
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event log reference
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="maas-concepts-and-terms-reference.html">
	    Concepts & terms
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Getting help
	  </a>
	</li>
      </ul>
      <strong>
	  Explanations
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    MAAS
	  </a>
	</li>
	<li>
	  <a href="about-tcp-ip-networks.html">
	    TCP/IP networks
	  </a>
	</li>
	<li>
	  <a href="about-cloud-networks.html">
	    Cloud networks
	  </a>
	</li>
	<li>
	  <a href="about-dhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="about-networking.html">
	    MAAS networking
	  </a>
	</li>
	<li>
	  <a href="about-images.html">
	    Images
	  </a>
	</li>
	<li>
	  <a href="about-creating-custom-images.html">
	    Custom images
	  </a>
	</li>
	<li>
	  <a href="about-controllers.html">
	    Controllers
	  </a>
	</li>
	<li>
	  <a href="about-machines.html">
	    Machines
	  </a>
	</li>
	<li>
	  <a href="about-customising-machines.html">
	    Customising machines
	  </a>
	</li>
	<li>
	  <a href="about-vm-hosting.html">
	    VM hosting
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
  <h1>How to install and use RBAC with MAAS</h1><!-- "How to install and use RBAC with MAAS" -->

<p>[4] As a MAAS RBAC administrator, I want to properly set up the environment for Candid and RBAC to be used.
As an RBAC administrator, I need step-by-step procedures that guide me through pre-installation configuration.
Acceptance criteria
A user has detailed procedures for verifying that a compatible authentication system is installed and working.
A user has detailed instructions for ensuring that valid certificates can be generated and used as needed for Candid to communicate over HTTPS.
Work items:
Provide detailed instructions about which authentication systems are compatible with RBAC, how they must be configured, and how to verify that they are properly configured.<br>
Provide detailed instructions regarding the CA and certificates needed, as well as instructions for verifying that they are properly configured.
[5] As a MAAS RBAC administrator, I want to properly install and configure RBAC and Candid.
As an RBAC administrator, I need step-by-step procedures that guide me through the process of installing RBAC and Candid.
Acceptance criteria
A user has detailed instructions for installing and enabling Candid. 
A user has detailed instructions for configuring and loading Candid.
A user has detailed procedures for obtaining PPA credentials and installing RBAC.
A user has detailed instructions for setting up, configuring, and loading RBAC.
A user has detailed instructions for logging into RBAC and verifying correct setup and operation.
Work items:
Provide detailed instructions about Candid installation.
Provide detailed instructions for configuring Candid via /var/snap/candid/current/config.yaml, starting Candid, editing /root/admin.keys to have the correct URL for Candid, and creating the necessary credentials, including a self-signed certificate for Candid.
Provide detailed instructions for obtaining PPA credentials, including necessary contact information and/or links.
Provide indirect instructions on how to login to Launchpad, visit your private PPA, set the necessary credentials, add your private PPA, and install the RBAC package.
Provide detailed instructions about how to pass the Candid cert to RBAC; define RBAC cert, public key, and CA via SSL; create the appropriate credentials; configure RBAC to use these credentials; verify correct operation of the service-URL; and create an RBAC administrative user.
[6] As a MAAS RBAC administrator, I want to properly connect MAAS to RBAC and establish baseline test users.
As an RBAC administrator, I need step-by-step procedures that guide me through the process of making MAAS talk to RBAC successfully.
Acceptance criteria
A user has detailed instructions for configuring MAAS to use RBAC, and logging in. 
A user has detailed instructions for creating (or using existing) resource pools.
A user has detailed procedures for creating test users.
A user has detailed instructions for assigning test users to resource pools.
A user has detailed procedures for verifying that RBAC is working correctly with MAAS.
Work items:
Provide detailed instructions about how to configure MAAS to use RBAC, including defining the service name and URL of the RBAC service, along with a login procedure that verifies that the RBAC-MAAS connection is working correctly.
Provide detailed instructions for creating new resource pools, or provide a procedure for using existing resource pools.
Provide detailed instructions for creating test users, or provide a procedure for using existing test users already established.
Provide instructions on how to associate test users with resource pools.
Provide detailed instructions for using the RBAC test cases created thus far to verify that RBAC is working correctly with MAAS.
[7] As a MAAS RBAC administrator, I want to understand how to operate and maintain RBAC.
As an RBAC administrator, I need step-by-step procedures that guide me through the various day-to-day aspects of RBAC components, services, groups, roles, and permissions.
Acceptance criteria
A user has detailed instructions for using and configuring services. 
A user has detailed instructions for using and configuring scopes. 
A user has detailed instructions for assigning roles to users.
A user has a detailed procedure for properly matching permissions with roles, scopes, and services. 
A user has detailed instructions for navigating and changing the views in RBAC.
A user has detailed procedures for adding, editing, removing, and reassigning various user aspects of RBAC wrt MAAS, including an understanding of when changes are actually applied (e.g., the way that some of the screens operate like rollback buffers).
A user has detailed instructions for dealing with non-machine-related attributes, such as DNS, availability zones, settings, and images using RBAC.
Work items:
Provide detailed instructions about MAAS services, as exposed in RBAC, and how they can be manipulated and configured.
Provide detailed instructions about scopes, and how they should be configured and applied.
Provide detailed instructions about the way RBAC tabulates roles, services, etc., including the way the hierarchy flows from left to right, how to change views, and how to manipulate items in those views.
Provide detailed procedures for managing the relationships between roles, permissions, users, groups, and resource pools, including how to add, edit, remove, and reassign them; explain how changes are “buffered”, i.e., not implemented until a separate choice is made.
Provide detailed instructions for addressing the various non-machine-related components of MAAS that are exposed in RBAC.
[8] As a MAAS RBAC administrator, operator, or auditor, I want to understand how to use RBAC logging to review user actions.
As an RBAC administrator, operator, or auditor, I need step-by-step procedures that guide me through the process of reviewing, analyzing, and correlating log entries.
Acceptance criteria
A user has detailed instructions for accessing RBAC logs. 
A user has detailed instructions for post-processing RBAC logs, including built-in filtering tools and command-line processing of exported logs. 
A user has detailed instructions for correlating actions and events with users, roles, and permissions.
Work items:
Provide detailed instructions about RBAC logs, how to find them, how to access them, and how to export them.
Provide detailed instructions for RBAC logs using built-in filtering capability.
Provide suggestions and examples for analyzing RBAC logs using command line tools on exported log files.
Provide detailed procedures for correlating user actions and events with the correct users, roles, and permissions.</p>
    </div>
  </body>
</html>