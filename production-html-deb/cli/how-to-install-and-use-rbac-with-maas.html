<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/how-to-install-and-use-rbac-with-maas.html">
	  UI-only
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  &nbsp;CLI-only&nbsp;
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Home
	</a>
      </strong>
      <p/>
      <strong>
	  Tutorials
      </strong>
      <ul>
	<li>
	  <a href="get-started-with-maas.html">
	    Get started with MAAS
	  </a>
	</li>
	<li>
	  <a href="maas-cli-tutorial.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="create-a-custom-image.html">
	    Create a custom image
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	  How to get MAAS running
      </strong>
      <ul>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshooting
	  </a>
	</li>
      </ul>
      <strong>
	  How to configure networking
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-networks.html">
	    Manage networks
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-ip-addresses.html">
	    Manage IP addresses
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-tls-encryption.html">
	    Enable TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones
	  </a>
	</li>
      </ul>
      <strong>
	  How to choose images
      </strong>
      <ul>
	<li>
	  <a href="how-to-import-images.html">
	    Import images
	  </a>
	</li>
	<li>
	  <a href="how-to-custom-images.html">
	    Create custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vmware-images.html">
	    Manage VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	  How to deploy MAAS
      </strong>
      <ul>
	<li>
	  <a href="how-to-manage-controllers.html">
	    Manage controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-machines.html">
	    Manage machines
	  </a>
	</li>
	<li>
	  <a href="how-to-deploy-machines.html">
	    Commission and deploy machines
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vm-hosts.html">
	    Manage VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-vms.html">
	    Manage VMs
	  </a>
	</li>
	<li>
	  <a href="how-to-use-lxd.html">
	    Use LXD
	  </a>
	</li>
      </ul>
      <strong>
	  How to use tags
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-tags.html">
	    Work with tags
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-annotations.html">
	    Work with annotations
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
      </ul>
      <strong>
	  How to operate MAAS
      </strong>
	<ul>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
	  <li>
	    <a href="how-to-set-up-maas-metrics.html">
	      Set up MAAS metrics
	    </a>
	  </li>
	  <li>
	    <a href="how-to-work-with-audit-event-logs.html">
	      Work with audit event logs
	    </a>
	  </li>
	<li>
	  <a href="how-to-use-maas-in-an-air-gapped-environment.html">
	    Use air-gapped MAAS
	  </a>
	</li>
	  <li>
	  <a href="how-to-back-up-maas.html">
	    Back up MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-secure-maas.html">
	    Secure MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage users
	  </a>
	</li>
	<li>
	  <a href="how-to-search-maas.html">
	    Search MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade older versions
	  </a>
	</li>
      </ul>
      <strong>
	  Reference
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="maas-logging-reference.html">
	    Log files
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event log reference
	  </a>
	</li>
	<li>
	  <a href="api.html">
	    API documentation
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="maas-concepts-and-terms-reference.html">
	    Concepts & terms
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Getting help
	  </a>
	</li>
      </ul>
      <strong>
	  Explanations
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    MAAS
	  </a>
	</li>
	<li>
	  <a href="about-tcp-ip-networks.html">
	    TCP/IP networks
	  </a>
	</li>
	<li>
	  <a href="about-cloud-networks.html">
	    Cloud networks
	  </a>
	</li>
	<li>
	  <a href="about-dhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="about-networking.html">
	    MAAS networking
	  </a>
	</li>
	<li>
	  <a href="about-images.html">
	    Images
	  </a>
	</li>
	<li>
	  <a href="about-creating-custom-images.html">
	    Custom images
	  </a>
	</li>
	<li>
	  <a href="about-controllers.html">
	    Controllers
	  </a>
	</li>
	<li>
	  <a href="about-machines.html">
	    Machines
	  </a>
	</li>
	<li>
	  <a href="about-customising-machines.html">
	    Customising machines
	  </a>
	</li>
	<li>
	  <a href="about-vm-hosting.html">
	    VM hosting
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
  <h1>How to install and use RBAC with MAAS</h1><!-- "How to install and use RBAC with MAAS" -->

<p>Prologue text that explains what this document is about.</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>
<p>How to set up identity management for RBAC 
[4] As a MAAS RBAC administrator, I want to properly set up the environment for Candid and RBAC to be used.
As an RBAC administrator, I need step-by-step procedures that guide me through pre-installation configuration.
<strong> How to set up and install identity management
</strong> How to install and enable Candid
A user has detailed instructions for installing and enabling Candid.
Provide detailed instructions about Candid installation.
<strong> How to configure and load Candid
A user has detailed instructions for configuring and loading Candid.
Provide detailed instructions for configuring Candid via /var/snap/candid/current/config.yaml, starting Candid, editing /root/admin.keys to have the correct URL for Candid, and creating the necessary credentials, including a self-signed certificate for Candid.
</strong> How to verify that ID server and Candid are working properly
A user has detailed procedures for verifying that a compatible authentication system is installed and working.
Provide detailed instructions about which authentication systems are compatible with RBAC, how they must be configured, and how to verify that they are properly configured.<br>
** How to ensure that Candid has proper certificates
A user has detailed instructions for ensuring that valid certificates can be generated and used as needed for Candid to communicate over HTTPS.
Provide detailed instructions regarding the CA and certificates needed, as well as instructions for verifying that they are properly configured.</p>
</li>
<li>
<p>How to install and configure RBAC
[5] As a MAAS RBAC administrator, I want to properly install and configure RBAC and Candid.
As an RBAC administrator, I need step-by-step procedures that guide me through the process of installing RBAC and Candid.
<strong> How to obtain PPA credentials and install RBAC
Provide detailed instructions for obtaining PPA credentials, including necessary contact information and/or links.
</strong> How to set up, configure, and load RBAC
Provide indirect instructions on how to login to Launchpad, visit your private PPA, set the necessary credentials, add your private PPA, and install the RBAC package.
** How to log into RBAC and verify correct setup and operation
Provide detailed instructions about how to pass the Candid cert to RBAC; define RBAC cert, public key, and CA via SSL; create the appropriate credentials; configure RBAC to use these credentials; verify correct operation of the service-URL; and create an RBAC administrative user.</p>
</li>
<li>
<p>How to connect MAAS and RBAC
[6] As a MAAS RBAC administrator, I want to properly connect MAAS to RBAC and establish baseline test users.
As an RBAC administrator, I need step-by-step procedures that guide me through the process of making MAAS talk to RBAC successfully.
Acceptance criteria
** How to configure MAAS to use RBAC and log in
Provide detailed instructions about how to configure MAAS to use RBAC, including defining the service name and URL of the RBAC service, along with a login procedure that verifies that the RBAC-MAAS connection is working correctly.</p>
</li>
</ul>
<p>** How to create (or use existing) resource pools
Provide detailed instructions for creating new resource pools, or provide a procedure for using existing resource pools.</p>
<p>** How to create test users
Provide detailed instructions for creating test users, or provide a procedure for using existing test users already established.</p>
<p>** How to assign test users to resource pools
Provide instructions on how to associate test users with resource pools.</p>
<p>** How to verify that RBAC is working correctly with MAAS
Provide detailed instructions for using the RBAC test cases created thus far to verify that RBAC is working correctly with MAAS.</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>How to operate and maintain RBAC
[7] As a MAAS RBAC administrator, I want to understand how to operate and maintain RBAC.
As an RBAC administrator, I need step-by-step procedures that guide me through the various day-to-day aspects of RBAC components, services, groups, roles, and permissions.
** How to use and configure services 
Provide detailed instructions about MAAS services, as exposed in RBAC, and how they can be manipulated and configured</li>
</ul>
<p>** How to use and configure scopes 
Provide detailed instructions about scopes, and how they should be configured and applied</p>
<p>** How to assign roles to users
Provide detailed instructions about the way RBAC tabulates roles, services, etc, including the way the hierarchy flows from left to right, how to change views, and how to manipulate items in those views</p>
<p>** How to properly match permissions with roles, scopes, and services 
Provide detailed instructions about the way RBAC tabulates roles, services, etc, including the way the hierarchy flows from left to right, how to change views, and how to manipulate items in those views</p>
<p>** How to navigate and change the views in RBAC
Provide detailed instructions about the way RBAC tabulates roles, services, etc, including the way the hierarchy flows from left to right, how to change views, and how to manipulate items in those views</p>
<p>** How to add, edit, remove, and reassign various user aspects of RBAC wrt MAAS, includ an understand of when changes are actually applied (eg, the way that some of the screens operate like rollback buffers)
Provide detailed procedures for managing the relationships between roles, permissions, users, groups, and resource pools, including how to add, edit, remove, and reassign them; explain how changes are “buffered”, ie, not implemented until a separate choice is made</p>
<p>** How to deal with non-machine-related attributes, such as DNS, availability zones, setts, and images use RBAC
Provide detailed instructions for address the various non-machine-related components of MAAS that are exposed in RBAC</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>How to audit user actions
[8] As a MAAS RBAC administrator, operator, or auditor, I want to understand how to use RBAC logging to review user actions
As an RBAC administrator, operator, or auditor, I need step-by-step procedures that guide me through the process of reviewing, analyzing, and correlating log entries
** How to access RBAC logs 
Provide detailed instructions about RBAC logs, how to find them, how to access them, and how to export them</li>
</ul>
<p>** How to post-process RBAC logs, including built-in filter tools and command-line process of exported logs
Provide detailed instructions for RBAC logs use built-in filter capability
Provide suggestions and examples for analyz RBAC logs us command line tools on exported log files</p>
<p>** How to correlate actions and events with users, roles, and permissions
Provide detailed procedures for correlating user actions and events with the correct users, roles, and permissions</p>
    </div>
  </body>
</html>