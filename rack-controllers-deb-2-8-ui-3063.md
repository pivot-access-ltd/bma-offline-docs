<!-- deb-2-7-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|CLI ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 deb-2-7-cli -->

<!-- deb-2-7-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ UI|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 deb-2-7-ui -->

<!-- deb-2-8-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|CLI ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 deb-2-8-cli -->

||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ UI|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|

<!-- deb-2-9-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|CLI ~ [UI](/t/rack-controllers/3065)|
 deb-2-9-cli -->

<!-- deb-2-9-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ UI|
 deb-2-9-ui -->

<!-- snap-2-7-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|CLI ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-7-cli -->

<!-- snap-2-7-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ UI|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-7-ui -->

<!-- snap-2-8-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|CLI ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-8-cli -->

<!-- snap-2-8-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ UI|[CLI](/t/rack-controllers/3058) ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-8-ui -->

<!-- snap-2-9-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|CLI ~ [UI](/t/rack-controllers/3059)|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-9-cli -->

<!-- snap-2-9-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/rack-controllers/3054) ~ [UI](/t/rack-controllers/3055)|[CLI](/t/rack-controllers/3056) ~ [UI](/t/rack-controllers/3057)|[CLI](/t/rack-controllers/3058) ~ UI|
|Packages|[CLI](/t/rack-controllers/3060) ~ [UI](/t/rack-controllers/3061)|[CLI](/t/rack-controllers/3062) ~ [UI](/t/rack-controllers/3063)|[CLI](/t/rack-controllers/3064) ~ [UI](/t/rack-controllers/3065)|
 snap-2-9-ui -->

A rack controller can connect to multiple VLANs, each from a different network interface. This configuration provides a scaling factor that can help as a network architecture grows in size.

#### Five questions you may have:

<!-- deb-2-7-cli
1. [How does MAAS communication work?](/t/maas-communication/2832)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2688#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-7-cli -->

<!-- deb-2-7-ui
1. [How does MAAS communication work?](/t/maas-communication/2833)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2689#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-7-ui -->

<!-- deb-2-8-cli
1. [How does MAAS communication work?](/t/maas-communication/2834)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2690#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-8-cli -->

1. [How does MAAS communication work?](/t/maas-communication/2835)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2691#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)

<!-- deb-2-9-cli
1. [How does MAAS communication work?](/t/maas-communication/2836)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2692#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-9-cli -->

<!-- deb-2-9-ui
1. [How does MAAS communication work?](/t/maas-communication/2837)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2683#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-9-ui -->

<!-- snap-2-7-cli
1. [How does MAAS communication work?](/t/maas-communication/2826)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2682#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-7-cli -->

<!-- snap-2-7-ui
1. [How does MAAS communication work?](/t/maas-communication/2827)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2683#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-7-ui -->

<!-- snap-2-8-cli
1. [How does MAAS communication work?](/t/maas-communication/2828)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2684#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-8-cli -->

<!-- snap-2-8-ui
1. [How does MAAS communication work?](/t/maas-communication/2829)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2685#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-8-ui -->

<!-- snap-2-9-cli
1. [How does MAAS communication work?](/t/maas-communication/2830)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2686#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-9-cli -->

<!-- snap-2-9-ui
1. [How does MAAS communication work?](/t/maas-communication/2831)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](/t/high-availability/2687#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-9-ui -->

<h2 id="heading--install-a-rack-controller">Install a rack controller</h2>

<!-- snap-2-7-cli snap-2-8-cli snap-2-9-cli deb-2-7-cli deb-2-8-cli deb-2-9-cli
To install and register a rack controller with the MAAS:

``` bash
sudo apt install maas-rack-controller
sudo maas-rack register
```

[note]
The register command is not required when you are adding a rack controller to a system that already houses an API server.
[/note]
snap-2-7-cli snap-2-8-cli snap-2-9-cli deb-2-7-cli deb-2-8-cli deb-2-9-cli -->

<!-- deb-2-7-cli deb-2-8-cli deb-2-9-cli
MAAS will ask for the URL of the region API server. If you provide a hostname, ensure it is resolvable. Next, MAAS will prompt you for the secret key, stored in file `/var/lib/maas/secret` on the API server.
deb-2-7-cli deb-2-8-cli deb-2-9-cli -->

<!-- snap-2-7-cli snap-2-8-cli snap-2-9-cli
MAAS will ask for the URL of the region API server. If you provide a hostname, ensure it is resolvable. Next, MAAS will prompt you for the secret key, stored in file `/var/snap/maas/common/maas/secret` on the API server.
snap-2-7-cli snap-2-8-cli snap-2-9-cli -->

<!-- snap-2-7-cli snap-2-8-cli snap-2-9-cli deb-2-7-cli deb-2-8-cli deb-2-9-cli
Based on the above, then, we could have also entered:

``` bash
sudo maas-rack register --url http://10.5.1.5:5240/MAAS \
    --secret fa847000e7cb681101d26e3477e6e39e
```
snap-2-7-cli snap-2-8-cli snap-2-9-cli deb-2-7-cli deb-2-8-cli deb-2-9-cli -->

Installing a rack controller consists of installing the rack controller software and then registering the rack controller with the region API server.  When MAAS installs a rack controller on the same host as the region API server, registration occurs automatically. 

Once registered, this extra rack controller will appear immediately alongside the primary controller in the web UI and begin to sync with it:

<a href="https://discourse.maas.io/uploads/default/original/1X/0a5f1d374a3e53235a83eb157163be49016e63b5.png" target = "_blank"><img src="https://discourse.maas.io/uploads/default/original/1X/0a5f1d374a3e53235a83eb157163be49016e63b5.png"></a> 

<h2 id="heading--list-rack-controllers">List rack controllers</h2>

<!-- deb-2-7-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2688) configurations.
 deb-2-7-cli -->

<!-- deb-2-7-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.7 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2689) configurations.
 deb-2-7-ui -->

<!-- deb-2-8-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2690) configurations.
 deb-2-8-cli -->

You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.8 CLI" link at the top of the page to find out how. Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2691) configurations.

<!-- deb-2-9-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2692) configurations.
 deb-2-9-cli -->

<!-- deb-2-9-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.9 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2693) configurations.
 deb-2-9-ui -->

<!-- snap-2-7-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2682) configurations.
 snap-2-7-cli -->

<!-- snap-2-7-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.7 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2683) configurations.
 snap-2-7-ui -->

<!-- snap-2-8-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2684) configurations.
 snap-2-8-cli -->

<!-- snap-2-8-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.8 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2685) configurations.
 snap-2-8-ui -->

<!-- snap-2-9-cli
You can also list and confirm all registered rack controllers:

``` bash
maas $PROFILE rack-controllers read | grep hostname | cut -d '"' -f 4
```

 Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2686) configurations.
 snap-2-9-cli -->

<!-- snap-2-9-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.9 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](/t/high-availability/2687) configurations.
 snap-2-9-ui -->

<div class="p-notification">
<p class="p-notification__response">If you are using VM nodes, you must ensure that the new rack controller can communicate with the VM host.</p>
</div>

<h2 id="heading--unregister-a-rack-controller">Unregister a rack controller</h2>

Most likely, you would only “unregister” an extra, unnecessary rack controller.  In this case, you need to <em>delete</em> it from the region API server; there is no ‘unregister’ command.

To do so, navigate to the ‘Controllers’ page of the web UI. Enter the controller’s page by clicking on the machine you want to delete and select ‘Delete’ from the drop-down (and then ‘Delete controller’). MAAS will do the right thing if the controller is used for DHCP HA; that is, the DHCP HA needs to be disabled.

Although similar, this is not the same as deletion. Here, you are deleting a machine that is a part of MAAS itself.

<div class="p-notification">
<p class="p-notification__response">Unless you remove the software on this machine, rebooting it will cause the machine to re-instate itself as a rack controller. This behaviour may change with future versions of MAAS.</p>
</div>