<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;
      <strong>Offline docs
      </strong>
      <a href="https://maas.io/docs">(switch to live docs)
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  UI-only
      </span>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../cli/how-to-tag-machines.html">
	  CLI-only
	</a>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation-25.html">
	  Home
	</a>
      </strong>
      <ul>
	<li>
	  <a href="what-is-new-with-maas.html">
	    Release notes
	  </a>
	</li>
	<li>
	  <a href="maas-installation-requirements.html">
	    Installation requirements
	  </a>
	</li>
	<li>
	  <a href="maas-glossary.html">
	    Glossary
	  </a>
	</li>
      </ul>
      <strong>
	<a href="basic-tutorials.html">
	  Basic tutorials
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-bootstrap-tutorial.html">
	    MAAS bootstrap tutorial
	  </a>
	</li>
	<li>
	  <a href="try-out-the-maas-cli.html">
	    Try out the MAAS CLI
	  </a>
	</li>
	<li>
	  <a href="custom-image-tutorial.html">
	    Custom image tutorial
	  </a>
	</li>
	<li>
	  <a href="using-jq-with-the-maas-cli.html">
	    Using jq with the MAAS CLI
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-get-started-with-maas.html">
	  How to get started with MAAS
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-spin-up-maas-with-ansible.html">
	    Spin up MAAS with Ansible
	  </a>
	</li>
	<li>
	  <a href="how-to-install-maas.html">
	    Install MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-upgrade-maas.html">
	    Upgrade MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-change-maas-settings.html">
	    Change MAAS settings
	  </a>
	</li>
	<li>
	  <a href="how-to-get-help.html">
	    Ask for help
	  </a>
	</li>
	<li>
	  <a href="how-to-request-a-feature.html">
	    Request a feature
	  </a>
	</li>
	<li>
	  <a href="how-to-report-a-bug.html">
	    Report a bug
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-set-up-networks.html">
	  How to set up networks
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-connect-maas-networks.html">
	    Connect MAAS networks
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-dhcp.html">
	    Enable DHCP
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-availability-zones.html">
	    Manage zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-acquire-images.html">
	  How to acquire images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-use-standard-images.html">
	    Use standard images
	  </a>
	</li>
	<li>
	  <a href="how-to-mirror-images-locally.html">
	    Mirror images locally
	  </a>
	</li>
	<li>
	  <a href="how-to-build-custom-images.html">
	    Build custom images
	  </a>
	</li>
	<li>
	  <a href="how-to-employ-vmware-images.html">
	    Employ VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-tune-controllers.html">
	  How to tune controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-adjust-your-controllers.html">
	    Adjust your controllers
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-high-availability.html">
	    Enable HA
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-physical-machines.html">
	  How to deploy physical machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-make-machines-available.html">
	    Make machines available
	  </a>
	</li>
	<li>
	  <a href="how-to-customise-machines.html">
	    Customise machines
	  </a>
	</li>
	<li>
	  <a href="how-to-put-machines-to-work.html">
	    Put machines to work
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-deploy-virtual-machines.html">
	  How to deploy virtual machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-set-up-lxd.html">
	    Set up LXD
	  </a>
	</li>
	<li>
	  <a href="how-to-create-vm-hosts.html">
	    Create VM hosts
	  </a>
	</li>
	<li>
	  <a href="how-to-create-and-manage-vms.html">
	    Create and manage VMs
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-label-and-find-machines.html">
	  How to label and find machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-tag-machines.html">
	    Tag machines
	  </a>
	</li>
	<li>
	  <a href="how-to-annotate-machines.html">
	    Annotate machines
	  </a>
	</li>
	<li>
	  <a href="how-to-use-machine-tags.html">
	    Use machine tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-controller-tags.html">
	    Use controller tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-storage-tags.html">
	    Use storage tags
	  </a>
	</li>
	<li>
	  <a href="how-to-use-network-tags.html">
	    Use network tags
	  </a>
	</li>
	<li>
	  <a href="how-to-find-machines.html">
	    Find machines
	  </a>
	</li>
      </ul>
      <strong>
	How to diagnose issues
      </strong>
      <ul>
	<li>
	  <a href="how-to-work-with-log-files.html">
	    Work with log files
	  </a>
	</li>
	<li>
	  <a href="how-to-work-with-audit-event-logs.html">
	    Work with audit event logs
	  </a>
	</li>
	<li>
	  <a href="how-to-troubleshoot-maas.html">
	    Troubleshoot MAAS
	  </a>
	</li>
      </ul>
      <strong>
	How to work securely
      </strong>
      <ul>
	<li>
	  <a href="how-to-improve-maas-security.html">
	    Improve MAAS security
	  </a>
	</li>
	<li>
	  <a href="how-to-enable-maas-native-tls.html">
	    Enable MAAS native TLS
	  </a>
	</li>
	<li>
	  <a href="how-to-set-up-an-air-gapped-maas.html">
	    Set up an air-gapped MAAS
	  </a>
	</li>
	<li>
	  <a href="how-to-manage-user-accounts.html">
	    Manage user accounts
	  </a>
	</li>
      </ul>
      <strong>
	How to operate reliably
      </strong>
      <ul>
	<li>
	  <a href="how-to-keep-maas-backed-up.html">
	    Keep MAAS backed up
	  </a>
	</li>
	<li>
	  <a href="how-to-observe-a-live-maas.html">
	    Observe a live MAAS
	  </a>
	</li>
      </ul>
      <strong>
	<a href="how-to-protect-your-secrets.html">
	How to protect your secrets
	</a>
      </strong>
      <ul>
	<li>
	  <a href="how-to-enable-vault.html">
	    Enable Vault
	  </a>
	</li>
	<li>
	  <a href="how-to-unseal-vault.html">
	    Unseal Vault
	  </a>
	</li>
      </ul>
      <strong>
	API reference
      </strong>
      <ul>
	<li>
	  <a href="api-authentication-reference.html">
	    API authentication
	  </a>
	</li>
	<li>
	  <a href="python-api-client-reference.html">
	    API client
	  </a>
	</li>
	<li>
	  <a href="../../api/docs">
	    API documentation
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-technical-reference.html">
	  MAAS technical reference
	</a>
      </strong>
      <ul>
	<li>
	  <a href="commissioning-scripts-reference.html">
	    Commissioning scripts
	  </a>
	</li>
	<li>
	  <a href="hardware-test-scripts-reference.html">
	    Hardware test scripts
	  </a>
	</li>
	<li>
	  <a href="audit-event-log-reference.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="maas-performance.html">
	    MAAS performance
	  </a>
	</li>
	<li>
	  <a href="power-management-reference.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="storage-layouts-reference.html">
	    Storage layouts
	  </a>
	</li>
	<li>
	  <a href="maas-terraform-provider-reference.html">
	    Terraform provider
	  </a>
	</li>
      </ul>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>How to tag machines</h1><!-- "How to tag machines" -->
<p><a href="how-to-label-and-find-machines.html#heading--about-tags">Tags</a> for different objects have similar purposes, but they aren&rsquo;t necessarily administered in the same way &ndash; so we&rsquo;ve included detailed articles for each tag type.  That said, many of the common operations regarding tags are performed in the same way.  This article will present some general, explanatory information, and then look at tag management steps that are the same (or very similar) across all types of MAAS tags.</p>
<p><a href="#heading--name-tags"><h2 id="heading--name-tags">How to name tags</h2></a></p>
<p>When working with tags, there are some universal rules you need to follow:</p>
<ol>
<li>Tag names can include any combination of alphabetic letters (a-zA-Z), numbers (0-9), dashes (-) and underscores (_).</li>
<li>Tag names can be a maximum of 256 characters in length.</li>
<li>Tag names <em>cannot</em> include spaces.</li>
</ol>
<p>In general, names that do not conform to these rules cannot be created.</p>
<p><a href="#heading--xpath-hardware-config-info"><h2 id="heading--xpath-hardware-config-info">How to download hardware configuration information</h2></a></p>
<p>To download hardware configuration information in XML format:</p>
<ol>
<li>
<p>Select <em>Machines</em>.</p>
</li>
<li>
<p>Select a machine which is allocated or deployed.</p>
</li>
<li>
<p>Select <em>Logs &gt;&gt; Installation output &gt;&gt; Download &gt;&gt; Machine output (XML)</em>.</p>
</li>
</ol>
<p>You can <a href="https://ezix.org/project/wiki/HardwareLiSter">learn more about these attributes</a><code>↗</code> if desired.  Note that:</p>
<ul style="margin-left:4px; list-style-type:disc;">
<li>Size and capacity can have various meanings depending on the device</li>
<li>The size of a node is always equal to its capacity</li>
<li>Serial refers to the device’s serial number, but is used to report the MAC address for network devices, GUID for disk partition.</li>
</ul>
<p>You can also find device classes from the same sources. </p>
<p><a href="#heading--how-to-create-automatic-tags"><h2 id="heading--how-to-create-automatic-tags">How to create automatic tags</h1></a></p>
<p>To create automatic tags:</p>
<ol>
<li>
<p>Select <em>Machines</em>.</p>
</li>
<li>
<p>Select <em>Tags</em>.</p>
</li>
<li>
<p>Select <em>Create new tag</em>.</p>
</li>
<li>
<p>Enter the <em>Tag name</em>.</p>
</li>
<li>
<p>Optionally enter a <em>Comment</em>.</p>
</li>
<li>
<p>Optionally enter <em>Kernel options</em>.</p>
</li>
<li>
<p>Enter an XPath-based <em>Definition</em>.  A tag is considered automatic when the definition field is filled with an XPath expression. The current version of our UI will only validate if your XPath expression is valid or not, but it will not show you which machines it will apply to before you create the tag.</p>
</li>
<li>
<p>Select <em>Save</em> to register your changes.</p>
</li>
</ol>
<p>Once an automatic tag is created the screen will initially show that 0 machines are tagged. That is because MAAS is running a background task to auto-apply the tag to matching machines. It can take some time to see that the number of machines tagged is populating. </p>
<p><strong>NOTE:</strong> 
Kernel options will be applied at boot time. So by default kernel options will not be applied to any machines until they are deployed. If machines are deployed before they are tagged, the kernel option will be applied when these machines are redeployed.</p>
<p><a href="#heading--how-to-update-automatic-tags"><h2 id="heading--how-to-update-automatic-tags">How to update the definition of a tag</h2></a></p>
<ol>
<li>
<p>Select <em>Machines</em>.</p>
</li>
<li>
<p>Select <em>Tags</em>.</p>
</li>
<li>
<p>Select the pencil icon on the right end of the tag&rsquo;s row.</p>
</li>
<li>
<p>Edit the <em>Definition</em>.</p>
</li>
<li>
<p>Select <em>Save</em> to register your changes.</p>
</li>
</ol>
<p>Keep in mind that when a new definition is updated, MAAS will re-tag all the machines that match with the new definition. This can take some time, since it is a background process. </p>
<p><a href="#heading--update-tag-kernel-options"><h2 id="heading--update-tag-kernel-options">How to update the kernel options on a tag</h2></a></p>
<p>To update the kernel options on a tag:</p>
<ol>
<li>
<p>Select <em>Machines</em>.</p>
</li>
<li>
<p>Select <em>Tags</em>.</p>
</li>
<li>
<p>Select the pencil icon on the right end of the tag&rsquo;s row.</p>
</li>
<li>
<p>Edit the <em>Kernel options</em>.</p>
</li>
<li>
<p>Select <em>Save</em> to register your changes.</p>
</li>
</ol>
<p>Kernel options can exist for both manual and automatic tags. However, they will be applied during boot time (commissioning and deploying).</p>
<p><strong>NOTE:</strong> 
If the tagged machines are deployed, the updated kernel option won’t apply until the machines are redeployed. We suggest that you release those machines prior to the update, then redeploy those machines when the kernel options of the tag are updated.</p>
<p><a href="#heading--unassign-tags-from-machines"><h2 id="heading--unassign-tags-from-machines">How to unassign tags from machines</h2></a></p>
<p>To unassign tags from machines:</p>
<ol>
<li>
<p>Select <em>Machines</em>.</p>
</li>
<li>
<p>Select the checkbox(es) next to the machine(s) you wish to untag.</p>
</li>
<li>
<p>Select <em>Take action &gt;&gt; Tag</em>.  A table of tags appears at the top of the screen.</p>
</li>
<li>
<p>For each tag you wish to unassign, select <em>Remove</em>.  The text will change to <em>Discard</em> with an <em>X</em> to the right.</p>
</li>
<li>
<p>If you want to undo a choice before saving, click the <em>X</em> to right of <em>Discard</em> to undo the proposed change.</p>
</li>
<li>
<p>When you&rsquo;re satisfied with your new tag configuration, select <em>Save</em> to finalize and register your choice(s).</p>
</li>
</ol>
<p><strong>NOTE:</strong> 
Automatic tags cannot be unassigned manually. You can either update or delete automatic tags.</p>
<p>You can also unassign tags individually by going to <em>Machines &gt;&gt; {machine-name} &gt;&gt; Configuration &gt;&gt; Tags &gt;&gt; Edit</em>. The <em>Tags</em> table functions exactly the same as what&rsquo;s described above.</p>
<p><a href="#heading--see-all-tagged-nodes"><h2 id="heading--see-all-tagged-nodes">How to see all tagged nodes</h2></a></p>
<p>To see how many nodes (Machines, controllers, devices) are tagged, search for GRUB_CMDLINE_LINUX_DEFAULT in the &ldquo;Installation output&rdquo; tab of the machine details page. That log should stay around for the lifetime of the deployment of the machine.  The log gets overwritten when you redeploy the machine.  For example:</p>
<pre><code class="language-nohighlight">GRUB_CMDLINE_LINUX_DEFAULT=&quot;sysrq_always_enabled dyndbg='file drivers/usb/* +p' console=tty1 console=ttyS0&quot;
</code></pre>
    </div>
  </body>
</html>