<!-- deb-2-7-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|CLI ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 deb-2-7-cli -->

<!-- deb-2-7-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ UI|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 deb-2-7-ui -->

<!-- deb-2-8-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|CLI ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 deb-2-8-cli -->

<!-- deb-2-8-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ UI|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 deb-2-8-ui -->

<!-- deb-2-9-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|CLI ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 deb-2-9-cli -->

<!-- deb-2-9-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ UI|
 deb-2-9-ui -->

<!-- snap-2-7-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|CLI ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 snap-2-7-cli -->

<!-- snap-2-7-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ UI|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 snap-2-7-ui -->

<!-- snap-2-8-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|CLI ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 snap-2-8-cli -->

<!-- snap-2-8-ui
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ UI|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 snap-2-8-ui -->

<!-- snap-2-9-cli
||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|CLI ~ [UI](/t/audit-event-logs-snap-2-9-ui/2315)|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|
 snap-2-9-cli -->

||2.7|2.8|2.9|
|-----:|:-----:|:-----:|:-----:|
|Snap|[CLI](/t/audit-event-logs-snap-2-7-cli/2310) ~ [UI](/t/audit-event-logs-snap-2-7-ui/2311)|[CLI](/t/audit-event-logs-snap-2-8-cli/2312) ~ [UI](/t/audit-event-logs-snap-2-8-ui/2313)|[CLI](/t/audit-event-logs-snap-2-9-cli/2314) ~ UI|
|Packages|[CLI](/t/audit-event-logs-deb-2-7-cli/2316) ~ [UI](/t/audit-event-logs-deb-2-7-ui/2317)|[CLI](/t/audit-event-logs-deb-2-8-cli/2318) ~ [UI](/t/audit-event-logs-deb-2-8-ui/2319)|[CLI](/t/audit-event-logs-deb-2-9-cli/2320) ~ [UI](/t/audit-event-logs-deb-2-9-ui/2321)|

There are many user-initiated events in MAAS that an administrator or a user may want to audit. These include someone updating the settings or changing a user's permissions. This page details how to query these events and includes examples of how to perform a query, and the type of data logs can provide.

#### Quick questions you may have:

* [How do I list audit events for all users?](/t/audit-event-logs/791#heading--list-audit-events-for-all-users)
* [How do I list audit events for a specific user?](/t/audit-event-logs/791#heading--list-audit-events-for-a-specific-user)
* [What are the types of audit event logs available?](/t/audit-event-logs/791#heading--types-of-audit-event-logs)

<h2 id="heading--list-audit-events-for-all-users">List audit events for all users</h2>

To list events for all users, use the following syntax:

``` bash
maas $PROFILE events query level=AUDIT
```

Note: Non-administrators will only see their own audit event logs listed.

The following is example output from the previous command, using admin as the MAAS profile:

``` no-highlight
Success.
Machine-readable output follows:
{
    "count": 1,
    "events": [
        {
            "username": "admin",
            "node": null,
            "hostname": "",
            "id": 2569,
            "level": "AUDIT",
            "created": "Thu, 01 Feb. 2018 22:28:18",
            "type": "Authorisation",
            "description": "User admin logged in."
        }
    ],
    "next_uri": "/MAAS/api/2.0/events/?op=query&level=AUDIT&after=2569",
    "prev_uri": "/MAAS/api/2.0/events/?op=query&level=AUDIT&before=2558"
}
```

The above output shows that there is currently only one audit event log for the user `admin`, and that MAAS created this log when they logged into the web UI.

<h2 id="heading--list-audit-events-for-a-specific-user">List audit events for a specific user</h2>

To list the audit event logs for a specific user that you have permissions for, supply the `owner=$USERNAME` parameter to the query command:

``` bash
maas $PROFILE events query level=AUDIT owner=$USERNAME
```

As there is only one audit event log in the database (as seen above), generate some more by performing these actions:

-   create new non-administrator user `johnnybegood` with `admin` user
-   logout of web UI as `admin` user and login with `johnnybegood` user
-   change password of the `johnnybegood` user
-   log back into the web UI (Django forces a re-login when currently logged in user changes their password).

Let's take a look and see what type of audit event logs we have now, filtering with `owner=johnnybegood` as shown in the following command:

``` bash
maas admin events query level=AUDIT owner=johnnybegood
```

``` bash
Success.
Machine-readable output follows:
{
    "count": 3,
    "events": [
        {
            "username": "johnnybegood",
            "node": null,
            "hostname": "",
            "id": 2877,
            "level": "AUDIT",
            "created": "Mon, 12 Feb. 2018 22:34:46",
            "type": "Authorisation",
            "description": "User 'johnnybegood' logged in."
        },
        {
            "username": "johnnybegood",
            "node": null,
            "hostname": "",
            "id": 2876,
            "level": "AUDIT",
            "created": "Mon, 12 Feb. 2018 22:34:35",
            "type": "Authorisation",
            "description": "Password changed for 'johnnybegood'."
        },
        {
            "username": "johnnybegood",
            "node": null,
            "hostname": "",
            "id": 2875,
            "level": "AUDIT",
            "created": "Mon, 12 Feb. 2018 22:33:56",
            "type": "Authorisation",
            "description": "User 'johnnybegood' logged in."
        }
    ],
    "next_uri": "/MAAS/api/2.0/events/?op=query&level=AUDIT&owner=johnnybegood&after=2877",
    "prev_uri": "/MAAS/api/2.0/events/?op=query&level=AUDIT&owner=johnnybegood&before=2875"
}
```

As we can see above, only audit event logs for the user `johnnybegood` are generated. These events show the following:

-   user for the event
-   whether the event is associated with a particular node
-   node's hostname
-   event id
-   level of the event
-   when MAAS creates the event
-   event type
-   event description

<h2 id="heading--types-of-audit-event-logs">Types of audit event logs available</h2>

Here is a list of the types of audit event logs that are currently supported by MAAS:

-   Password changes
-   Permission changes
-   API (OAuth) tokens created/deleted
-   Login and logouts
-   SSH keys imported from GitHub or Launchpad
-   SSL key changes
-   User profile changes
-   Commissioning script changes
-   Test script changes