<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/power-management.html">
	  &nbsp;UI-only&nbsp;
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  CLI-only
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="give-me-an-example-of-maas.html">
	    &ldquo;Give me an example&rdquo;
	  </a>
	</li>
	<li>
	  <a href="whats-new-in-maas.html">
	    What&rsquo;s new in 2.8
	  </a>
	</li>
	<li>
	  <a href="maas-requirements.html">
	    Requirements
	  </a>
	</li>
	<li>
	  <a href="maas-installation.html">
	    Installation
	  </a>
	</li>
	<li>
	  <a href="configuration-journey.html">
	    Configuration journey
	  </a>
	</li>
      <strong>
	<a href="controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-communication.html">
	    Communication
	  </a>
	</li>
	<li>
	  <a href="rack-controllers.html">
	    Rack controllers
	  </a>
	</li>
	<li>
	  <a href="region-controllers.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="high-availability.html">
	    High availability
	  </a>
	</li>
      </ul>
      <strong>
	<a href="machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="add-machines.html">
	    Add machines
	  </a>
	</li>
	<li>
	  <a href="power-management.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commission-machines.html">
	    Commission machines
	  </a>
	</li>
	<li>Testing
	</li>
	<li>
	  <a href="hardware-testing.html">
	    Hardware testing
	  </a>
	</li>
	<li>
	  <a href="network-testing.html">
	    Network testing
	  </a>
	</li>
	<li>
	  <a href="commissioning-and-hardware-testing-scripts.html">
	    Commissioning and hardware testing scripts
	  </a>
	</li>
	<li>
	  <a href="deploy-machines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="maas-tags.html">
	    Tags
	  </a>
	</li>
	<li>
	  <a href="custom-machine-setup.html">
	    Custom machine setup
	  </a>
	</li>
	<li>
	  <a href="kernel-boot-options.html">
	    Kernel boot options
	  </a>
	</li>
	<li>
	  <a href="resource-pools.html">
	    Resource pools
	  </a>
	</li>
	<li>
	  <a href="storage.html">
	    Storage
	  </a>
	</li>
	<li>
	  <a href="vmware-vmfs-datastores.html">
	    VMware VMFS datastores
	  </a>
	</li>
	<li>
	  <a href="ubuntu-kernels.html">
	    Ubuntu kernels
	  </a>
	</li>
      </ul>
      <strong>
	<a href="images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="select-and-import-images.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="local-image-mirror.html">
	    Local image mirror
	  </a>
	</li>
	<li>
	  <a href="vmware-images.html">
	    VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="subnet-management.html">
	    Subnet management
	  </a>
	</li>
	<li>
	  <a href="managing-dhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="ip-ranges.html">
	    IP ranges
	  </a>
	</li>
	<li>
	  <a href="proxy.html">
	    Proxy
	  </a>
	</li>
	<li>
	  <a href="ntp-services.html">
	    NTP
	  </a>
	</li>
	<li>
	  <a href="network-discovery.html">
	    Network discovery
	  </a>
	</li>
	<li>
	  <a href="ipv6-addressing.html">
	    IPv6
	  </a>
	</li>
	<li>
	  <a href="configuring-tls-encryption.html">
	    SSL
	  </a>
	</li>
	<li>
	  <a href="managing-stp.html">
	    STP
	  </a>
	</li>
	<li>
	  <a href="availability-zones.html">
	    Availability zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="vm-hosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="vm-host-networking.html">
	    VM host networking
	  </a>
	</li>
	<li>
	  <a href="adding-a-vm-host.html">
	    Add a VM host
	  </a>
	</li>
	<li>
	  <a href="vm-host-storage-pools.html">
	    VM host storage pools
	  </a>
	</li>
	<li>
	  <a href="creating-and-deleting-vms.html">
	    Creating and deleting VMs
	  </a>
	</li>
      </ul>
      <strong>Operations
      </strong>
      <ul>
	<li>
	  <a href="prometheus-metrics.html">
	    Prometheus metrics
	  </a>
	</li>
	<li>
	  <a href="backup.html">
	    Backup
	  </a>
	</li>
	<li>
	  <a href="hardening-your-maas-installation.html">
	    MAAS security
	  </a>
	</li>
	<li>
	  <a href="maas-logging.html">
	    Logging
	  </a>
	</li>
	<li>
	  <a href="commissioning-logs.html">
	    Commissioning logs
	  </a>
	</li>
	<li>
	  <a href="user-accounts.html">
	    User accounts
	  </a>
	</li>
	<li>
	  <a href="interactive-search.html">
	    Interactive search
	  </a>
	</li>
      </ul>
      <strong>
	<a href="concepts-and-terms.html">
	  Concepts &amp; terms
	</a>
      </strong>
      <ul>
	<li>
	  <a href="concepts-and-terms.html#heading--network-tutorial">
	    Brief network tutorial
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-cli.html">
	  CLI
	</a>
      </strong>
      <ul>
	<li>
	  <a href="common-cli-tasks.html">
	    The CLI cookbook
	  </a>
	</li>
	<li>
	  <a href="common-cli-tasks.html">
	    Common tasks
	  </a>
	</li>
	<li>
	  <a href="audit-event-logs.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="cli-kernel-management.html">
	    Kernel management
	  </a>
	</li>
	<li>
	  <a href="cli-image-management.html">
	    Image management
	  </a>
	</li>
	<li>
	  <a href="cli-interface-management.html">
	    Interface management
	  </a>
	</li>
	<li>
	  <a href="cli-advanced-tasks.html">
	    Advanced tasks
	  </a>
	</li>
	<li>
	  <a href="cli-composable-hardware.html">
	    Composable hardware
	  </a>
	</li>
	<li>
	  <a href="python-api-client.html">
	    API client
	  </a>
	</li>
      </ul>
      <strong>
	<a href="api.html">
	  API documentation
	</a>
      </strong>
      <ul>
	<li>
	  <a href="api-authentication.html">
	    API authentication
	  </a>
	</li>
      </ul>
      <strong>
	<a href="troubleshooting.html">
	  Troubleshoot
	</a>
      </strong>
      <ul>
	<li>
	  <a href="getting-help.html">
	    Getting help
	  </a>
	</li>
	<li>
	  <a href="tips-tricks-and-traps.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="https://old-docs.maas.io/2.5/en/">
	    MAAS 2.5 (+ earlier) doc
	  </a>
	</li>
      </ul>
      <strong>
	<a href="whats-new-in-maas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="writing-guide.html">
	  Help improve these docs
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>Power management</h1><!-- deb-2-7-cli
 deb-2-7-cli -->

<!-- deb-2-7-ui
 deb-2-7-ui -->

<!-- deb-2-8-cli
 deb-2-8-cli -->

<!-- deb-2-8-ui
 deb-2-8-ui -->

<!-- deb-2-9-cli
 deb-2-9-cli -->

<!-- deb-2-9-ui
 deb-2-9-ui -->

<!-- snap-2-7-cli
 snap-2-7-cli -->

<!-- snap-2-7-ui
 snap-2-7-ui -->

<!-- snap-2-8-ui
 snap-2-8-ui -->

<!-- snap-2-9-cli
 snap-2-9-cli -->

<!-- snap-2-9-ui
 snap-2-9-ui -->

<p>To manage a machine, MAAS must be able to power cycle it, usually through the machine&rsquo;s <a href="https://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface#Baseboard_management_controller">BMC^</a> card.  Until you configure the power type, a newly-added machine can&rsquo;t be enlisted and used by MAAS.</p>
<h4>Four questions you may have:</h4>
<ol>
<li><a href="#heading--config-power-type">How do I configure a machine&rsquo;s power type?</a></li>
<li><a href="#heading--power-catalogue">Show me a catalogue of power parameters, by type.</a></li>
<li><a href="#heading--example-virsh-kvm-power-type">Can you give me an example of the virsh power type?</a></li>
<li><a href="#heading--bmc-driver-support">Which BMC drivers are supported?</a></li>
</ol>
<!-- snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9 ui
<a href="#heading--config-power-type"><h2 id="heading--config-power-type">Configure a machine's power type</h2></a>

To configure a machine's power type, click on the machine from the 'Machines' page of the web UI, then select its 'Configuration' tab. Scroll down until you find the Power configuration. If the power type is undefined, the following will be displayed:

<a href="images/4fae5977-nodes-power-types__2.4_undefined.png" target = "_blank"><img src="images/4fae5977-nodes-power-types__2.4_undefined.png"></a></a>

Choose a type in the drop-down menu that corresponds to the machine's underlying machine's BMC card.

<a href="images/b53c6613-nodes-power-types__2.4_selection.png" target = "_blank"><img src="images/b53c6613-nodes-power-types__2.4_selection.png"></a></a>

Fill in the resulting form; the information required will depends on the power type:
snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9 ui -->

<!-- snap-2-7-ui deb-2-7-ui
| CLI power_type code | Description |
|-----|-----|
| [amt](#heading--amt) |Intel AMT |
| [apc](#heading--apc) | American Power Conversion (APC) PDU |
| [dli](#heading--dli) | Digital Loggers, Inc. PDU |
| [hmc](#heading--hmc) | IBM Hardware Management Console (HMC) |
| [ipmi](#heading--ipmi) | IPMI |
| [manual](#heading--manual) | Manual power configuration |
| [moonshot](#heading--moonshot) | HP Moonshot - iLO4 (IPMI) |
| [mscm](#heading--mscm) | HP Moonshot - iLO Chassis Manager |
| [msftocs](#heading--mscm) | Microsoft OCS - Chassis Manager |
| [nova](#heading--nova) | OpenStack Nova |
| [openbmc](#heading--openbmc) | OpenBMC Power Driver |
| [recs_box](#heading--recs_box) | Christmann RECS-Box Power Driver |
| [redfish](#heading--redfish) | Redfish |
| [sm15k](#heading--sm15k) | SeaMicro 15000 |
| [ucsm](#heading--ucsm) | Cisco UCS Manager |
| [virsh](#heading--virsh) | libvirt KVM |
| [vmware](#heading--vmware) | VMware |
| [wedge](#heading--wedge) | Facebook's Wedge |
snap-2-7-ui deb-2-7-ui -->

<!-- snap-2-8-ui deb-2-8-ui snap-2-9-ui deb-2-9-ui
| CLI power_type code | Description |
|-----|-----|
| [amt](#heading--amt) |Intel AMT |
| [apc](#heading--apc) | American Power Conversion (APC) PDU |
| [dli](#heading--dli) | Digital Loggers, Inc. PDU |
| [hmc](#heading--hmc) | IBM Hardware Management Console (HMC) |
| [lxd](#heading--lxd) | LXD VM |
| [ipmi](#heading--ipmi) | IPMI |
| [manual](#heading--manual) | Manual power configuration |
| [moonshot](#heading--moonshot) | HP Moonshot - iLO4 (IPMI) |
| [mscm](#heading--mscm) | HP Moonshot - iLO Chassis Manager |
| [msftocs](#heading--mscm) | Microsoft OCS - Chassis Manager |
| [nova](#heading--nova) | OpenStack Nova |
| [openbmc](#heading--openbmc) | OpenBMC Power Driver |
| [recs_box](#heading--recs_box) | Christmann RECS-Box Power Driver |
| [redfish](#heading--redfish) | Redfish |
| [sm15k](#heading--sm15k) | SeaMicro 15000 |
| [ucsm](#heading--ucsm) | Cisco UCS Manager |
| [virsh](#heading--virsh) | libvirt KVM |
| [vmware](#heading--vmware) | VMware |
| [wedge](#heading--wedge) | Facebook's Wedge |
snap-2-8-ui deb-2-8-ui snap-2-9-ui deb-2-9-ui -->

<!-- snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui
Click 'Save changes' to finish. Once that's done, MAAS performs a power check on the machine. A successful power check is a good indication that MAAS can properly communicate with the machine, that is, it should quickly result in a power status of "Power off". A failed attempt will show:

<a href="images/3bd5e93b-nodes-power-types__2.4_power-error.png" target = "_blank"><img src="images/3bd5e93b-nodes-power-types__2.4_power-error.png"></a></a>

If you see this error, double-check your entered values by editing the power type, or  consider another power type altogether.

Another possible cause for this error may be the networking: traffic may be getting filtered between the rack controller and the BMC card.

<a href="#heading--power-catalogue"><h2 id="heading--power-catalogue">Power catalogue</h2></a>

The following catalogue helps to explain the fields in the "create machine" dialogue above.  Note that most of the multiple-choice fields have drop-down menus to assist with your choice.

<a href="#heading--amt"><h3 id="heading--amt">Intel AMT</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Power password | Password to access unit | Optional |
| Power address | IP address of unit | Required |

<a href="#heading--apc"><h3 id="heading--apc">American Power Conversion (APC) PDU</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| IP for APC PDU | IP address of unit | Required |
| APU PDU node outlet number (1-16) | PDU node outlet number | Required |
| Power ON outlet delay (seconds) | outlet power ON delay | Optional, default=5 |

<a href="#heading--dli"><h3 id="heading--dli">Digital Loggers, Inc. PDU</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Outlet ID | outlet ID | Required |
| Power address | IP address of unit | Required |
| Power user | Username to login | Optional |
| Power password | Password to access unit | Optional |

<a href="#heading--hmc"><h3 id="heading--hmc">IBM Hardware Management Console (HMC)</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| IP for HMC | IP address of unit | Required |
| HMC username | Username to login | Optional |
| HMC password | Password to access unit | Optional |
| HMC Managed System server name | HMC managed server name | Required |
| HMC logical partition | HMC logical partition of unit | Required |
snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui -->

<!-- snap-2-8-ui snap-2-9-ui deb-2-8-ui deb-2-9-ui
<a href="#heading--lxd"><h3 id="heading--lxd">LXD VMs</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| LXD address | IP address of unit | Required |
| Instance name | LXD container instance name | Required |
| LXD password | Password to access unit | Optional |
snap-2-8-ui snap-2-9-ui deb-2-8-ui deb-2-9-ui -->

<!-- snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui

<a href="#heading--ipmi"><h3 id="heading--ipmi">IPMI</h3></a>

snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui -->

<!-- snap-2-7-ui deb-2-7-ui snap-2-8-ui deb-2-8-ui

Some of the fields for this power type have fixed choices, indicated in the "Choices" column.

| Form field | Description | Choices | Required |
|-----|-----|-----|-----|
| Power driver | Power driver |`LAN [IPMI 1.5]` | Required |
| | | `LAN_2_0 [IPMI 2.0]`|
| Power boot type | Boot type | `Automatic` | Required |
| | | `Legacy boot` | |
| | | `EFI boot` | |
| IP address | IP address of unit || Required |
| Power user | Username to login || Optional |
| Power password | Password to access unit || Optional |
| Power MAC | MAC address of unit || Optional |
snap-2-8-ui deb-2-8-ui snap-2-7-ui deb-2-7-ui -->

<!-- snap-2-9-ui deb-2-9-ui

Some of the fields for this power type have fixed choices, indicated in the "Choices" column.

| Form field | Description | Choices | Required |
|-----|-----|-----|-----|
| Power driver | Power driver |`LAN [IPMI 1.5]` | Required |
| | | `LAN_2_0 [IPMI 2.0]`|
| Power boot type | Boot type | `Automatic` | Required |
| | | `Legacy boot` | |
| | | `EFI boot` | |
| IP address | IP address of unit || Required |
| Power user | Username to login || Optional |
| Power password | Password to access unit || Optional |
| Power MAC | MAC address of unit || Optional |
| K_g | K_g BMC key | | Optional (BETA) |
| Cipher suite | Cipher suite ID | - `17` <small>(17 - HMAC-SHA256::HMAC_SHA256_128::AES-CBC-128)</small> | Optional (BETA) |
| | |`3` <small>(3 - HMAC-SHA1::HMAC-SHA1-96::AES-CBC-128)</small> | |
| | |` ` (blank) <small>(freeipmi-tools default)</small> | |
| | |`8` <small>(8 - HMAC-MD5::HMAC-MD5-128::AES-CBC-128)</small> | |
| | |`12` <small>(12 - HMAC-MD5::MD5-128::AES-CBC-128)</small> | |
| Privilege level | IPMI privilege level | `User` | Optional (BETA) |
| | | `Operator` | |
| | | `Administrator` | |
snap-2-9-ui deb-2-9-ui -->

<!-- snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui

<a href="#heading--manual"><h3 id="heading--manual">Manual power configuration</h3></a>

Manual power configuration means exactly that -- manually configured at the unit -- hence there are no parameters to set in the "create machine" UI.

<a href="#heading--moonshot"><h3 id="heading--moonshot">HP Moonshot - iLO4 (IPMI)</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Power address | IP address of unit | Required |
| Power user | Username to login | Optional |
| Power password | Password to access unit | Optional |
| Power hardware address | Hardware address of unit | Required |

<a href="#heading--mscm"><h3 id="heading--mscm">HP Moonshot - iLO Chassis Manager</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| IP for MSCM CLI API | IP address of unit | Required |
| MSCM CLI API user | Username to login | Optional |
| MSCM CLI API password | Password to access unit | Optional |
| Node ID | cXnY | Required |
|  - where  | X = cartridge number | |
|           | Y = node number | |

<a href="#heading--mscm"><h3 id="heading--mscm">Microsoft OCS - Chassis Manager</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Power address | IP address of unit | Required |
| Power port | Port where unit is attached | Optional |
| Power user | Username to login | Optional |
| Power password | Password to access unit | Optional |
| Blade ID | Blade ID (usu. 1-24) | Required |

<a href="#heading--nova"><h3 id="heading--nova">OpenStack Nova</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Host UUID | Host UUID | Required |
| Tenant name | Tenant name | Required |
| Username | Username to login | Required |
| Password | Password to access unit | Required |
| Auth URL | URL to access unit | Required |

<a href="#heading--openbmc"><h3 id="heading--openbmc">OpenBMC Power Driver</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| OpenBMC address | IP address of unit | Required |
| OpenBMC user | Username to login | Required |
| OpenBMC password | Password to access unit | Required |

<a href="#heading--recs_box"><h3 id="heading--recs_box">Christmann RECS-Box Power Driver</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Node ID | Node ID | Required |
| Power address | IP address of unit | Required |
| Power port | Port where unit is attached | Optional |
| Power user | Username to login | Optional |
| Power password | Password to access unit | Optional |

<a href="#heading--redfish"><h3 id="heading--redfish">Redfish</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Redfish address | IP address of unit | Required |
| Redfish user | Username to login | Required |
| Redfish password | Password to access unit | Required |
| Node ID | Node ID | Optional |

<a href="#heading--sm15k"><h3 id="heading--sm15k">SeaMicro 15000</h3></a>

Some of the fields for this power type have fixed choices, indicated in the "Choices" column.

| Form field | Description | Choices | Required |
|-----|-----|-----|-----|
| System ID | System ID || Required |
| Power address | IP address of unit || Required |
| Power user | Username to login || Optional |
| Power password | Password to access unit || Optional |
| Power control type | Password to access unit| IPMI | Required |
|  |  | REST API v0.9 | |
|  |  | REST API v2.0 | |

<a href="#heading--ucsm"><h3 id="heading--ucsm">Cisco UCS Manager</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Server UUID | Server UUID | Required |
| URL for XML API | XML API URL | Required |
| API user | API user | Optional |
| API password | API password | Optional |

<a href="#heading--virsh"><h3 id="heading--virsh">virsh - libvirt KVM</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| Address | URL of VM | Required |
| Password | API password | Optional |
| Virsh VM ID | libvirt VM UUID | Required |

<a href="#heading--vmware"><h3 id="heading--vmware">VMware</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| VM Name | VM name (if UUID unknown) | Optional |
| VM UUID | VM UUID (if known) | Optional |
| VMware IP | IP address of VM | Required |
| VMware username | Username to access VM | Required |
| VMware password | Password to access VM | Required |
| VMware API port | VMware API port number | Optional |
| VMware API protocol | VMware API protocol | Optional |

<a href="#heading--wedge"><h3 id="heading--wedge">Facebook's Wedge</h3></a>

| Form field | Description | Required |
|-----|-----|-----|
| IP address | IP address of unit | Required |
| Power user | Username to access unit | Optional |
| Power password | Password to access unit | Optional |

<a href="#heading--example-virsh-kvm-power-type"><h2 id="heading--example-virsh-kvm-power-type">An example: the Virsh power type</h2></a>

Consider a machine backed by VM. Below, a 'Power type' of `Virsh` has been selected, and the 'Power address' of `qemu+ssh://ubuntu@192.168.1.2/system` has been entered (replace values as appropriate).  The value of 'Power ID' is the VM domain (guest) name, here `node2`.

<a href="images/c75e00a8-nodes-power-types__2.4_example-virsh.png" target = "_blank"><img src="images/c75e00a8-nodes-power-types__2.4_example-virsh.png"></a></a>

<strong>NOTE:</strong> 
The machine's hostname -- according to MAAS -- is a randomly chosen string (here `dear.ant`). You should change this hostname to something descriptive, that helps you remember why this machine is in your MAAS network.

snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui -->

<p><a href="#heading--config-power-type"><h2 id="heading--config-power-type">Configure a machine&rsquo;s power type</h2></a></p>
<p>To (re)configure a machine&rsquo;s power type, first find the machine&rsquo;s $SYSTEM_ID with the <a href="the-cli-cookbook.html#heading--basic-machine-list">basic machine-list</a> recipe.  Next, use the <a href="maas-cli.html">MAAS CLI</a> command <code>maas machines...</code> to (re)set the machine&rsquo;s power type, like this:</p>
<pre><code>maas $PROFILE machine update $SYSTEM_ID power_type="$POWER_TYPE"
</code></pre>
<p>where $POWER_TYPE can have the following values:</p>
<!-- snap-2-7-cli deb-2-7-cli
| CLI power_type code | Description |
|-----|-----|
| [amt](#heading--amt) |Intel AMT |
| [apc](#heading--apc) | American Power Conversion (APC) PDU |
| [dli](#heading--dli) | Digital Loggers, Inc. PDU |
| [eaton](#heading--eaton) | Eaton PDU |
| [hmc](#heading--hmc) | IBM Hardware Management Console (HMC) |
| [ipmi](#heading--ipmi) | IPMI |
| [manual](#heading--manual) | Manual power configuration |
| [moonshot](#heading--moonshot) | HP Moonshot - iLO4 (IPMI) |
| [mscm](#heading--mscm) | HP Moonshot - iLO Chassis Manager |
| [msftocs](#heading--mscm) | Microsoft OCS - Chassis Manager |
| [nova](#heading--nova) | OpenStack Nova |
| [openbmc](#heading--openbmc) | OpenBMC Power Driver |
| [recs_box](#heading--recs_box) | Christmann RECS-Box Power Driver |
| [redfish](#heading--redfish) | Redfish |
| [sm15k](#heading--sm15k) | SeaMicro 15000 |
| [ucsm](#heading--ucsm) | Cisco UCS Manager |
| [virsh](#heading--virsh) | libvirt KVM |
| [vmware](#heading--vmware) | VMware |
| [wedge](#heading--wedge) | Facebook's Wedge |
snap-2-7-cli deb-2-7-cli -->

<table>
<thead>
<tr>
<th>CLI power_type code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#heading--amt">amt</a></td>
<td>Intel AMT</td>
</tr>
<tr>
<td><a href="#heading--apc">apc</a></td>
<td>American Power Conversion (APC) PDU</td>
</tr>
<tr>
<td><a href="#heading--dli">dli</a></td>
<td>Digital Loggers, Inc. PDU</td>
</tr>
<tr>
<td><a href="#heading--eaton">eaton</a></td>
<td>Eaton PDU</td>
</tr>
<tr>
<td><a href="#heading--hmc">hmc</a></td>
<td>IBM Hardware Management Console (HMC)</td>
</tr>
<tr>
<td><a href="#heading--lxd">lxd</a></td>
<td>LXD VM</td>
</tr>
<tr>
<td><a href="#heading--ipmi">ipmi</a></td>
<td>IPMI</td>
</tr>
<tr>
<td><a href="#heading--manual">manual</a></td>
<td>Manual power configuration</td>
</tr>
<tr>
<td><a href="#heading--moonshot">moonshot</a></td>
<td>HP Moonshot - iLO4 (IPMI)</td>
</tr>
<tr>
<td><a href="#heading--mscm">mscm</a></td>
<td>HP Moonshot - iLO Chassis Manager</td>
</tr>
<tr>
<td><a href="#heading--mscm">msftocs</a></td>
<td>Microsoft OCS - Chassis Manager</td>
</tr>
<tr>
<td><a href="#heading--nova">nova</a></td>
<td>OpenStack Nova</td>
</tr>
<tr>
<td><a href="#heading--openbmc">openbmc</a></td>
<td>OpenBMC Power Driver</td>
</tr>
<tr>
<td><a href="#heading--recs_box">recs_box</a></td>
<td>Christmann RECS-Box Power Driver</td>
</tr>
<tr>
<td><a href="#heading--redfish">redfish</a></td>
<td>Redfish</td>
</tr>
<tr>
<td><a href="#heading--sm15k">sm15k</a></td>
<td>SeaMicro 15000</td>
</tr>
<tr>
<td><a href="#heading--ucsm">ucsm</a></td>
<td>Cisco UCS Manager</td>
</tr>
<tr>
<td><a href="#heading--virsh">virsh</a></td>
<td>libvirt KVM</td>
</tr>
<tr>
<td><a href="#heading--vmware">vmware</a></td>
<td>VMware</td>
</tr>
<tr>
<td><a href="#heading--wedge">wedge</a></td>
<td>Facebook&rsquo;s Wedge</td>
</tr>
</tbody>
</table>
<p>Note the required and optional parameters associated with each power type.</p>
<p>Once you&rsquo;ve successfully processed the command (as indicated by a stream of JSON, headed by &ldquo;Success!&rdquo;), MAAS performs a power check on the machine. A successful power check is a good indication that MAAS can properly communicate with the machine, that is, it should quickly result in a power status of &ldquo;Power off&rdquo;. A failed attempt will return errors that should guide you to fix your power_parameters.</p>
<p><a href="#heading--power-catalogue"><h2 id="heading--power-catalogue">Power catalogue</h2></a></p>
<p><a href="#heading--amt"><h3 id="heading--amt">Intel AMT</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=amt</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>amt</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--apc"><h3 id="heading--apc">American Power Conversion (APC) PDU</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=apc</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>apc</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>node_outlet</code></td>
<td>PDU node outlet number</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_on_delay</code></td>
<td>outlet power ON delay</td>
<td>Optional, default=5</td>
</tr>
</tbody>
</table>
<p><a href="#heading--dli"><h3 id="heading--dli">Digital Loggers, Inc. PDU</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=dli</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>dli</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>outlet_id</code></td>
<td>outlet ID</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--eaton"><h3 id="heading--eaton">Eaton PDU</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=eaton</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>eaton</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>node_outlet</code></td>
<td>PDU node outlet number</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_on_delay</code></td>
<td>outlet power ON delay</td>
<td>Optional, default=5</td>
</tr>
</tbody>
</table>
<p><a href="#heading--hmc"><h3 id="heading--hmc">IBM Hardware Management Console (HMC)</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=hmc</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>hmc</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>server_name</code></td>
<td>HMC managed server name</td>
<td>Required</td>
</tr>
<tr>
<td><code>lpar</code></td>
<td>HMC logical partition of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--lxd"><h3 id="heading--lxd">LXD VMs</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=lxd</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>lxd</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>instance_name</code></td>
<td>LXD container instance name</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--ipmi"><h3 id="heading--ipmi">IPMI</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=ipmi</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<p>Some of the fields for this power type have fixed choices, indicated in the &ldquo;Choices&rdquo; column.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Choices</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>ipmi</code></td>
<td></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_driver</code></td>
<td>Power driver</td>
<td><code>LAN [IPMI 1.5]</code></td>
<td>Required</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>LAN_2_0 [IPMI 2.0]</code></td>
<td></td>
</tr>
<tr>
<td><code>power_boot_type</code></td>
<td>Boot type</td>
<td><code>Automatic</code></td>
<td>Required</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>Legacy boot</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><code>EFI boot</code></td>
<td></td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td></td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td></td>
<td>Optional</td>
</tr>
<tr>
<td><code>mac_address</code></td>
<td>MAC address of unit</td>
<td></td>
<td>Optional</td>
</tr>
</tbody>
</table>
<!-- snap-2-9-cli deb-2-9-cli
All parameters are entered as `key=value`, e.g., `power_type=amt`.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.

Some of the fields for this power type have fixed choices, indicated in the "Choices" column.

| Parameter | Description | Choices | Required |
|-----|-----|-----|-----|
| `power_type` | `ipmi` | | Required |
| `power_driver` | Power driver |`LAN [IPMI 1.5]` | Required |
| | | `LAN_2_0 [IPMI 2.0]`|
| `power_boot_type` | Boot type | `Automatic` | Required |
| | | `Legacy boot` | |
| | | `EFI boot` | |
| `power_address` | IP address of unit || Required |
| `power_user` | Username to login || Optional |
| `power_pass` | Password to access unit || Optional |
| `mac_address` | MAC address of unit || Optional |
| `k_g` | K_g BMC key | | Optional |
| `cipher_suite_id` | Cipher suite ID | - `17` <small>(17 - HMAC-SHA256::HMAC_SHA256_128::AES-CBC-128)</small> | Optional |
| | |`3` <small>(3 - HMAC-SHA1::HMAC-SHA1-96::AES-CBC-128)</small> | |
| | |` ` (blank) <small>(freeipmi-tools default)</small> | |
| | |`8` <small>(8 - HMAC-MD5::HMAC-MD5-128::AES-CBC-128)</small> | |
| | |`12` <small>(12 - HMAC-MD5::MD5-128::AES-CBC-128)</small> | |
| `privilege_level` | IPMI privilege level | `User` | Optional |
| | | `Operator` | |
| | | `Administrator` | |
| `mac_address` | MAC address of unit || Optional |
snap-2-9-cli deb-2-9-cli -->

<p><a href="#heading--manual"><h3 id="heading--manual">Manual power configuration</h3></a></p>
<p>Manual power configuration means exactly that &ndash; manually configured at the unit.  The only MAAS CLI parameter is <code>power_type=amt</code>. </p>
<p><a href="#heading--moonshot"><h3 id="heading--moonshot">HP Moonshot - iLO4 (IPMI)</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=moonshot</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>moonshot`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_hwaddress</code></td>
<td>Hardware address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--mscm"><h3 id="heading--mscm">HP Moonshot - iLO Chassis Manager</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=mscm</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>mscm`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>node_id</code></td>
<td>cXnY</td>
<td>Required</td>
</tr>
<tr>
<td>- where</td>
<td>X = cartridge number</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Y = node number</td>
<td></td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--mscm"><h3 id="heading--mscm">Microsoft OCS - Chassis Manager</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=msftocs</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>msftocs`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>blade_id</code></td>
<td>Blade ID (usu. 1-24)</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_port</code></td>
<td>Port where unit is attached</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--nova"><h3 id="heading--nova">OpenStack Nova</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=nova</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>nova`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>nova_id</code></td>
<td>Host UUID</td>
<td>Required</td>
</tr>
<tr>
<td><code>os_tenantname</code></td>
<td>Tenant name</td>
<td>Required</td>
</tr>
<tr>
<td><code>os_username</code></td>
<td>Username to login</td>
<td>Required</td>
</tr>
<tr>
<td><code>os_password</code></td>
<td>Password to access unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>os_authurl</code></td>
<td>URL to access unit</td>
<td>Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--openbmc"><h3 id="heading--openbmc">OpenBMC Power Driver</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=openbmc</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>openbmc</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Required</td>
</tr>
</tbody>
</table>
<p><a href="#heading--recs_box"><h3 id="heading--recs_box">Christmann RECS-Box Power Driver</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=recs_box</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>recs_box`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>node_id</code></td>
<td>Node ID</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_port</code></td>
<td>Port where unit is attached</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--redfish"><h3 id="heading--redfish">Redfish</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=redfish</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type |</code>redfish`</td>
<td>Required</td>
<td></td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>node_id</code></td>
<td>Node ID</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--sm15k"><h3 id="heading--sm15k">SeaMicro 15000</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=sm15k</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<p>Some of the fields for this power type have fixed choices, indicated in the &ldquo;Choices&rdquo; column.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Choices</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>sm15k</code></td>
<td></td>
<td>Required</td>
</tr>
<tr>
<td><code>system_id</code></td>
<td>System ID</td>
<td></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_control</code></td>
<td>Password to access unit</td>
<td>ipmi</td>
<td>Required</td>
</tr>
<tr>
<td></td>
<td></td>
<td>restapi</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>restapi2</td>
<td></td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to login</td>
<td></td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td></td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--ucsm"><h3 id="heading--ucsm">Cisco UCS Manager</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=ucsm</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>ucsm</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>Server UUID</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>URL for XML API</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>API user</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>API password</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--virsh"><h3 id="heading--virsh">virsh - libvirt KVM</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=virsh</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>virsh</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_id</code></td>
<td>libvirt VM UUID</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>URL of VM</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>API password</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--vmware"><h3 id="heading--vmware">VMware</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=vmware</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>vmware</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_vm_name</code></td>
<td>VM name (if UUID unknown)</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_uuid</code></td>
<td>VM UUID (if known)</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of VM</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to access VM</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access VM</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_port</code></td>
<td>VMware API port number</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_protocol</code></td>
<td>VMware API protocol</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--wedge"><h3 id="heading--wedge">Facebook&rsquo;s Wedge</h3></a></p>
<p>All parameters are entered as <code>key=value</code>, e.g., <code>power_type=amt</code>.  The MAAS CLI will refuse the request with informative errors if required parameters are excluded.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>power_type</code></td>
<td><code>wedge</code></td>
<td>Required</td>
</tr>
<tr>
<td><code>power_address</code></td>
<td>IP address of unit</td>
<td>Required</td>
</tr>
<tr>
<td><code>power_user</code></td>
<td>Username to access unit</td>
<td>Optional</td>
</tr>
<tr>
<td><code>power_pass</code></td>
<td>Password to access unit</td>
<td>Optional</td>
</tr>
</tbody>
</table>
<p><a href="#heading--example-virsh-kvm-power-type"><h2 id="heading--example-virsh-kvm-power-type">An example: the Virsh power type</h2></a></p>
<p>Consider a machine backed by a KVM, accessed via <code>virsh</code>.  You can create a corresponding MAAS machine and set its power parameters with a command like this one:</p>
<pre><code>maas admin machines create \
architecture=amd64 \
mac_addresses=52:54:00:15:36:f2 \
power_type=virsh \
power_parameters_power_id=f677a842-571c-4e65-adc9-11e2cf92d363 \
power_parameters_power_address=qemu+ssh://stormrider@192.168.123.1/system \
power_parameters_power_pass=xxxxxxxx
</code></pre>
<p>If successful, this will return: </p>
<pre><code>Success.
</code></pre>
<p>Machine-readable output follows this announcement.  The JSON generated by this command is shown in the detail block.</p>
<p><details><summary>MAAS command JSON response</summary></p>
<pre><code>{
    &quot;storage&quot;: 0.0,
    &quot;tag_names&quot;: [],
    &quot;special_filesystems&quot;: [],
    &quot;memory&quot;: 0,
    &quot;boot_disk&quot;: null,
    &quot;virtualblockdevice_set&quot;: [],
    &quot;hardware_info&quot;: {
        &quot;system_vendor&quot;: &quot;Unknown&quot;,
        &quot;system_product&quot;: &quot;Unknown&quot;,
        &quot;system_family&quot;: &quot;Unknown&quot;,
        &quot;system_version&quot;: &quot;Unknown&quot;,
        &quot;system_sku&quot;: &quot;Unknown&quot;,
        &quot;system_serial&quot;: &quot;Unknown&quot;,
        &quot;cpu_model&quot;: &quot;Unknown&quot;,
        &quot;mainboard_vendor&quot;: &quot;Unknown&quot;,
        &quot;mainboard_product&quot;: &quot;Unknown&quot;,
        &quot;mainboard_serial&quot;: &quot;Unknown&quot;,
        &quot;mainboard_version&quot;: &quot;Unknown&quot;,
        &quot;mainboard_firmware_vendor&quot;: &quot;Unknown&quot;,
        &quot;mainboard_firmware_date&quot;: &quot;Unknown&quot;,
        &quot;mainboard_firmware_version&quot;: &quot;Unknown&quot;,
        &quot;chassis_vendor&quot;: &quot;Unknown&quot;,
        &quot;chassis_type&quot;: &quot;Unknown&quot;,
        &quot;chassis_serial&quot;: &quot;Unknown&quot;,
        &quot;chassis_version&quot;: &quot;Unknown&quot;
    },
    &quot;address_ttl&quot;: null,
    &quot;memory_test_status&quot;: -1,
    &quot;other_test_status_name&quot;: &quot;Unknown&quot;,
    &quot;osystem&quot;: &quot;&quot;,
    &quot;status_message&quot;: &quot;Commissioning&quot;,
    &quot;netboot&quot;: true,
    &quot;physicalblockdevice_set&quot;: [],
    &quot;node_type&quot;: 0,
    &quot;cpu_test_status&quot;: -1,
    &quot;memory_test_status_name&quot;: &quot;Unknown&quot;,
    &quot;bcaches&quot;: [],
    &quot;storage_test_status&quot;: 0,
    &quot;system_id&quot;: &quot;bhxws3&quot;,
    &quot;status&quot;: 1,
    &quot;commissioning_status&quot;: 0,
    &quot;power_type&quot;: &quot;virsh&quot;,
    &quot;locked&quot;: false,
    &quot;numanode_set&quot;: [
        {
            &quot;index&quot;: 0,
            &quot;memory&quot;: 0,
            &quot;cores&quot;: []
        }
    ],
    &quot;bios_boot_method&quot;: null,
    &quot;fqdn&quot;: &quot;ace-swan.maas&quot;,
    &quot;node_type_name&quot;: &quot;Machine&quot;,
    &quot;hostname&quot;: &quot;ace-swan&quot;,
    &quot;volume_groups&quot;: [],
    &quot;testing_status&quot;: 0,
    &quot;network_test_status&quot;: -1,
    &quot;other_test_status&quot;: -1,
    &quot;interface_test_status&quot;: -1,
    &quot;hwe_kernel&quot;: null,
    &quot;blockdevice_set&quot;: [],
    &quot;testing_status_name&quot;: &quot;Pending&quot;,
    &quot;power_state&quot;: &quot;unknown&quot;,
    &quot;min_hwe_kernel&quot;: &quot;&quot;,
    &quot;owner&quot;: &quot;admin&quot;,
    &quot;distro_series&quot;: &quot;&quot;,
    &quot;storage_test_status_name&quot;: &quot;Pending&quot;,
    &quot;cpu_speed&quot;: 0,
    &quot;swap_size&quot;: null,
    &quot;cpu_test_status_name&quot;: &quot;Unknown&quot;,
    &quot;hardware_uuid&quot;: null,
    &quot;architecture&quot;: &quot;amd64/generic&quot;,
    &quot;pool&quot;: {
        &quot;name&quot;: &quot;default&quot;,
        &quot;description&quot;: &quot;Default pool&quot;,
        &quot;id&quot;: 0,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/resourcepool/0/&quot;
    },
    &quot;cache_sets&quot;: [],
    &quot;pod&quot;: null,
    &quot;iscsiblockdevice_set&quot;: [],
    &quot;disable_ipv4&quot;: false,
    &quot;status_action&quot;: &quot;&quot;,
    &quot;boot_interface&quot;: {
        &quot;name&quot;: &quot;eth0&quot;,
        &quot;id&quot;: 10,
        &quot;product&quot;: null,
        &quot;system_id&quot;: &quot;bhxws3&quot;,
        &quot;effective_mtu&quot;: 1500,
        &quot;children&quot;: [],
        &quot;link_connected&quot;: true,
        &quot;enabled&quot;: true,
        &quot;interface_speed&quot;: 0,
        &quot;numa_node&quot;: 0,
        &quot;firmware_version&quot;: null,
        &quot;parents&quot;: [],
        &quot;discovered&quot;: null,
        &quot;params&quot;: &quot;&quot;,
        &quot;links&quot;: [],
        &quot;sriov_max_vf&quot;: 0,
        &quot;tags&quot;: [],
        &quot;type&quot;: &quot;physical&quot;,
        &quot;vlan&quot;: null,
        &quot;vendor&quot;: null,
        &quot;link_speed&quot;: 0,
        &quot;mac_address&quot;: &quot;52:54:00:15:36:f2&quot;,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/bhxws3/interfaces/10/&quot;
    },
    &quot;cpu_count&quot;: 0,
    &quot;domain&quot;: {
        &quot;authoritative&quot;: true,
        &quot;ttl&quot;: null,
        &quot;resource_record_count&quot;: 0,
        &quot;name&quot;: &quot;maas&quot;,
        &quot;is_default&quot;: true,
        &quot;id&quot;: 0,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/domains/0/&quot;
    },
    &quot;current_testing_result_id&quot;: 7,
    &quot;default_gateways&quot;: {
        &quot;ipv4&quot;: {
            &quot;gateway_ip&quot;: null,
            &quot;link_id&quot;: null
        },
        &quot;ipv6&quot;: {
            &quot;gateway_ip&quot;: null,
            &quot;link_id&quot;: null
        }
    },
    &quot;interface_set&quot;: [
        {
            &quot;name&quot;: &quot;eth0&quot;,
            &quot;id&quot;: 10,
            &quot;product&quot;: null,
            &quot;system_id&quot;: &quot;bhxws3&quot;,
            &quot;effective_mtu&quot;: 1500,
            &quot;children&quot;: [],
            &quot;link_connected&quot;: true,
            &quot;enabled&quot;: true,
            &quot;interface_speed&quot;: 0,
            &quot;numa_node&quot;: 0,
            &quot;firmware_version&quot;: null,
            &quot;parents&quot;: [],
            &quot;discovered&quot;: null,
            &quot;params&quot;: &quot;&quot;,
            &quot;links&quot;: [],
            &quot;sriov_max_vf&quot;: 0,
            &quot;tags&quot;: [],
            &quot;type&quot;: &quot;physical&quot;,
            &quot;vlan&quot;: null,
            &quot;vendor&quot;: null,
            &quot;link_speed&quot;: 0,
            &quot;mac_address&quot;: &quot;52:54:00:15:36:f2&quot;,
            &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/bhxws3/interfaces/10/&quot;
        }
    ],
    &quot;status_name&quot;: &quot;Commissioning&quot;,
    &quot;commissioning_status_name&quot;: &quot;Pending&quot;,
    &quot;owner_data&quot;: {},
    &quot;ip_addresses&quot;: [],
    &quot;raids&quot;: [],
    &quot;network_test_status_name&quot;: &quot;Unknown&quot;,
    &quot;description&quot;: &quot;&quot;,
    &quot;current_commissioning_result_id&quot;: 6,
    &quot;interface_test_status_name&quot;: &quot;Unknown&quot;,
    &quot;current_installation_result_id&quot;: null,
    &quot;zone&quot;: {
        &quot;name&quot;: &quot;default&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;id&quot;: 1,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/zones/default/&quot;
    },
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/machines/bhxws3/&quot;
}
</code></pre>

<p></details></p>
<p><a href="#heading--bmc-driver-support"><h2 id="heading--bmc-driver-support">Which BMC drivers are supported</h2></a></p>
<p>MAAS supports many types of BMC hardware, though not all the drivers have the same capabilities. See the below table for a feature comparison of the BMC drivers currently supported by MAAS.</p>
<p><details><summary>Tell me about BMC</summary></p>
<p>BMC, or &ldquo;Baseboard Management Controller,&rdquo; is an extra micro-controller on the motherboard of a server which forms the interface between system-management software and the device&rsquo;s hardware.  The BMC can collect data from attached sensors, alert administrators to issues, and respond to remote-control commands to control system operation or power state, independent of the system&rsquo;s CPU.</p>
<p>In the context of MAAS, the BMC is generally controlled by SNMP commands.  Any given BMC will function in the context of one or more &ldquo;power types,&rdquo; which are physical interfaces that permit use of the IPMI (&ldquo;Intelligent Platform Management Interface&rdquo;) protocol.  Each power type has a different set of expected parameters required to access and command the BMC.</p>
<p></details></p>
<table>
<colgroup>
<col width="35%" />
<col width="12%" />
<col width="10%" />
<col width="14%" />
<col width="15%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Power Driver (<em>X=supported</em>)</th>
<th>PXE Next Boot</th>
<th>Power Querying</th>
<th>Chassis/Pod Configuration</th>
<th>Enhanced UI Error Reporting</th>
<th>BMC Enlistment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">American Power Conversion (APC) - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Cisco UCS Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Digital Loggers, Inc. - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">Facebook's Wedge <code>*</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">HP Moonshot - iLO Chassis Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">HP Moonshot - iLO4 (IPMI)</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr class="odd">
<td align="left">IBM Hardware Management Console (HMC)</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">IPMI</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td align="left">Intel AMT</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr class="even">
<td align="left">Manual</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Microsoft OCS - Chassis Manager</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">OpenStack Nova</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Rack Scale Design</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">SeaMicro 15000</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Sentry Switch CDU - PDU</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td align="left">VMWare</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Virsh (virtual systems)</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p><code>*</code> The &lsquo;Facebook&rsquo;s Wedge&rsquo; OpenBMC power driver is considered experimental at this time.</p>
    </div>
  </body>
</html>