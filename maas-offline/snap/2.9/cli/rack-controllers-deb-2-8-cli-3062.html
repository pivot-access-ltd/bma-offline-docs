<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-left:0;list-style-type:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-color:#d9d9d9; width:100%;border-bottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/rack-controllers-deb-2-8-cli.html">
	  &nbsp;UI-only&nbsp;
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-color:white;border-top:1px solid black; border-left:1px solid black; border-right:1px solid black; border-bottom:5px solid white;">
	  CLI-only
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-top:40px; margin-left:20px">
      <strong>
	<a href="maas-documentation.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-maas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="give-me-an-example-of-maas.html">
	    &ldquo;Give me an example&rdquo;
	  </a>
	</li>
	<li>
	  <a href="whats-new-in-maas.html">
	    What&rsquo;s new in 2.9
	  </a>
	</li>
	<li>
	  <a href="maas-requirements.html">
	    Requirements
	  </a>
	</li>
	<li>
	  <a href="maas-installation.html">
	    Installation
	  </a>
	</li>
	<li>
	  <a href="configuration-journey.html">
	    Configuration journey
	  </a>
	</li>
      <strong>
	<a href="controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-communication.html">
	    Communication
	  </a>
	</li>
	<li>
	  <a href="rack-controllers.html">
	    Rack controllers
	  </a>
	</li>
	<li>
	  <a href="region-controllers.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="high-availability.html">
	    High availability
	  </a>
	</li>
      </ul>
      <strong>
	<a href="machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="add-machines.html">
	    Add machines
	  </a>
	</li>
	<li>
	  <a href="power-management.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commission-machines.html">
	    Commission machines
	  </a>
	</li>
	<li>Testing
	</li>
	<li>
	  <a href="hardware-testing.html">
	    Hardware testing
	  </a>
	</li>
	<li>
	  <a href="network-testing.html">
	    Network testing
	  </a>
	</li>
	<li>
	  <a href="commissioning-and-hardware-testing-scripts.html">
	    Commissioning and hardware testing scripts
	  </a>
	</li>
	<li>
	  <a href="deploy-machines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="maas-tags.html">
	    Tags
	  </a>
	</li>
	<li>
	  <a href="custom-machine-setup.html">
	    Custom machine setup
	  </a>
	</li>
	<li>
	  <a href="kernel-boot-options.html">
	    Kernel boot options
	  </a>
	</li>
	<li>
	  <a href="resource-pools.html">
	    Resource pools
	  </a>
	</li>
	<li>
	  <a href="storage.html">
	    Storage
	  </a>
	</li>
	<li>
	  <a href="vmware-vmfs-datastores.html">
	    VMware VMFS datastores
	  </a>
	</li>
	<li>
	  <a href="ubuntu-kernels.html">
	    Ubuntu kernels
	  </a>
	</li>
      </ul>
      <strong>
	<a href="images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="select-and-import-images.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="local-image-mirror.html">
	    Local image mirror
	  </a>
	</li>
	<li>
	  <a href="vmware-images.html">
	    VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="subnet-management.html">
	    Subnet management
	  </a>
	</li>
	<li>
	  <a href="managing-dhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="ip-ranges.html">
	    IP ranges
	  </a>
	</li>
	<li>
	  <a href="proxy.html">
	    Proxy
	  </a>
	</li>
	<li>
	  <a href="ntp-services.html">
	    NTP
	  </a>
	</li>
	<li>
	  <a href="network-discovery.html">
	    Network discovery
	  </a>
	</li>
	<li>
	  <a href="ipv6-addressing.html">
	    IPv6
	  </a>
	</li>
	<li>
	  <a href="configuring-tls-encryption.html">
	    SSL
	  </a>
	</li>
	<li>
	  <a href="managing-stp.html">
	    STP
	  </a>
	</li>
	<li>
	  <a href="availability-zones.html">
	    Availability zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="vm-hosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="vm-host-networking.html">
	    VM host networking
	  </a>
	</li>
	<li>
	  <a href="adding-a-vm-host.html">
	    Add a VM host
	  </a>
	</li>
	<li>
	  <a href="vm-host-storage-pools.html">
	    VM host storage pools
	  </a>
	</li>
	<li>
	  <a href="creating-and-deleting-vms.html">
	    Creating and deleting VMs
	  </a>
	</li>
      </ul>
      <strong>Operations
      </strong>
      <ul>
	<li>
	  <a href="prometheus-metrics.html">
	    Prometheus metrics
	  </a>
	</li>
	<li>
	  <a href="backup.html">
	    Backup
	  </a>
	</li>
	<li>
	  <a href="hardening-your-maas-installation.html">
	    MAAS security
	  </a>
	</li>
	<li>
	  <a href="maas-logging.html">
	    Logging
	  </a>
	</li>
	<li>
	  <a href="commissioning-logs.html">
	    Commissioning logs
	  </a>
	</li>
	<li>
	  <a href="user-accounts.html">
	    User accounts
	  </a>
	</li>
	<li>
	  <a href="interactive-search.html">
	    Interactive search
	  </a>
	</li>
      </ul>
      <strong>
	<a href="concepts-and-terms.html">
	  Concepts &amp; terms
	</a>
      </strong>
      <ul>
	<li>
	  <a href="concepts-and-terms.html#heading--network-tutorial">
	    Brief network tutorial
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-cli.html">
	  CLI
	</a>
      </strong>
      <ul>
	<li>
	  <a href="common-cli-tasks.html">
	    The CLI cookbook
	  </a>
	</li>
	<li>
	  <a href="common-cli-tasks.html">
	    Common tasks
	  </a>
	</li>
	<li>
	  <a href="audit-event-logs.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="cli-kernel-management.html">
	    Kernel management
	  </a>
	</li>
	<li>
	  <a href="cli-image-management.html">
	    Image management
	  </a>
	</li>
	<li>
	  <a href="cli-interface-management.html">
	    Interface management
	  </a>
	</li>
	<li>
	  <a href="cli-advanced-tasks.html">
	    Advanced tasks
	  </a>
	</li>
	<li>
	  <a href="cli-composable-hardware.html">
	    Composable hardware
	  </a>
	</li>
	<li>
	  <a href="python-api-client.html">
	    API client
	  </a>
	</li>
      </ul>
      <strong>
	<a href="api.html">
	  API documentation
	</a>
      </strong>
      <ul>
	<li>
	  <a href="api-authentication.html">
	    API authentication
	  </a>
	</li>
      </ul>
      <strong>
	<a href="troubleshooting.html">
	  Troubleshoot
	</a>
      </strong>
      <ul>
	<li>
	  <a href="getting-help.html">
	    Getting help
	  </a>
	</li>
	<li>
	  <a href="tips-tricks-and-traps.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="https://old-docs.maas.io/2.5/en/">
	    MAAS 2.5 (+ earlier) doc
	  </a>
	</li>
      </ul>
      <strong>
	<a href="whats-new-in-maas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="writing-guide.html">
	  Help improve these docs
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-top:40px; margin-right:30px">
      <h1>Rack controllers deb 2 8 CLI</h1><!-- deb-2-7-cli
 deb-2-7-cli -->

<!-- deb-2-7-ui
 deb-2-7-ui -->

<!-- deb-2-8-ui
 deb-2-8-ui -->

<!-- deb-2-9-cli
 deb-2-9-cli -->

<!-- deb-2-9-ui
 deb-2-9-ui -->

<!-- snap-2-7-cli
 snap-2-7-cli -->

<!-- snap-2-7-ui
 snap-2-7-ui -->

<!-- snap-2-8-cli
 snap-2-8-cli -->

<!-- snap-2-8-ui
 snap-2-8-ui -->

<!-- snap-2-9-ui
 snap-2-9-ui -->

<p>A rack controller can connect to multiple VLANs, each from a different network interface. This configuration provides a scaling factor that can help as a network architecture grows in size.</p>
<h4>Five questions you may have:</h4>
<!-- deb-2-7-cli
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-7-cli -->

<!-- deb-2-7-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-7-ui -->

<ol>
<li><a href="maas-communication.html">How does MAAS communication work?</a></li>
<li><a href="#heading--install-a-rack-controller">How do I install a rack controller?</a></li>
<li><a href="#heading--list-rack-controllers">How do I list rack controllers?</a></li>
<li><a href="high-availability.html#heading--multiple-region-endpoints">How do I configure MAAS for multiple API servers?</a></li>
<li><a href="#heading--unregister-a-rack-controller">How do I unregister a rack controller?</a></li>
</ol>
<!-- deb-2-8-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-8-ui -->

<!-- deb-2-9-cli
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-9-cli -->

<!-- deb-2-9-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 deb-2-9-ui -->

<!-- snap-2-7-cli
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-7-cli -->

<!-- snap-2-7-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-7-ui -->

<!-- snap-2-8-cli
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-8-cli -->

<!-- snap-2-8-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-8-ui -->

<ol>
<li><a href="maas-communication.html">How does MAAS communication work?</a></li>
<li><a href="#heading--install-a-rack-controller">How do I install a rack controller?</a></li>
<li><a href="#heading--list-rack-controllers">How do I list rack controllers?</a></li>
<li><a href="high-availability.html#heading--multiple-region-endpoints">How do I configure MAAS for multiple API servers?</a></li>
<li><a href="#heading--unregister-a-rack-controller">How do I unregister a rack controller?</a></li>
</ol>
<!-- snap-2-9-ui
1. [How does MAAS communication work?](maas-communication.html)
2. [How do I install a rack controller?](#heading--install-a-rack-controller)
3. [How do I list rack controllers?](#heading--list-rack-controllers)
4. [How do I configure MAAS for multiple API servers?](high-availability.html#heading--multiple-region-endpoints)
5. [How do I unregister a rack controller?](#heading--unregister-a-rack-controller)
 snap-2-9-ui -->

<p><a href="#heading--install-a-rack-controller"><h2 id="heading--install-a-rack-controller">Install a rack controller</h2></a></p>
<p>To install and register a rack controller with the MAAS:</p>
<pre><code class="bash">sudo apt install maas-rack-controller
sudo maas-rack register
</code></pre>

<p><strong>NOTE:</strong> 
The register command is not required when you are adding a rack controller to a system that already houses an API server.</p>
<p>MAAS will ask for the URL of the region API server. If you provide a hostname, ensure it is resolvable. Next, MAAS will prompt you for the secret key, stored in file <code>/var/lib/maas/secret</code> on the API server.</p>
<p>MAAS will ask for the URL of the region API server. If you provide a hostname, ensure it is resolvable. Next, MAAS will prompt you for the secret key, stored in file <code>/var/snap/maas/common/maas/secret</code> on the API server.</p>
<p>Based on the above, then, we could have also entered:</p>
<pre><code class="bash">sudo maas-rack register --url http://10.5.1.5:5240/MAAS \
    --secret fa847000e7cb681101d26e3477e6e39e
</code></pre>

<!-- snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui
Installing a rack controller consists of installing the rack controller software and then registering the rack controller with the region API server.  When MAAS installs a rack controller on the same host as the region API server, registration occurs automatically.

Once registered, this extra rack controller will appear immediately alongside the primary controller in the web UI and begin to sync with it:

<a href="images/0a5f1d374a3e53235a83eb157163be49016e63b5.png" target = "_blank"><img src="images/0a5f1d374a3e53235a83eb157163be49016e63b5.png"></a></a> 
snap-2-7-ui snap-2-8-ui snap-2-9-ui deb-2-7-ui deb-2-8-ui deb-2-9-ui -->

<p><a href="#heading--list-rack-controllers"><h2 id="heading--list-rack-controllers">List rack controllers</h2></a></p>
<!-- deb-2-7-cli
You can also list and confirm all registered rack controllers:

<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>


Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 deb-2-7-cli -->

<!-- deb-2-7-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.7 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 deb-2-7-ui -->

<p>You can also list and confirm all registered rack controllers:</p>
<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>

<p>Note that you will need multiple rack controllers to achieve specific <a href="high-availability.html">high availability</a> configurations.</p>
<!-- deb-2-8-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.8 CLI" link at the top of the page to find out how. Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 deb-2-8-ui -->

<!-- deb-2-9-cli
You can also list and confirm all registered rack controllers:

<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>


Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 deb-2-9-cli -->

<!-- deb-2-9-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Packages 2.9 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 deb-2-9-ui -->

<!-- snap-2-7-cli
You can also list and confirm all registered rack controllers:

<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>


Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 snap-2-7-cli -->

<!-- snap-2-7-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.7 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 snap-2-7-ui -->

<!-- snap-2-8-cli
You can also list and confirm all registered rack controllers:

<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>


Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 snap-2-8-cli -->

<!-- snap-2-8-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.8 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 snap-2-8-ui -->

<p>You can also list and confirm all registered rack controllers:</p>
<pre><code class="bash">maas $PROFILE rack-controllers read | grep hostname | cut -d '&quot;' -f 4
</code></pre>

<p>Note that you will need multiple rack controllers to achieve specific <a href="high-availability.html">high availability</a> configurations.</p>
<!-- snap-2-9-ui
You can also list and confirm all registered rack controllers via the CLI; select the "Snap 2.9 CLI" link at the top of the page to find out how.  Note that you will need multiple rack controllers to achieve specific [high availability](high-availability.html) configurations.
 snap-2-9-ui -->

<div class="p-notification">
<p class="p-notification__response">If you are using VM nodes, you must ensure that the new rack controller can communicate with the VM host.</p>
</div>

<p><a href="#heading--unregister-a-rack-controller"><h2 id="heading--unregister-a-rack-controller">Unregister a rack controller</h2></a></p>
<p>Most likely, you would only “unregister” an extra, unnecessary rack controller.  In this case, you need to <em>delete</em> it from the region API server; there is no ‘unregister’ command.</p>
<p>To do so, navigate to the ‘Controllers’ page of the web UI. Enter the controller’s page by clicking on the machine you want to delete and select ‘Delete’ from the drop-down (and then ‘Delete controller’). MAAS will do the right thing if the controller is used for DHCP HA; that is, the DHCP HA needs to be disabled.</p>
<p>Although similar, this is not the same as deletion. Here, you are deleting a machine that is a part of MAAS itself.</p>
<div class="p-notification">
<p class="p-notification__response">Unless you remove the software on this machine, rebooting it will cause the machine to re-instate itself as a rack controller. This behaviour may change with future versions of MAAS.</p>
</div>
    </div>
  </body>
</html>