<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-deb-2-8-clileft:0;list-deb-2-8-clistyle-deb-2-8-clitype:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-deb-2-8-clicolor:#d9d9d9; width:100%;border-deb-2-8-clibottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/block-deb-2-8-clidevices.html">
	  &nbsp;UI-deb-2-8-clionly&nbsp;
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-deb-2-8-clicolor:white;border-deb-2-8-clitop:1px solid black; border-deb-2-8-clileft:1px solid black; border-deb-2-8-cliright:1px solid black; border-deb-2-8-clibottom:5px solid white;">
	  CLI-deb-2-8-clionly
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-deb-2-8-clitop:40px; margin-deb-2-8-clileft:20px">
      <strong>
	<a href="maas-deb-2-8-clidocumentation.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-deb-2-8-climaas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="give-deb-2-8-clime-deb-2-8-clian-deb-2-8-cliexample-deb-2-8-cliof-deb-2-8-climaas.html">
	    &ldquo;Give me an example&rdquo;
	  </a>
	</li>
	<li>
	  <a href="whats-deb-2-8-clinew-deb-2-8-cliin-deb-2-8-climaas.html">
	    What&rsquo;s new in 2.8
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clirequirements.html">
	    Requirements
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-cliinstallation.html">
	    Installation
	  </a>
	</li>
	<li>
	  <a href="configuration-deb-2-8-clijourney.html">
	    Configuration journey
	  </a>
	</li>
      <strong>
	<a href="controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-deb-2-8-clicommunication.html">
	    Communication
	  </a>
	</li>
	<li>
	  <a href="rack-deb-2-8-clicontrollers.html">
	    Rack controllers
	  </a>
	</li>
	<li>
	  <a href="region-deb-2-8-clicontrollers.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="high-deb-2-8-cliavailability.html">
	    High availability
	  </a>
	</li>
      </ul>
      <strong>
	<a href="machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="add-deb-2-8-climachines.html">
	    Add machines
	  </a>
	</li>
	<li>
	  <a href="power-deb-2-8-climanagement.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commission-deb-2-8-climachines.html">
	    Commission machines
	  </a>
	</li>
	<li>Testing
	</li>
	<li>
	  <a href="hardware-deb-2-8-clitesting.html">
	    Hardware testing
	  </a>
	</li>
	<li>
	  <a href="network-deb-2-8-clitesting.html">
	    Network testing
	  </a>
	</li>
	<li>
	  <a href="commissioning-deb-2-8-cliand-deb-2-8-clihardware-deb-2-8-clitesting-deb-2-8-cliscripts.html">
	    Commissioning and hardware testing scripts
	  </a>
	</li>
	<li>
	  <a href="deploy-deb-2-8-climachines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clitags.html">
	    Tags
	  </a>
	</li>
	<li>
	  <a href="custom-deb-2-8-climachine-deb-2-8-clisetup.html">
	    Custom machine setup
	  </a>
	</li>
	<li>
	  <a href="kernel-deb-2-8-cliboot-deb-2-8-clioptions.html">
	    Kernel boot options
	  </a>
	</li>
	<li>
	  <a href="resource-deb-2-8-clipools.html">
	    Resource pools
	  </a>
	</li>
	<li>
	  <a href="storage.html">
	    Storage
	  </a>
	</li>
	<li>
	  <a href="vmware-deb-2-8-clivmfs-deb-2-8-clidatastores.html">
	    VMware VMFS datastores
	  </a>
	</li>
	<li>
	  <a href="ubuntu-deb-2-8-clikernels.html">
	    Ubuntu kernels
	  </a>
	</li>
      </ul>
      <strong>
	<a href="images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="select-deb-2-8-cliand-deb-2-8-cliimport-deb-2-8-cliimages.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="local-deb-2-8-cliimage-deb-2-8-climirror.html">
	    Local image mirror
	  </a>
	</li>
	<li>
	  <a href="vmware-deb-2-8-cliimages.html">
	    VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="subnet-deb-2-8-climanagement.html">
	    Subnet management
	  </a>
	</li>
	<li>
	  <a href="managing-deb-2-8-clidhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="ip-deb-2-8-cliranges.html">
	    IP ranges
	  </a>
	</li>
	<li>
	  <a href="proxy.html">
	    Proxy
	  </a>
	</li>
	<li>
	  <a href="ntp-deb-2-8-cliservices.html">
	    NTP
	  </a>
	</li>
	<li>
	  <a href="network-deb-2-8-clidiscovery.html">
	    Network discovery
	  </a>
	</li>
	<li>
	  <a href="ipv6-deb-2-8-cliaddressing.html">
	    IPv6
	  </a>
	</li>
	<li>
	  <a href="configuring-deb-2-8-clitls-deb-2-8-cliencryption.html">
	    SSL
	  </a>
	</li>
	<li>
	  <a href="managing-deb-2-8-clistp.html">
	    STP
	  </a>
	</li>
	<li>
	  <a href="availability-deb-2-8-clizones.html">
	    Availability zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="vm-deb-2-8-clihosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="vm-deb-2-8-clihost-deb-2-8-clinetworking.html">
	    VM host networking
	  </a>
	</li>
	<li>
	  <a href="adding-deb-2-8-clia-deb-2-8-clivm-deb-2-8-clihost.html">
	    Add a VM host
	  </a>
	</li>
	<li>
	  <a href="vm-deb-2-8-clihost-deb-2-8-clistorage-deb-2-8-clipools.html">
	    VM host storage pools
	  </a>
	</li>
	<li>
	  <a href="creating-deb-2-8-cliand-deb-2-8-clideleting-deb-2-8-clivms.html">
	    Creating and deleting VMs
	  </a>
	</li>
      </ul>
      <strong>Operations
      </strong>
      <ul>
	<li>
	  <a href="prometheus-deb-2-8-climetrics.html">
	    Prometheus metrics
	  </a>
	</li>
	<li>
	  <a href="backup.html">
	    Backup
	  </a>
	</li>
	<li>
	  <a href="hardening-deb-2-8-cliyour-deb-2-8-climaas-deb-2-8-cliinstallation.html">
	    MAAS security
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clilogging.html">
	    Logging
	  </a>
	</li>
	<li>
	  <a href="commissioning-deb-2-8-clilogs.html">
	    Commissioning logs
	  </a>
	</li>
	<li>
	  <a href="user-deb-2-8-cliaccounts.html">
	    User accounts
	  </a>
	</li>
	<li>
	  <a href="interactive-deb-2-8-clisearch.html">
	    Interactive search
	  </a>
	</li>
      </ul>
      <strong>
	<a href="concepts-deb-2-8-cliand-deb-2-8-cliterms.html">
	  Concepts &amp; terms
	</a>
      </strong>
      <ul>
	<li>
	  <a href="concepts-deb-2-8-cliand-deb-2-8-cliterms.html#heading-deb-2-8-cli-deb-2-8-clinetwork-deb-2-8-clitutorial">
	    Brief network tutorial
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-deb-2-8-clicli.html">
	  CLI
	</a>
      </strong>
      <ul>
	<li>
	  <a href="common-deb-2-8-clicli-deb-2-8-clitasks.html">
	    The CLI cookbook
	  </a>
	</li>
	<li>
	  <a href="common-deb-2-8-clicli-deb-2-8-clitasks.html">
	    Common tasks
	  </a>
	</li>
	<li>
	  <a href="audit-deb-2-8-clievent-deb-2-8-clilogs.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-clikernel-deb-2-8-climanagement.html">
	    Kernel management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliimage-deb-2-8-climanagement.html">
	    Image management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliinterface-deb-2-8-climanagement.html">
	    Interface management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliadvanced-deb-2-8-clitasks.html">
	    Advanced tasks
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-clicomposable-deb-2-8-clihardware.html">
	    Composable hardware
	  </a>
	</li>
	<li>
	  <a href="python-deb-2-8-cliapi-deb-2-8-cliclient.html">
	    API client
	  </a>
	</li>
      </ul>
      <strong>
	<a href="api.html">
	  API documentation
	</a>
      </strong>
      <ul>
	<li>
	  <a href="api-deb-2-8-cliauthentication.html">
	    API authentication
	  </a>
	</li>
      </ul>
      <strong>
	<a href="troubleshooting.html">
	  Troubleshoot
	</a>
      </strong>
      <ul>
	<li>
	  <a href="getting-deb-2-8-clihelp.html">
	    Getting help
	  </a>
	</li>
	<li>
	  <a href="tips-deb-2-8-clitricks-deb-2-8-cliand-deb-2-8-clitraps.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="https://old-deb-2-8-clidocs.maas.io/2.5/en/">
	    MAAS 2.5 (+ earlier) doc
	  </a>
	</li>
      </ul>
      <strong>
	<a href="whats-deb-2-8-clinew-deb-2-8-cliin-deb-2-8-climaas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="writing-deb-2-8-cliguide.html">
	  Help improve these docs
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-deb-2-8-clitop:40px; margin-deb-2-8-cliright:30px">
      <h1>Block devices</h1><!-deb-2-8-cli-deb-2-8-cli deb-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-clicli
 deb-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-clicli -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli deb-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-cliui
 deb-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli deb-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-cliui
 deb-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli deb-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-clicli
 deb-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-clicli -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli deb-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-cliui
 deb-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-clicli
 snap-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-clicli -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-cliui
 snap-deb-2-8-cli2-deb-2-8-cli7-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-clicli
 snap-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-clicli -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-cliui
 snap-deb-2-8-cli2-deb-2-8-cli8-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-clicli
 snap-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-clicli -deb-2-8-cli-deb-2-8-cli>

<!-deb-2-8-cli-deb-2-8-cli snap-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-cliui
 snap-deb-2-8-cli2-deb-2-8-cli9-deb-2-8-cliui -deb-2-8-cli-deb-2-8-cli>

<p>Once the initial storage layout has been configured on a machine, you can perform many operations to view and adjust the entire storage layout for the machine. In MAAS there are two different types of block devices.</p>
<p><strong>Physical</strong></p>
<p>A physical block device is a physically attached block device such as a 100GB hard drive connected to a server.</p>
<p><strong>Virtual</strong></p>
<p>A virtual block device is a block device that is exposed by the Linux kernel when an operation is performed. Almost all the operations on a physical block device can be performed on a virtual block device, such as a RAID device exposed as md0.</p>
<p><a href="#heading-deb-2-8-cli-deb-2-8-clilist-deb-2-8-cliblock-deb-2-8-clidevices"><h3 id="heading-deb-2-8-cli-deb-2-8-clilist-deb-2-8-cliblock-deb-2-8-clidevices">List Block Devices</h3></a></p>
<p>To view all block devices on a machine use the read operation. This list both physical and virtual block devices, as you can see in the output from the following command:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevices read &lt;node-deb-2-8-cliid&gt;
</code></pre>

<p>Output:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
[
    {
        &quot;id&quot;: 10,
        &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vda&quot;,
        &quot;serial&quot;: &quot;&quot;,
        &quot;block_size&quot;: 4096,
        &quot;available_size&quot;: 0,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/10/&quot;,
        &quot;filesystem&quot;: null,
        &quot;id_path&quot;: &quot;/dev/vda&quot;,
        &quot;size&quot;: 5368709120,
        &quot;partition_table_type&quot;: &quot;MBR&quot;,
        &quot;model&quot;: &quot;&quot;,
        &quot;type&quot;: &quot;physical&quot;,
        &quot;uuid&quot;: null,
        &quot;used_size&quot;: 5365563392,
        &quot;used_for&quot;: &quot;MBR partitioned with 1 partition&quot;,
        &quot;partitions&quot;: [
            {
                &quot;bootable&quot;: false,
                &quot;id&quot;: 9,
                &quot;resource_uri&quot;:&quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/10/partition/9&quot;,
                &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vda-deb-2-8-clipart1&quot;,
                &quot;uuid&quot;: &quot;aae082cd-deb-2-8-cli8be0-deb-2-8-cli4a64-deb-2-8-cliab49-deb-2-8-clie998abd6ea43&quot;,
                &quot;used_for&quot;: &quot;LVM volume for vgroot&quot;,
                &quot;size&quot;: 5360320512,
                &quot;type&quot;: &quot;partition&quot;,
                &quot;filesystem&quot;: {
                    &quot;uuid&quot;: &quot;a56ebfa6-deb-2-8-cli8ef4-deb-2-8-cli48b5-deb-2-8-clib6bc-deb-2-8-cli9f9d27065d24&quot;,
                    &quot;mount_options&quot;: null,
                    &quot;label&quot;: null,
                    &quot;fstype&quot;: &quot;lvm-deb-2-8-clipv&quot;,
                    &quot;mount_point&quot;: null
                }
            }
        ],
        &quot;tags&quot;: [
            &quot;rotary&quot;
        ],
        &quot;name&quot;: &quot;vda&quot;
    },
    {
        &quot;id&quot;: 11,
        &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/lvroot&quot;,
        &quot;serial&quot;: null,
        &quot;block_size&quot;: 4096,
        &quot;available_size&quot;: 0,
        &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
        &quot;filesystem&quot;: {
            &quot;uuid&quot;: &quot;7181a0c0-deb-2-8-cli9e16-deb-2-8-cli4276-deb-2-8-cli8a55-deb-2-8-clic77364d137ca&quot;,
            &quot;mount_options&quot;: null,
            &quot;label&quot;: &quot;root&quot;,
            &quot;fstype&quot;: &quot;ext4&quot;,
            &quot;mount_point&quot;: &quot;/&quot;
        },
        &quot;id_path&quot;: null,
        &quot;size&quot;: 3221225472,
        &quot;partition_table_type&quot;: null,
        &quot;model&quot;: null,
        &quot;type&quot;: &quot;virtual&quot;,
        &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
        &quot;used_size&quot;: 3221225472,
        &quot;used_for&quot;: &quot;ext4 formatted filesystem mounted at /&quot;,
        &quot;partitions&quot;: [],
        &quot;tags&quot;: [],
        &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;
    }
]
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-cliread-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-cliread-deb-2-8-cliblock-deb-2-8-clidevice">Read Block Device</h3></a></p>
<p>If you want to read just one block device instead of listing all block devices the read operation on the block device endpoint provides that information. To display the details on device &lsquo;11&rsquo; from the previous output, for example, we could enter:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice read &lt;node-deb-2-8-cliid&gt; 11
</code></pre>

<p>The above command generates the following output:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;available_size&quot;: 0,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vgroot-deb-2-8-clilvroot&quot;,
    &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;,
    &quot;used_for&quot;: &quot;ext4 formatted filesystem mounted at /&quot;,
    &quot;type&quot;: &quot;virtual&quot;,
    &quot;used_size&quot;: 3221225472,
    &quot;filesystem&quot;: {
        &quot;uuid&quot;: &quot;7181a0c0-deb-2-8-cli9e16-deb-2-8-cli4276-deb-2-8-cli8a55-deb-2-8-clic77364d137ca&quot;,
        &quot;mount_point&quot;: &quot;/&quot;,
        &quot;mount_options&quot;: null,
        &quot;fstype&quot;: &quot;ext4&quot;,
        &quot;label&quot;: &quot;root&quot;
    },
    &quot;id_path&quot;: null,
    &quot;id&quot;: 11,
    &quot;partition_table_type&quot;: null,
    &quot;block_size&quot;: 4096,
    &quot;tags&quot;: [],
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
    &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
    &quot;serial&quot;: null,
    &quot;partitions&quot;: [],
    &quot;size&quot;: 3221225472,
    &quot;model&quot;: null
}
</code></pre>

<p>It is also possible to use the name of the block device, such as &lsquo;sda&rsquo; or &lsquo;vda&rsquo;, instead of its &lsquo;id&rsquo;:</p>
<pre><code class="bash">s admin block-deb-2-8-clidevice read &lt;node-deb-2-8-cliid&gt; vda
</code></pre>

<p><strong>NOTE:</strong> 
MAAS allows the name of a block device to be changed. If the block device name has changed then the API call needs to use the new name.</p>
<pre><code>Using the ID is safer as it never changes.
</code></pre>
<p><a href="#heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-cliblock-deb-2-8-clidevice">Create Block Device</h3></a></p>
<p>MAAS gathers the required information itself on block devices when re-deb-2-8-cli commissioning a machine. If this doesn&rsquo;t provide the required information, it is also possible -deb-2-8-cli though not recommended -deb-2-8-cli for an administrator to use the API to manually add a physical block device to a machine.</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevices create &lt;node-deb-2-8-cliid&gt; name=vdb model=&quot;QEMU&quot; serial=&quot;QM00001&quot; size=21474836480 block_size=4096
</code></pre>

<p>Depending on your configuration, output should be similar to the following:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;available_size&quot;: 21474836480,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vdb&quot;,
    &quot;name&quot;: &quot;vdb&quot;,
    &quot;used_for&quot;: &quot;Unused&quot;,
    &quot;type&quot;: &quot;physical&quot;,
    &quot;used_size&quot;: 0,
    &quot;filesystem&quot;: null,
    &quot;id_path&quot;: &quot;&quot;,
    &quot;id&quot;: 12,
    &quot;partition_table_type&quot;: null,
    &quot;block_size&quot;: 4096,
    &quot;tags&quot;: [],
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/12/&quot;,
    &quot;uuid&quot;: null,
    &quot;serial&quot;: &quot;QM00001&quot;,
    &quot;partitions&quot;: [],
    &quot;size&quot;: 21474836480,
    &quot;model&quot;: &quot;QEMU&quot;
}
</code></pre>

<p><strong>NOTE:</strong> 
The serial number is what MAAS will use when a machine is deployed to find the specific block device. It&rsquo;s important that this be correct. In a rare chance that your block device does not provide a model or serial number you can provide an id_path. The id_path should be a path that is always the same, no matter the kernel version.</p>
<p><a href="#heading-deb-2-8-cli-deb-2-8-cliupdate-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-cliupdate-deb-2-8-cliblock-deb-2-8-clidevice">Update Block Device</h3></a></p>
<p>An administrator can also update the details held on a physical block device, such as its name, from the API:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice update &lt;node-deb-2-8-cliid&gt; 12 name=newroot
</code></pre>

<p>Output from this command will show that the &lsquo;name&rsquo; has changed:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;block_size&quot;: 4096,
    &quot;size&quot;: 21474836480,
    &quot;filesystem&quot;: null,
    &quot;model&quot;: &quot;QEMU&quot;,
    &quot;name&quot;: &quot;newroot&quot;,
    &quot;partitions&quot;: [],
    &quot;tags&quot;: [],
    &quot;used_size&quot;: 0,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/newroot&quot;,
    &quot;id_path&quot;: &quot;&quot;,
    &quot;uuid&quot;: null,
    &quot;available_size&quot;: 21474836480,
    &quot;id&quot;: 12,
    &quot;used_for&quot;: &quot;Unused&quot;,
    &quot;type&quot;: &quot;physical&quot;,
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/12/&quot;,
    &quot;partition_table_type&quot;: null,
    &quot;serial&quot;: &quot;QM00001&quot;
}
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-clidelete-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-clidelete-deb-2-8-cliblock-deb-2-8-clidevice">Delete Block Device</h3></a></p>
<p>Physical and virtual block devices can be deleted by an administrator, while ordinary users can only delete virtual block devices:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice delete &lt;node-deb-2-8-cliid&gt; 12
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-cliformat-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-cliformat-deb-2-8-cliblock-deb-2-8-clidevice">Format Block Device</h3></a></p>
<p>An entire block device can be formatted by defining a filesystem with the &lsquo;format&rsquo; API call:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice format &lt;node-deb-2-8-cliid&gt; 11 fstype=ext4
</code></pre>

<p>Successful output from this command will look similar to this:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;block_size&quot;: 4096,
    &quot;size&quot;: 3221225472,
    &quot;filesystem&quot;: {
        &quot;label&quot;: &quot;&quot;,
        &quot;fstype&quot;: &quot;ext4&quot;,
        &quot;mount_options&quot;: null,
        &quot;uuid&quot;: &quot;75e42f49-deb-2-8-cli9a45-deb-2-8-cli466c-deb-2-8-cli8425-deb-2-8-cli87a40e4f4148&quot;,
        &quot;mount_point&quot;: null
    },
    &quot;model&quot;: null,
    &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;,
    &quot;partitions&quot;: [],
    &quot;tags&quot;: [],
    &quot;used_size&quot;: 3221225472,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vgroot-deb-2-8-clilvroot&quot;,
    &quot;id_path&quot;: null,
    &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
    &quot;available_size&quot;: 0,
    &quot;id&quot;: 11,
    &quot;used_for&quot;: &quot;Unmounted ext4 formatted filesystem&quot;,
    &quot;type&quot;: &quot;virtual&quot;,
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
    &quot;partition_table_type&quot;: null,
    &quot;serial&quot;: null
}
</code></pre>

<p><strong>NOTE:</strong> 
You cannot format a block device that contains partitions or is used to make another virtual block device.</p>
<p><a href="#heading-deb-2-8-cli-deb-2-8-cliunformat-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-cliunformat-deb-2-8-cliblock-deb-2-8-clidevice">Unformat Block Device</h3></a></p>
<p>You can remove the filesystem from a block device with the &lsquo;unformat&rsquo; API call:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice unformat &lt;node-deb-2-8-cliid&gt; 11
</code></pre>

<p>The output from this command should show the filesystem is now &lsquo;null&rsquo;:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;available_size&quot;: 3221225472,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vgroot-deb-2-8-clilvroot&quot;,
    &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;,
    &quot;used_for&quot;: &quot;Unused&quot;,
    &quot;type&quot;: &quot;virtual&quot;,
    &quot;used_size&quot;: 0,
    &quot;filesystem&quot;: null,
    &quot;id_path&quot;: null,
    &quot;id&quot;: 11,
    &quot;partition_table_type&quot;: null,
    &quot;block_size&quot;: 4096,
    &quot;tags&quot;: [],
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
    &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
    &quot;serial&quot;: null,
    &quot;partitions&quot;: [],
    &quot;size&quot;: 3221225472,
    &quot;model&quot;: null
}
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-climount-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-climount-deb-2-8-cliblock-deb-2-8-clidevice">Mount Block Device</h3></a></p>
<p>If a block device has a filesystem, you can use the &lsquo;maas&rsquo; command to mount a block devices at a given mount point:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice mount &lt;node-deb-2-8-cliid&gt; 11 mount_point=/srv
</code></pre>

<p>The mount point is included in the successful output from the command:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;available_size&quot;: 0,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vgroot-deb-2-8-clilvroot&quot;,
    &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;,
    &quot;used_for&quot;: &quot;ext4 formatted filesystem mounted at /srv&quot;,
    &quot;type&quot;: &quot;virtual&quot;,
    &quot;used_size&quot;: 3221225472,
    &quot;filesystem&quot;: {
        &quot;uuid&quot;: &quot;6f5965ad-deb-2-8-cli49f7-deb-2-8-cli42da-deb-2-8-cli95ff-deb-2-8-cli8000b739c39f&quot;,
        &quot;mount_point&quot;: &quot;/srv&quot;,
        &quot;mount_options&quot;: &quot;&quot;,
        &quot;fstype&quot;: &quot;ext4&quot;,
        &quot;label&quot;: &quot;&quot;
    },
    &quot;id_path&quot;: null,
    &quot;id&quot;: 11,
    &quot;partition_table_type&quot;: null,
    &quot;block_size&quot;: 4096,
    &quot;tags&quot;: [],
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
    &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
    &quot;serial&quot;: null,
    &quot;partitions&quot;: [],
    &quot;size&quot;: 3221225472,
    &quot;model&quot;: null
}
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-cliunmount-deb-2-8-cliblock-deb-2-8-clidevice"><h3 id="heading-deb-2-8-cli-deb-2-8-cliunmount-deb-2-8-cliblock-deb-2-8-clidevice">Unmount Block Device</h3></a></p>
<p>To remove the mount point from the block device, use the &lsquo;unmount&rsquo; call:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice unmount &lt;node-deb-2-8-cliid&gt; 11 mount_point=/srv
</code></pre>

<p>The previous command will include a nullified &lsquo;mount_point&rsquo; in its output:</p>
<pre><code class="nohighlight">Success.
Machine-deb-2-8-clireadable output follows:
{
    &quot;available_size&quot;: 0,
    &quot;path&quot;: &quot;/dev/disk/by-deb-2-8-clidname/vgroot-deb-2-8-clilvroot&quot;,
    &quot;name&quot;: &quot;vgroot-deb-2-8-clilvroot&quot;,
    &quot;used_for&quot;: &quot;Unmounted ext4 formatted filesystem&quot;,
    &quot;type&quot;: &quot;virtual&quot;,
    &quot;used_size&quot;: 3221225472,
    &quot;filesystem&quot;: {
        &quot;uuid&quot;: &quot;6f5965ad-deb-2-8-cli49f7-deb-2-8-cli42da-deb-2-8-cli95ff-deb-2-8-cli8000b739c39f&quot;,
        &quot;mount_point&quot;: null,
        &quot;mount_options&quot;: null,
        &quot;fstype&quot;: &quot;ext4&quot;,
        &quot;label&quot;: &quot;&quot;
    },
    &quot;id_path&quot;: null,
    &quot;id&quot;: 11,
    &quot;partition_table_type&quot;: null,
    &quot;block_size&quot;: 4096,
    &quot;tags&quot;: [],
    &quot;resource_uri&quot;: &quot;/MAAS/api/2.0/nodes/4y3h8a/blockdevices/11/&quot;,
    &quot;uuid&quot;: &quot;fc8ba89e-deb-2-8-cli9149-deb-2-8-cli412c-deb-2-8-clibcea-deb-2-8-clie596eb7c0d14&quot;,
    &quot;serial&quot;: null,
    &quot;partitions&quot;: [],
    &quot;size&quot;: 3221225472,
    &quot;model&quot;: null
}
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-cliset-deb-2-8-clias-deb-2-8-cliboot-deb-2-8-clidisk"><h3 id="heading-deb-2-8-cli-deb-2-8-cliset-deb-2-8-clias-deb-2-8-cliboot-deb-2-8-clidisk">Set as Boot Disk</h3></a></p>
<p>By default, MAAS picks the first added block device to the machine as the boot disk. In most cases this works as expected as the BIOS usually enumerates the boot disk as the first block device. There are cases where this fails and the boot disk needs to be set to another disk. This API allow setting which block device on a machine MAAS should use as the boot disk.:</p>
<pre><code class="bash">maas admin block-deb-2-8-clidevice set-deb-2-8-cliboot-deb-2-8-clidisk &lt;node-deb-2-8-cliid&gt; 10
</code></pre>

<p><strong>NOTE:</strong> 
Only an administrator can set which block device should be used as the boot disk and only a physical block device can be set as as the boot disk. This operation should be done before a machine is acquired or the storage layout will be applied to the previous boot disk.</p>
    </div>
  </body>
</html>