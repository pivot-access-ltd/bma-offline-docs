<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <style>
      #selector a:link{color:black;}
      #selector a:visited{color:black;}
      #selector a:active{color:black;}
      #selector a:hover{color:blue;}
      #sidebar a:link{color:black;}
      #sidebar a:visited{color:black;}
      #sidebar a:active{color:black;}
      #sidebar a:hover{color:blue;}
      ul {margin-deb-2-8-clileft:0;list-deb-2-8-clistyle-deb-2-8-clitype:none;}
      li {margin: 4px 0;}
    </style>
  </head>
  <body>
    <div id="selector" style="top:0; position:fixed; float:right; background-deb-2-8-clicolor:#d9d9d9; width:100%;border-deb-2-8-clibottom:1px solid black;">
      &nbsp;&nbsp;<strong>Offline docs</strong>
      <a href="https://maas.io/docs">(switch to live docs)</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="../ui/maas-deb-2-8-clicli.html">
	  &nbsp;UI-deb-2-8-clionly&nbsp;
	</a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <span style="background-deb-2-8-clicolor:white;border-deb-2-8-clitop:1px solid black; border-deb-2-8-clileft:1px solid black; border-deb-2-8-cliright:1px solid black; border-deb-2-8-clibottom:5px solid white;">
	  CLI-deb-2-8-clionly
      </span>
    </div>
    <div id="sidebar" style="float:left; width:25%;margin-deb-2-8-clitop:40px; margin-deb-2-8-clileft:20px">
      <strong>
	<a href="maas-deb-2-8-clidocumentation.html">
	  Introduction
	</a>
      </strong>
      <ul>
	<li>
	  <a href="about-deb-2-8-climaas.html">
	    About MAAS
	  </a>
	</li>
	<li>
	  <a href="give-deb-2-8-clime-deb-2-8-clian-deb-2-8-cliexample-deb-2-8-cliof-deb-2-8-climaas.html">
	    &ldquo;Give me an example&rdquo;
	  </a>
	</li>
	<li>
	  <a href="whats-deb-2-8-clinew-deb-2-8-cliin-deb-2-8-climaas.html">
	    What&rsquo;s new in 2.8
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clirequirements.html">
	    Requirements
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-cliinstallation.html">
	    Installation
	  </a>
	</li>
	<li>
	  <a href="configuration-deb-2-8-clijourney.html">
	    Configuration journey
	  </a>
	</li>
      <strong>
	<a href="controllers.html">
	  Controllers
	</a>
      </strong>
      <ul>
	<li>
	  <a href="maas-deb-2-8-clicommunication.html">
	    Communication
	  </a>
	</li>
	<li>
	  <a href="rack-deb-2-8-clicontrollers.html">
	    Rack controllers
	  </a>
	</li>
	<li>
	  <a href="region-deb-2-8-clicontrollers.html">
	    Region controllers
	  </a>
	</li>
	<li>
	  <a href="high-deb-2-8-cliavailability.html">
	    High availability
	  </a>
	</li>
      </ul>
      <strong>
	<a href="machines.html">
	  Machines
	</a>
      </strong>
      <ul>
	<li>
	  <a href="add-deb-2-8-climachines.html">
	    Add machines
	  </a>
	</li>
	<li>
	  <a href="power-deb-2-8-climanagement.html">
	    Power management
	  </a>
	</li>
	<li>
	  <a href="commission-deb-2-8-climachines.html">
	    Commission machines
	  </a>
	</li>
	<li>Testing
	</li>
	<li>
	  <a href="hardware-deb-2-8-clitesting.html">
	    Hardware testing
	  </a>
	</li>
	<li>
	  <a href="network-deb-2-8-clitesting.html">
	    Network testing
	  </a>
	</li>
	<li>
	  <a href="commissioning-deb-2-8-cliand-deb-2-8-clihardware-deb-2-8-clitesting-deb-2-8-cliscripts.html">
	    Commissioning and hardware testing scripts
	  </a>
	</li>
	<li>
	  <a href="deploy-deb-2-8-climachines.html">
	    Deploy machines
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clitags.html">
	    Tags
	  </a>
	</li>
	<li>
	  <a href="custom-deb-2-8-climachine-deb-2-8-clisetup.html">
	    Custom machine setup
	  </a>
	</li>
	<li>
	  <a href="kernel-deb-2-8-cliboot-deb-2-8-clioptions.html">
	    Kernel boot options
	  </a>
	</li>
	<li>
	  <a href="resource-deb-2-8-clipools.html">
	    Resource pools
	  </a>
	</li>
	<li>
	  <a href="storage.html">
	    Storage
	  </a>
	</li>
	<li>
	  <a href="vmware-deb-2-8-clivmfs-deb-2-8-clidatastores.html">
	    VMware VMFS datastores
	  </a>
	</li>
	<li>
	  <a href="ubuntu-deb-2-8-clikernels.html">
	    Ubuntu kernels
	  </a>
	</li>
      </ul>
      <strong>
	<a href="images.html">
	  Images
	</a>
      </strong>
      <ul>
	<li>
	  <a href="select-deb-2-8-cliand-deb-2-8-cliimport-deb-2-8-cliimages.html">
	    Select and import images
	  </a>
	</li>
	<li>
	  <a href="local-deb-2-8-cliimage-deb-2-8-climirror.html">
	    Local image mirror
	  </a>
	</li>
	<li>
	  <a href="vmware-deb-2-8-cliimages.html">
	    VMWare images
	  </a>
	</li>
      </ul>
      <strong>
	<a href="networking.html">
	  Networking
	</a>
      </strong>
      <ul>
	<li>
	  <a href="subnet-deb-2-8-climanagement.html">
	    Subnet management
	  </a>
	</li>
	<li>
	  <a href="managing-deb-2-8-clidhcp.html">
	    DHCP
	  </a>
	</li>
	<li>
	  <a href="ip-deb-2-8-cliranges.html">
	    IP ranges
	  </a>
	</li>
	<li>
	  <a href="proxy.html">
	    Proxy
	  </a>
	</li>
	<li>
	  <a href="ntp-deb-2-8-cliservices.html">
	    NTP
	  </a>
	</li>
	<li>
	  <a href="network-deb-2-8-clidiscovery.html">
	    Network discovery
	  </a>
	</li>
	<li>
	  <a href="ipv6-deb-2-8-cliaddressing.html">
	    IPv6
	  </a>
	</li>
	<li>
	  <a href="configuring-deb-2-8-clitls-deb-2-8-cliencryption.html">
	    SSL
	  </a>
	</li>
	<li>
	  <a href="managing-deb-2-8-clistp.html">
	    STP
	  </a>
	</li>
	<li>
	  <a href="availability-deb-2-8-clizones.html">
	    Availability zones (AZs)
	  </a>
	</li>
      </ul>
      <strong>
	<a href="vm-deb-2-8-clihosting.html">
	  VM hosting
	</a>
      </strong>
      <ul>
	<li>
	  <a href="vm-deb-2-8-clihost-deb-2-8-clinetworking.html">
	    VM host networking
	  </a>
	</li>
	<li>
	  <a href="adding-deb-2-8-clia-deb-2-8-clivm-deb-2-8-clihost.html">
	    Add a VM host
	  </a>
	</li>
	<li>
	  <a href="vm-deb-2-8-clihost-deb-2-8-clistorage-deb-2-8-clipools.html">
	    VM host storage pools
	  </a>
	</li>
	<li>
	  <a href="creating-deb-2-8-cliand-deb-2-8-clideleting-deb-2-8-clivms.html">
	    Creating and deleting VMs
	  </a>
	</li>
      </ul>
      <strong>Operations
      </strong>
      <ul>
	<li>
	  <a href="prometheus-deb-2-8-climetrics.html">
	    Prometheus metrics
	  </a>
	</li>
	<li>
	  <a href="backup.html">
	    Backup
	  </a>
	</li>
	<li>
	  <a href="hardening-deb-2-8-cliyour-deb-2-8-climaas-deb-2-8-cliinstallation.html">
	    MAAS security
	  </a>
	</li>
	<li>
	  <a href="maas-deb-2-8-clilogging.html">
	    Logging
	  </a>
	</li>
	<li>
	  <a href="commissioning-deb-2-8-clilogs.html">
	    Commissioning logs
	  </a>
	</li>
	<li>
	  <a href="user-deb-2-8-cliaccounts.html">
	    User accounts
	  </a>
	</li>
	<li>
	  <a href="interactive-deb-2-8-clisearch.html">
	    Interactive search
	  </a>
	</li>
      </ul>
      <strong>
	<a href="concepts-deb-2-8-cliand-deb-2-8-cliterms.html">
	  Concepts &amp; terms
	</a>
      </strong>
      <ul>
	<li>
	  <a href="concepts-deb-2-8-cliand-deb-2-8-cliterms.html#heading-deb-2-8-cli-deb-2-8-clinetwork-deb-2-8-clitutorial">
	    Brief network tutorial
	  </a>
	</li>
      </ul>
      <strong>
	<a href="maas-deb-2-8-clicli.html">
	  CLI
	</a>
      </strong>
      <ul>
	<li>
	  <a href="common-deb-2-8-clicli-deb-2-8-clitasks.html">
	    The CLI cookbook
	  </a>
	</li>
	<li>
	  <a href="common-deb-2-8-clicli-deb-2-8-clitasks.html">
	    Common tasks
	  </a>
	</li>
	<li>
	  <a href="audit-deb-2-8-clievent-deb-2-8-clilogs.html">
	    Audit event logs
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-clikernel-deb-2-8-climanagement.html">
	    Kernel management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliimage-deb-2-8-climanagement.html">
	    Image management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliinterface-deb-2-8-climanagement.html">
	    Interface management
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-cliadvanced-deb-2-8-clitasks.html">
	    Advanced tasks
	  </a>
	</li>
	<li>
	  <a href="cli-deb-2-8-clicomposable-deb-2-8-clihardware.html">
	    Composable hardware
	  </a>
	</li>
	<li>
	  <a href="python-deb-2-8-cliapi-deb-2-8-cliclient.html">
	    API client
	  </a>
	</li>
      </ul>
      <strong>
	<a href="api.html">
	  API documentation
	</a>
      </strong>
      <ul>
	<li>
	  <a href="api-deb-2-8-cliauthentication.html">
	    API authentication
	  </a>
	</li>
      </ul>
      <strong>
	<a href="troubleshooting.html">
	  Troubleshoot
	</a>
      </strong>
      <ul>
	<li>
	  <a href="getting-deb-2-8-clihelp.html">
	    Getting help
	  </a>
	</li>
	<li>
	  <a href="tips-deb-2-8-clitricks-deb-2-8-cliand-deb-2-8-clitraps.html">
	    Tips, tricks, and traps
	  </a>
	</li>
	<li>
	  <a href="https://old-deb-2-8-clidocs.maas.io/2.5/en/">
	    MAAS 2.5 (+ earlier) doc
	  </a>
	</li>
      </ul>
      <strong>
	<a href="whats-deb-2-8-clinew-deb-2-8-cliin-deb-2-8-climaas.html">
	  Release notes
	</a>
      </strong>
      <p/>
      <strong>
	<a href="writing-deb-2-8-cliguide.html">
	  Help improve these docs
	</a>
      </strong>
    </div>
    <div class="container" style="float:right; width:65%; margin-deb-2-8-clitop:40px; margin-deb-2-8-cliright:30px">
      <h1>MAAS CLI</h1><p>The MAAS CLI can do everything that the web UI can do, and more. The CLI uses the <code>maas</code> command exclusively which, in turn, connects to the API.  This page explains what is needed to get started with the CLI.</p>
<p>Note that this article does not provide complete coverage of the MAAS CLI. For an exhaustive treatment, you may want to check the API documentation.  Also note that this page represents user-deb-2-8-clientered values as uppercase variables preceded with the &lsquo;$&rsquo; character (e.g. $PROFILE and $EMAIL_ADDRESS). You should replace these placeholders with actual values.</p>
<h4>Six questions you may have:</h4>
<ol>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-clithe-deb-2-8-climaas-deb-2-8-clicommand">How do I access the MAAS CLI?</a></li>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-clian-deb-2-8-cliadministrator">How do I create an administrator account?</a></li>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliin-deb-2-8-clirequired">How do I complete the required login?</a></li>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-cliget-deb-2-8-clihelp">How do I get help via the CLI?</a></li>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliout">How do I log out?</a></li>
<li><a href="maas-deb-2-8-clicli.html#heading-deb-2-8-cli-deb-2-8-clinext-deb-2-8-clisteps">What are some the next steps I can take with the CLI?</a></li>
</ol>
<p><a href="#heading-deb-2-8-cli-deb-2-8-clithe-deb-2-8-climaas-deb-2-8-clicommand"><h2 id="heading-deb-2-8-cli-deb-2-8-clithe-deb-2-8-climaas-deb-2-8-clicommand">The maas command</h2></a></p>
<p>You can obtain the <code>maas</code> command via the <code>maas-deb-2-8-clicli</code> Ubuntu package installed on every region API server and rack controller. To manage MAAS at the CLI level from a remote workstation, you will need to install this package:</p>
<pre><code class="bash">sudo apt install maas-deb-2-8-clicli
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-clian-deb-2-8-cliadministrator"><h2 id="heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-clian-deb-2-8-cliadministrator">Create an administrator</h2></a></p>
<p>MAAS requires an initial administrator, sometimes called a MAAS &ldquo;superuser&rdquo;. When you access the web UI for the first time, you will be prompted to create this user:</p>
<pre><code class="bash">sudo maas createadmin -deb-2-8-cli-deb-2-8-cliusername=$PROFILE -deb-2-8-cli-deb-2-8-cliemail=$EMAIL_ADDRESS
</code></pre>

<p>You can create extra administrators in the same way. See <a href="common-deb-2-8-clicli-deb-2-8-clitasks.html#heading-deb-2-8-cli-deb-2-8-clicreate-deb-2-8-clia-deb-2-8-cliregular-deb-2-8-cliuser">MAAS CLI -deb-2-8-cli common tasks</a> for instructions on creating regular users with the CLI.</p>
<p><a href="#heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliin-deb-2-8-clirequired"><h2 id="heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliin-deb-2-8-clirequired">Log in (required)</h2></a></p>
<p>To use the CLI you must first log in to the API server (region controller).</p>
<p>You will need the API key that MAAS generated when creating your MAAS account. To obtain it, run this command on the region controller (i.e. wherever you installed the &lsquo;maas-deb-2-8-cliregion-deb-2-8-clicontroller&rsquo; package):</p>
<pre><code class="bash">sudo maas-deb-2-8-cliregion apikey -deb-2-8-cli-deb-2-8-cliusername=$PROFILE &gt; $API_KEY_FILE
</code></pre>

<p><strong>NOTE:</strong> 
You can obtain a user&rsquo;s API key from the web interface. Click on &lsquo;username&rsquo; in the top right corner, and select &lsquo;Account&rsquo;.</p>
<p>Log in. MAAS will prompt you for the API key:</p>
<pre><code class="bash">maas login $PROFILE $MAAS_URL
</code></pre>

<p>For example, to log in with the account whose username is &lsquo;admin&rsquo; and where the region controller is on the localhost:</p>
<pre><code class="bash">maas login admin http://localhost:5240/MAAS/api/2.0
</code></pre>

<p>To log in by referring to the API key file created earlier:</p>
<pre><code class="bash">maas login $PROFILE $MAAS_URL -deb-2-8-cli &lt; $API_KEY_FILE
</code></pre>

<p>A handy shell script, say <code>maas-deb-2-8-clilogin.sh</code>, is provided:</p>
<pre><code class="no-deb-2-8-clihighlight">#!/bin/sh

# Change these 3 values as required 
PROFILE=admin
API_KEY_FILE=/home/ubuntu/tmp/api_key
API_SERVER=localhost

MAAS_URL=http://$API_SERVER/MAAS/api/2.0

maas login $PROFILE $MAAS_URL -deb-2-8-cli &lt; $API_KEY_FILE
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-cliget-deb-2-8-clihelp"><h2 id="heading-deb-2-8-cli-deb-2-8-cliget-deb-2-8-clihelp">Get help</h2></a></p>
<p>MAAS has a thorough built-deb-2-8-cliin help reference, which you can access in stages to understand how to build commands.</p>
<p>The <code>maas</code> command accepts the <code>-deb-2-8-clih</code> or <code>-deb-2-8-cli-deb-2-8-clihelp</code> argument after every keyword and will display results with increasing detail.</p>
<p>For example, suppose you were interested in tag management but didn&rsquo;t know where to start. You might try this:</p>
<pre><code class="bash">maas $PROFILE -deb-2-8-cli-deb-2-8-clihelp
</code></pre>

<p>At this stage, you&rsquo;ll see all available MAAS commands, including the <code>tag</code> and <code>tags</code> commands, along with a brief explanation of what each command does. To see what the <code>tag</code> and <code>tags</code> commands have to offer, try:</p>
<pre><code class="bash">maas $PROFILE tag -deb-2-8-cli-deb-2-8-clihelp
</code></pre>

<p>And:</p>
<pre><code class="bash">maas $PROFILE tags -deb-2-8-cli-deb-2-8-clihelp
</code></pre>

<p>Suppose you want to create a new rudimentary tag. Find the next level of help like this:</p>
<pre><code class="bash">maas admin tags create -deb-2-8-cli-deb-2-8-clihelp
</code></pre>

<p>In this way, you can discover all that the MAAS CLI has to offer.</p>
<p><a href="#heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliout"><h2 id="heading-deb-2-8-cli-deb-2-8-clilog-deb-2-8-cliout">Log out</h2></a></p>
<p>Once you finish with the CLI, you can log out from the given profile, flushing the stored credentials.</p>
<pre><code class="bash">maas logout $PROFILE
</code></pre>

<p><a href="#heading-deb-2-8-cli-deb-2-8-clinext-deb-2-8-clisteps"><h2 id="heading-deb-2-8-cli-deb-2-8-clinext-deb-2-8-clisteps">Next steps</h2></a></p>
<p>The following five categories are now available to be explored:</p>
<ol>
<li><a href="common-deb-2-8-clicli-deb-2-8-clitasks.html">Common tasks</a></li>
<li><a href="cli-deb-2-8-clikernel-deb-2-8-climanagement.html">Kernel management</a></li>
<li><a href="cli-deb-2-8-cliimage-deb-2-8-climanagement.html">Image management</a></li>
<li><a href="cli-deb-2-8-cliadvanced-deb-2-8-clitasks.html">Advanced tasks</a></li>
<li><a href="cli-deb-2-8-clicomposable-deb-2-8-clihardware.html">Composable hardware</a></li>
</ol>
    </div>
  </body>
</html>